{"version":3,"file":"component---src-pages-search-js-b65423448f319be0caec.js","mappings":";oHAqBA,SAASA,IACPC,KAAKC,QAAUD,KAAKC,SAAW,CAAC,EAChCD,KAAKE,cAAgBF,KAAKE,oBAAiBC,CAC7C,CAuQA,SAASC,EAAWC,GAClB,MAAsB,mBAARA,CAChB,CAMA,SAASC,EAASD,GAChB,MAAsB,iBAARA,GAA4B,OAARA,CACpC,CAEA,SAASE,EAAYF,GACnB,YAAe,IAARA,CACT,CApRAG,EAAOC,QAAUV,EAKjBA,EAAaW,UAAUT,aAAUE,EACjCJ,EAAaW,UAAUR,mBAAgBC,EAIvCJ,EAAaY,oBAAsB,GAInCZ,EAAaW,UAAUE,gBAAkB,SAASC,GAChD,GA4PsB,iBA5PRA,GAAMA,EAAI,GAAKC,MAAMD,GACjC,MAAME,UAAU,+BAElB,OADAf,KAAKE,cAAgBW,EACdb,IACT,EAEAD,EAAaW,UAAUM,KAAO,SAASC,GACrC,IAAIC,EAAIC,EAASC,EAAKC,EAAMC,EAAGC,EAM/B,GAJKvB,KAAKC,UACRD,KAAKC,QAAU,CAAC,GAGL,UAATgB,KACGjB,KAAKC,QAAQuB,OACblB,EAASN,KAAKC,QAAQuB,SAAWxB,KAAKC,QAAQuB,MAAMC,QAAS,CAEhE,IADAP,EAAKQ,UAAU,cACGC,MAChB,MAAMT,EAGN,IAAIU,EAAM,IAAID,MAAM,yCAA2CT,EAAK,KAEpE,MADAU,EAAIC,QAAUX,EACRU,CAEV,CAKF,GAAIrB,EAFJY,EAAUnB,KAAKC,QAAQgB,IAGrB,OAAO,EAET,GAAIb,EAAWe,GACb,OAAQO,UAAUD,QAEhB,KAAK,EACHN,EAAQW,KAAK9B,MACb,MACF,KAAK,EACHmB,EAAQW,KAAK9B,KAAM0B,UAAU,IAC7B,MACF,KAAK,EACHP,EAAQW,KAAK9B,KAAM0B,UAAU,GAAIA,UAAU,IAC3C,MAEF,QACEL,EAAOU,MAAMrB,UAAUsB,MAAMF,KAAKJ,UAAW,GAC7CP,EAAQc,MAAMjC,KAAMqB,QAEnB,GAAIf,EAASa,GAIlB,IAHAE,EAAOU,MAAMrB,UAAUsB,MAAMF,KAAKJ,UAAW,GAE7CN,GADAG,EAAYJ,EAAQa,SACJP,OACXH,EAAI,EAAGA,EAAIF,EAAKE,IACnBC,EAAUD,GAAGW,MAAMjC,KAAMqB,GAG7B,OAAO,CACT,EAEAtB,EAAaW,UAAUwB,YAAc,SAASjB,EAAMkB,GAClD,IAAIC,EAEJ,IAAKhC,EAAW+B,GACd,MAAMpB,UAAU,+BA2ClB,OAzCKf,KAAKC,UACRD,KAAKC,QAAU,CAAC,GAIdD,KAAKC,QAAQoC,aACfrC,KAAKgB,KAAK,cAAeC,EACfb,EAAW+B,EAASA,UACpBA,EAASA,SAAWA,GAE3BnC,KAAKC,QAAQgB,GAGTX,EAASN,KAAKC,QAAQgB,IAE7BjB,KAAKC,QAAQgB,GAAMqB,KAAKH,GAGxBnC,KAAKC,QAAQgB,GAAQ,CAACjB,KAAKC,QAAQgB,GAAOkB,GAN1CnC,KAAKC,QAAQgB,GAAQkB,EASnB7B,EAASN,KAAKC,QAAQgB,MAAWjB,KAAKC,QAAQgB,GAAMsB,SAIpDH,EAHG7B,EAAYP,KAAKE,eAGhBH,EAAaY,oBAFbX,KAAKE,gBAKFkC,EAAI,GAAKpC,KAAKC,QAAQgB,GAAMQ,OAASW,IAC5CpC,KAAKC,QAAQgB,GAAMsB,QAAS,EAC5BC,QAAQhB,MAAM,mIAGAxB,KAAKC,QAAQgB,GAAMQ,QACJ,mBAAlBe,QAAQC,OAEjBD,QAAQC,SAKPzC,IACT,EAEAD,EAAaW,UAAUgC,GAAK3C,EAAaW,UAAUwB,YAEnDnC,EAAaW,UAAUiC,KAAO,SAAS1B,EAAMkB,GAC3C,IAAK/B,EAAW+B,GACd,MAAMpB,UAAU,+BAElB,IAAI6B,GAAQ,EAEZ,SAASC,IACP7C,KAAK8C,eAAe7B,EAAM4B,GAErBD,IACHA,GAAQ,EACRT,EAASF,MAAMjC,KAAM0B,WAEzB,CAKA,OAHAmB,EAAEV,SAAWA,EACbnC,KAAK0C,GAAGzB,EAAM4B,GAEP7C,IACT,EAGAD,EAAaW,UAAUoC,eAAiB,SAAS7B,EAAMkB,GACrD,IAAIY,EAAMC,EAAUvB,EAAQH,EAE5B,IAAKlB,EAAW+B,GACd,MAAMpB,UAAU,+BAElB,IAAKf,KAAKC,UAAYD,KAAKC,QAAQgB,GACjC,OAAOjB,KAMT,GAHAyB,GADAsB,EAAO/C,KAAKC,QAAQgB,IACNQ,OACduB,GAAY,EAERD,IAASZ,GACR/B,EAAW2C,EAAKZ,WAAaY,EAAKZ,WAAaA,SAC3CnC,KAAKC,QAAQgB,GAChBjB,KAAKC,QAAQ6C,gBACf9C,KAAKgB,KAAK,iBAAkBC,EAAMkB,QAE/B,GAAI7B,EAASyC,GAAO,CACzB,IAAKzB,EAAIG,EAAQH,KAAM,GACrB,GAAIyB,EAAKzB,KAAOa,GACXY,EAAKzB,GAAGa,UAAYY,EAAKzB,GAAGa,WAAaA,EAAW,CACvDa,EAAW1B,EACX,KACF,CAGF,GAAI0B,EAAW,EACb,OAAOhD,KAEW,IAAhB+C,EAAKtB,QACPsB,EAAKtB,OAAS,SACPzB,KAAKC,QAAQgB,IAEpB8B,EAAKE,OAAOD,EAAU,GAGpBhD,KAAKC,QAAQ6C,gBACf9C,KAAKgB,KAAK,iBAAkBC,EAAMkB,EACtC,CAEA,OAAOnC,IACT,EAEAD,EAAaW,UAAUwC,mBAAqB,SAASjC,GACnD,IAAIkC,EAAK5B,EAET,IAAKvB,KAAKC,QACR,OAAOD,KAGT,IAAKA,KAAKC,QAAQ6C,eAKhB,OAJyB,IAArBpB,UAAUD,OACZzB,KAAKC,QAAU,CAAC,EACTD,KAAKC,QAAQgB,WACbjB,KAAKC,QAAQgB,GACfjB,KAIT,GAAyB,IAArB0B,UAAUD,OAAc,CAC1B,IAAK0B,KAAOnD,KAAKC,QACH,mBAARkD,GACJnD,KAAKkD,mBAAmBC,GAI1B,OAFAnD,KAAKkD,mBAAmB,kBACxBlD,KAAKC,QAAU,CAAC,EACTD,IACT,CAIA,GAAII,EAFJmB,EAAYvB,KAAKC,QAAQgB,IAGvBjB,KAAK8C,eAAe7B,EAAMM,QACrB,GAAIA,EAET,KAAOA,EAAUE,QACfzB,KAAK8C,eAAe7B,EAAMM,EAAUA,EAAUE,OAAS,IAI3D,cAFOzB,KAAKC,QAAQgB,GAEbjB,IACT,EAEAD,EAAaW,UAAUa,UAAY,SAASN,GAQ1C,OANKjB,KAAKC,SAAYD,KAAKC,QAAQgB,GAE1Bb,EAAWJ,KAAKC,QAAQgB,IACzB,CAACjB,KAAKC,QAAQgB,IAEdjB,KAAKC,QAAQgB,GAAMe,QAJnB,EAMV,EAEAjC,EAAaW,UAAU0C,cAAgB,SAASnC,GAC9C,GAAIjB,KAAKC,QAAS,CAChB,IAAIoD,EAAarD,KAAKC,QAAQgB,GAE9B,GAAIb,EAAWiD,GACb,OAAO,EACJ,GAAIA,EACP,OAAOA,EAAW5B,MACtB,CACA,OAAO,CACT,EAEA1B,EAAaqD,cAAgB,SAASE,EAASrC,GAC7C,OAAOqC,EAAQF,cAAcnC,EAC/B,qCC3RA,IAAIsC,EAAsB,EAAQ,MAE9BC,EAAmB,EAAQ,MAC3BC,EAAgB,EAAQ,MAiC5B,SAASC,EAAoBC,EAAQC,EAAOC,GAC1C,OAAO,IAAIN,EAAoBI,EAAQC,EAAOC,EAChD,CAOAH,EAAoBI,QAAU,EAAQ,MAOtCJ,EAAoBH,oBAAsBA,EAO1CG,EAAoBF,iBAAmBA,EAOvCE,EAAoBD,cAAgBA,EAEpCjD,EAAOC,QAAUiD,qCCpEjB,IAAI3D,EAAe,EAAQ,MAa3B,SAASgE,EAAcC,EAAYC,GACjCjE,KAAKkE,KAAOF,EACZhE,KAAKiE,GAAKA,EACVjE,KAAKmE,YAAc,IACrB,CAhBe,EAAQ,KAkBvBC,CAASL,EAAehE,GAOxBgE,EAAcrD,UAAU2D,OAAS,WAC/BrE,KAAKkD,qBACLlD,KAAKkE,KAAKI,oBAAoBtE,KAChC,EAEA+D,EAAcrD,UAAU6D,iBAAmB,SAASC,GAClD,OAAOxE,KAAKiE,GAAGO,EACjB,EAEAhE,EAAOC,QAAUsD,qCCvBjB,IAAIU,EAAe,EAAQ,MACvBC,EAAO,EAAQ,MACfC,EAAgB,EAAQ,KAExBC,EAAM,CAQRC,cAAe,SAAuBC,EAAgBC,EAAWC,GAC/D,GAAIJ,EAAIK,UAAUH,EAAgBC,EAAWC,GAC3C,OAAOF,EAGT,IAAII,EAAgB,GAAKF,EAErBG,EAAmBL,EAAeC,GAEpCD,EAAeC,GAAWK,OAAOF,GADjC,CAACA,GAGCG,EAAM,CAAC,EAIX,OAFAA,EAAIN,GAAaI,EAEVV,EAAa,CAAC,EAAGY,EAAKP,EAC/B,EAUAQ,iBAAkB,SAA0BR,EAAgBC,EAAWC,GACrE,QAAc7E,IAAV6E,EAGF,OAAOJ,EAAIW,gBAAgBT,GAAgB,SAASU,EAAGC,GACrD,OAAOV,IAAcU,CACvB,IAGF,IAAIP,EAAgB,GAAKF,EAEzB,OAAOJ,EAAIW,gBAAgBT,GAAgB,SAASU,EAAGC,GACrD,OAAOV,IAAcU,GAAKP,IAAkBM,CAC9C,GACF,EAQAE,iBAAkB,SAA0BZ,EAAgBC,EAAWC,GACrE,QAAc7E,IAAV6E,EAAqB,MAAM,IAAIrD,MAAM,gDAEzC,OAAIiD,EAAIK,UAAUH,EAAgBC,EAAWC,GACpCJ,EAAIU,iBAAiBR,EAAgBC,EAAWC,GAGlDJ,EAAIC,cAAcC,EAAgBC,EAAWC,EACtD,EAYAO,gBAAiB,SAAyBT,EAAgBC,EAAWY,GACnE,QAAkBxF,IAAd4E,EACF,OAAKJ,EAAcG,GAGZ,CAAC,EAFCA,EAGJ,GAAyB,iBAAdC,EAChB,OAAOL,EAAKI,EAAgB,CAACC,IACxB,GAAyB,mBAAdA,EAA0B,CAC1C,IAAIa,GAAa,EAEbC,EAAoBC,OAAOC,KAAKjB,GAAgBkB,QAAO,SAASC,EAAM9C,GACxE,IAAI+C,EAASpB,EAAe3B,IAAQ,GAChCgD,EAAYD,EAAOE,QAAO,SAASpB,GACrC,OAAQD,EAAUC,EAAO7B,EAAKwC,EAChC,IAOA,OALIQ,EAAU1E,SAAWyE,EAAOzE,SAC9BmE,GAAa,GAEfK,EAAK9C,GAAOgD,EAELF,CACT,GAAG,CAAC,GAEJ,OAAIL,EAAmBC,EAChBf,CACT,CACF,EAUAG,UAAW,SAAmBH,EAAgBC,EAAWsB,GACvD,IAAIC,IAAwBxB,EAAeC,IACzCD,EAAeC,GAAWtD,OAAS,EAErC,QAAwBtB,IAApBkG,IAAkCC,EACpC,OAAOA,EAGT,IAAIC,EAA0B,GAAKF,EAEnC,OAAuE,IAAhEvB,EAAeC,GAAWyB,QAAQD,EAC3C,GAGF/F,EAAOC,QAAUmE,qCChJjB,IAAI6B,EAAQ,EAAQ,KAChBhC,EAAe,EAAQ,MACvBiC,EAAe,EAAQ,MACvBC,EAAO,EAAQ,MACfC,EAAc,EAAQ,MACtBlC,EAAO,EAAQ,MACfC,EAAgB,EAAQ,KACxBkC,EAAmB,EAAQ,MAE3BC,EAAiB,EAAQ,MAS7B,SAASC,EAAyBC,EAAGC,GACnC,OAAIlF,MAAMmF,QAAQF,IAAMjF,MAAMmF,QAAQD,GAElCD,EAAEvF,SAAWwF,EAAExF,QACfuF,EAAEG,OAAM,SAASC,EAAI9F,GACnB,OAAOyF,EAAyBE,EAAE3F,GAAI8F,EACxC,IAGGJ,IAAMC,CACf,CA+DA,SAASzD,EAAiB6D,GACxB,IAAIC,EAASD,EAAgB7D,EAAiB+D,cAAcF,GAAiB,CAAC,OAErDlH,IAArBmH,EAAOE,WAA4BX,EAAiBS,EAAOE,YAC7DhF,QAAQiF,KAAK,mIAQfzH,KAAK0H,OAASJ,EAAOI,QAAU,GAO/B1H,KAAK2H,kBAAoBL,EAAOK,mBAAqB,GASrD3H,KAAK4H,mBAAqBN,EAAOM,oBAAsB,GAevD5H,KAAK6H,kBAAoBP,EAAOO,mBAAqB,CAAC,EAatD7H,KAAK8H,eAAiBR,EAAOQ,gBAAkB,CAAC,EAahD9H,KAAK+H,6BAA+BT,EAAOS,8BAAgC,CAAC,EAY5E/H,KAAKgI,mBAAqBV,EAAOU,oBAAsB,CAAC,EAQxDhI,KAAKiI,eAAiBX,EAAOW,gBAAkB,GAe/CjI,KAAKkI,8BAAgCZ,EAAOY,+BAAiC,CAAC,EAE9E,IAAIC,EAAOnI,KACX8F,OAAOC,KAAKuB,GAAQc,SAAQ,SAASC,GACnC,IAAIC,GAAiE,IAApD9E,EAAiB+E,WAAW/B,QAAQ6B,GACjDG,OAAuCrI,IAAtBmH,EAAOe,IAEvBC,GAAcE,IACjBL,EAAKE,GAAaf,EAAOe,GAE7B,GACF,CAOA7E,EAAiB+E,WAAazC,OAAOC,KAAK,IAAIvC,GAO9CA,EAAiB+D,cAAgB,SAASkB,GAExC,GAAIA,aAAwBjF,EAAkB,OAAOiF,EAErD,IAAIC,EAAU,CAAC,EAsCf,GApCiB,CACf,kBACA,eACA,iBACA,uBACA,sBACA,OACA,oBACA,WACA,sBACA,cACA,gBAGSN,SAAQ,SAASO,GAC1B,IAAI3D,EAAQyD,EAAaE,GACzB,GAAqB,iBAAV3D,EAAoB,CAC7B,IAAI4D,EAAcC,WAAW7D,GAE7B0D,EAAQC,GAAK7H,MAAM8H,GAAe5D,EAAQ4D,CAC5C,CACF,IAII7G,MAAMmF,QAAQuB,EAAaK,qBAC7BJ,EAAQI,kBAAoBL,EAAaK,kBAAkBC,KAAI,SAASC,GACtE,OAAIjH,MAAMmF,QAAQ8B,GACTA,EAAQD,KAAI,SAAS/D,GAC1B,OAAO6D,WAAW7D,EACpB,IAEKgE,CACT,KAGEP,EAAaT,mBAAoB,CACnC,IAAIA,EAAqB,CAAC,EAC1BlC,OAAOC,KAAK0C,EAAaT,oBAAoBI,SAAQ,SAASrD,GAC5D,IAAIkE,EAAYR,EAAaT,mBAAmBjD,IAAc,CAAC,EAC/DiD,EAAmBjD,GAAa,CAAC,EACjCe,OAAOC,KAAKkD,GAAWb,SAAQ,SAASc,GACtC,IACIC,EADSF,EAAUC,GACGH,KAAI,SAASvD,GACrC,OAAIzD,MAAMmF,QAAQ1B,GACTA,EAAEuD,KAAI,SAASK,GACpB,MAAsB,iBAAXA,EACFP,WAAWO,GAEbA,CACT,IACsB,iBAAN5D,EACTqD,WAAWrD,GAEbA,CACT,IACAwC,EAAmBjD,GAAWmE,GAAYC,CAC5C,GACF,IACAT,EAAQV,mBAAqBA,CAC/B,CAEA,OAAOvB,EAAM,CAAC,EAAGgC,EAAcC,EACjC,EAQAlF,EAAiB6F,KAAO,SAA8BhC,GACpD,IAAIiC,EAAW,IAAI9F,EAAiB6D,GAmBpC,OAjByBA,EAAcO,oBAAsB,IAC1CQ,SAAQ,SAASmB,GAClC,GAAIA,EAAMC,SAAU,CAClB,IAAIC,EAAoBH,EAASI,0BAA0BH,EAAMI,MAE7DF,EAAkBhI,OAAS,GAAsD,IAAjDgI,EAAkB,GAAGjD,QAAQ+C,EAAMC,YACrEF,EAAWA,EAASM,iBAAiBL,EAAMI,OAKZ,KADjCF,EAAoBH,EAASI,0BAA0BH,EAAMI,OACvClI,SACpB6H,EAAWA,EAASO,kCAAkCN,EAAMI,KAAMJ,EAAMC,UAE5E,CACF,IAEOF,CACT,EAQA9F,EAAiBsG,SAAW,SAASC,EAAcvF,GACjD,IAAI8C,EAAS9C,GAAc,CAAC,EAE5B,OAAIuF,EAAaC,YAAc1C,EAAOW,gBAAkBX,EAAOW,eAAexG,OAAS,EAC9E,IAAIE,MACT,qLAIAoI,EAAa9B,eAAexG,OAAS,GAAK6F,EAAO0C,WAC5C,IAAIrI,MACT,oKAKFoI,EAAaE,gBACb3C,EAAOU,oBACPrD,EAAc2C,EAAOU,oBAEd,IAAIrG,MACT,+KAMAgD,EAAcoF,EAAa/B,qBAAuBV,EAAO2C,eACpD,IAAItI,MACT,+KAKG,IACT,EAEA6B,EAAiB9C,UAAY,CAC3BwJ,YAAa1G,EAWboG,iBAAkB,SAA0B7E,GAC1C,IAAIoF,EAAQ,CACVnC,mBAAoBhI,KAAKoK,yBAAyBrF,GAClD8C,kBAAmBf,EAAevB,gBAChCvF,KAAK6H,kBACL9C,EACA,oBAEF+C,eAAgBhB,EAAevB,gBAC7BvF,KAAK8H,eACL/C,EACA,WAEFgD,6BAA8BjB,EAAevB,gBAC3CvF,KAAK+H,6BACLhD,EACA,oBAEFmD,8BAA+BpB,EAAevB,gBAC5CvF,KAAKkI,8BACLnD,EACA,sBAGJ,OACEoF,EAAMnC,qBAAuBhI,KAAKgI,oBAClCmC,EAAMtC,oBAAsB7H,KAAK6H,mBACjCsC,EAAMrC,iBAAmB9H,KAAK8H,gBAC9BqC,EAAMpC,+BAAiC/H,KAAK+H,8BAC5CoC,EAAMjC,gCAAkClI,KAAKkI,8BAEtClI,KAEFA,KAAKqK,mBAAmBF,EACjC,EAMAG,UAAW,WACT,YAAwBnK,IAApBH,KAAKgK,YAA2D,IAA/BhK,KAAKiI,eAAexG,OAAqBzB,KAEvEA,KAAKqK,mBAAmB,CAC7BL,gBAAY7J,EACZ8H,eAAgB,IAEpB,EAOAsC,SAAU,SAAkB3G,GAC1B,OAAIA,IAAU5D,KAAK4D,MAAc5D,KAE1BA,KAAKqK,mBAAmB,CAC7BzG,MAAOA,GAEX,EAOA4G,SAAU,SAAkBC,GAC1B,OAAIA,IAAazK,KAAK0K,MAAc1K,KAE7BA,KAAKqK,mBAAmB,CAC7BK,MAAOD,GAEX,EAOAE,QAAS,SAAiBC,GACxB,OAAIA,IAAY5K,KAAK6K,KAAa7K,KAE3BA,KAAKqK,mBAAmB,CAC7BQ,KAAMD,GAEV,EAQAE,UAAW,SAAmBpD,GAC5B,OAAO1H,KAAKqK,mBAAmB,CAC7B3C,OAAQA,GAEZ,EAQAqD,qBAAsB,SAA8BrD,GAClD,OAAO1H,KAAKqK,mBAAmB,CAC7B1C,kBAAmBD,GAEvB,EAQAsD,eAAgB,SAAwBnK,GACtC,OAAIb,KAAKiL,cAAgBpK,EAAUb,KAE5BA,KAAKqK,mBAAmB,CAC7BY,YAAapK,GAEjB,EAQAqK,iBAAkB,SAA0BC,GAC1C,OAAInL,KAAKmL,gBAAkBA,EAAsBnL,KAE1CA,KAAKqK,mBAAmB,CAC7Bc,cAAeA,GAEnB,EAkBAC,qBAAsB,SAASrG,EAAWmE,EAAU1D,GAClD,IAAIR,EAAQ4B,EAAYpB,GAExB,GAAIxF,KAAKqL,iBAAiBtG,EAAWmE,EAAUlE,GAAQ,OAAOhF,KAE9D,IAAIqF,EAAMoB,EAAM,CAAC,EAAGzG,KAAKgI,oBAazB,OAXA3C,EAAIN,GAAa0B,EAAM,CAAC,EAAGpB,EAAIN,IAE3BM,EAAIN,GAAWmE,IAEjB7D,EAAIN,GAAWmE,GAAY7D,EAAIN,GAAWmE,GAAUlH,QAEpDqD,EAAIN,GAAWmE,GAAU5G,KAAK0C,IAE9BK,EAAIN,GAAWmE,GAAY,CAAClE,GAGvBhF,KAAKqK,mBAAmB,CAC7BrC,mBAAoB3C,GAExB,EAMAiG,0BAA2B,SAASC,GAClC,OAAKvL,KAAKwL,mBAAmBD,IAGtBvL,KAAK6H,kBAAkB0D,IAFrB,EAGX,EAMAE,0BAA2B,SAASF,GAClC,OAAKvL,KAAK0L,mBAAmBH,IAGtBvL,KAAK+H,6BAA6BwD,IAFhC,EAGX,EAMA7B,0BAA2B,SAAS6B,GAGlC,OAAOvL,KAAKkI,8BAA8BqD,IAAc,EAC1D,EAMAI,sBAAuB,SAASJ,GAC9B,OAAKvL,KAAKwL,mBAAmBD,IAGtBvL,KAAK8H,eAAeyD,IAFlB,EAGX,EAUAK,wBAAyB,SAAS7G,EAAWmE,EAAU2C,GACrD,YAAmB1L,IAAf0L,EACG7L,KAAKqL,iBAAiBtG,EAAWmE,EAAU2C,GAGzC7L,KAAKqK,mBAAmB,CAC7BrC,mBAAoBhI,KAAKoK,0BAAyB,SAASpF,EAAO7B,GAChE,OACEA,IAAQ4B,GACRC,EAAM8G,KAAO5C,GACbnC,EAAyB/B,EAAM+G,IAAKnF,EAAYiF,GAEpD,MATO7L,UAWaG,IAAb+I,EACJlJ,KAAKqL,iBAAiBtG,EAAWmE,GAC/BlJ,KAAKqK,mBAAmB,CAC7BrC,mBAAoBhI,KAAKoK,0BAAyB,SAASpF,EAAO7B,GAChE,OAAOA,IAAQ4B,GAAaC,EAAM8G,KAAO5C,CAC3C,MAJsDlJ,KAQrDA,KAAKqL,iBAAiBtG,GACpB/E,KAAKqK,mBAAmB,CAC7BrC,mBAAoBhI,KAAKoK,0BAAyB,SAASpF,EAAO7B,GAChE,OAAOA,IAAQ4B,CACjB,MAJ4C/E,IAMhD,EAMAgM,sBAAuB,SAAST,GAC9B,OAAOvL,KAAKgI,mBAAmBuD,IAAc,CAAC,CAChD,EAOAU,qBAAsB,SAASlH,EAAWmE,GACxC,OAAOlJ,KAAKgI,mBAAmBjD,IAAc/E,KAAKgI,mBAAmBjD,GAAWmE,EAClF,EAWAkB,yBAA0B,SAAkCrF,GAC1D,QAAkB5E,IAAd4E,EACF,OAAKJ,EAAc3E,KAAKgI,oBAGjB,CAAC,EAFChI,KAAKgI,mBAGT,GAAyB,iBAAdjD,EAChB,OAAOL,EAAK1E,KAAKgI,mBAAoB,CAACjD,IACjC,GAAyB,mBAAdA,EAA0B,CAC1C,IAAIa,GAAa,EACboC,EAAqBhI,KAAKgI,mBAC1BkE,EAAwBpG,OAAOC,KAAKiC,GAAoBhC,QAAO,SAASC,EAAM9C,GAChF,IAAI8F,EAAYjB,EAAmB7E,GAC/BgJ,EAAe,CAAC,EAkBpB,OAhBAlD,EAAYA,GAAa,CAAC,EAC1BnD,OAAOC,KAAKkD,GAAWb,SAAQ,SAASc,GACtC,IAAIhD,EAAS+C,EAAUC,IAAa,GAChCkD,EAAY,GAChBlG,EAAOkC,SAAQ,SAASpD,GACAD,EAAU,CAACgH,IAAK/G,EAAO8G,GAAI5C,GAAW/F,EAAK,YAC3CiJ,EAAU9J,KAAK0C,EACvC,IACIoH,EAAU3K,SAAWyE,EAAOzE,SAC9BmE,GAAa,GAEfuG,EAAajD,GAAYkD,CAC3B,IAEAnG,EAAK9C,GAAOgJ,EAELlG,CACT,GAAG,CAAC,GAEJ,OAAIL,EAAmBsG,EAChBlM,KAAKgI,kBACd,CACF,EAQAqE,SAAU,SAAkB9C,GAC1B,OAAIvJ,KAAKwL,mBAAmBjC,GACnBvJ,KAGFA,KAAKqK,mBAAmB,CAC7B3C,OAAQ1H,KAAK0H,OAAOtC,OAAO,CAACmE,KAEhC,EAQA+C,oBAAqB,SAA6B/C,GAChD,OAAIvJ,KAAK0L,mBAAmBnC,GACnBvJ,KAGFA,KAAKqK,mBAAmB,CAC7B1C,kBAAmB3H,KAAK2H,kBAAkBvC,OAAO,CAACmE,KAEtD,EASAgD,qBAAsB,SAA8BC,GAClD,GAAIxM,KAAKyM,oBAAoBD,EAAkB7C,MAC7C,MAAM,IAAIhI,MACR,+DAAiE6K,EAAkB7C,KAAO,KAG9F,OAAO3J,KAAKqK,mBAAmB,CAC7BzC,mBAAoB5H,KAAK4H,mBAAmBxC,OAAO,CAACoH,KAExD,EAQAE,mBAAoB,SAA4BnD,EAAOvE,GACrD,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAE1B,OAAIzC,EAAe7B,UAAUjF,KAAK6H,kBAAmB0B,EAAOvE,GAAehF,KAEpEA,KAAKqK,mBAAmB,CAC7BxC,kBAAmBf,EAAejC,cAAc7E,KAAK6H,kBAAmB0B,EAAOvE,IAEnF,EAQA2H,qBAAsB,SAA8BpD,EAAOvE,GACzD,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAE1B,OAAIzC,EAAe7B,UAAUjF,KAAK8H,eAAgByB,EAAOvE,GAAehF,KAEjEA,KAAKqK,mBAAmB,CAC7BvC,eAAgBhB,EAAejC,cAAc7E,KAAK8H,eAAgByB,EAAOvE,IAE7E,EAQA4H,8BAA+B,SAAuCrD,EAAOvE,GAC3E,IAAKhF,KAAK0L,mBAAmBnC,GAC3B,MAAM,IAAI5H,MACR4H,EAAQ,kFAGZ,OAAIzC,EAAe7B,UAAUjF,KAAK+H,6BAA8BwB,EAAOvE,GAAehF,KAE/EA,KAAKqK,mBAAmB,CAC7BtC,6BAA8BjB,EAAejC,cAC3C7E,KAAK+H,6BAA8BwB,EAAOvE,IAEhD,EAMA6H,iBAAkB,SAA0BC,GAC1C,GAAI9M,KAAK+M,aAAaD,GAAM,OAAO9M,KAEnC,IAAIgN,EAAe,CACjB/E,eAAgBjI,KAAKiI,eAAe7C,OAAO0H,IAG7C,OAAO9M,KAAKqK,mBAAmB2C,EACjC,EAQAC,YAAa,SAAqB1D,GAChC,OAAKvJ,KAAKwL,mBAAmBjC,GAItBvJ,KAAK4J,iBAAiBL,GAAOc,mBAAmB,CACrD3C,OAAQ1H,KAAK0H,OAAOtB,QAAO,SAASX,GAClC,OAAOA,IAAM8D,CACf,MANOvJ,IAQX,EAQAkN,uBAAwB,SAAgC3D,GACtD,OAAKvJ,KAAK0L,mBAAmBnC,GAItBvJ,KAAK4J,iBAAiBL,GAAOc,mBAAmB,CACrD1C,kBAAmB3H,KAAK2H,kBAAkBvB,QAAO,SAASX,GACxD,OAAOA,IAAM8D,CACf,MANOvJ,IAQX,EAQAmN,wBAAyB,SAAiC5D,GACxD,OAAKvJ,KAAKyM,oBAAoBlD,GAIvBvJ,KAAK4J,iBAAiBL,GAAOc,mBAAmB,CACrDzC,mBAAoB5H,KAAK4H,mBAAmBxB,QAAO,SAASX,GAC1D,OAAOA,EAAEkE,OAASJ,CACpB,MANOvJ,IAQX,EAUAoN,sBAAuB,SAA+B7D,EAAOvE,GAC3D,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAE1B,OAAKzC,EAAe7B,UAAUjF,KAAK6H,kBAAmB0B,EAAOvE,GAEtDhF,KAAKqK,mBAAmB,CAC7BxC,kBAAmBf,EAAexB,iBAAiBtF,KAAK6H,kBAAmB0B,EAAOvE,KAHRhF,IAK9E,EAQAqN,wBAAyB,SAAiC9D,EAAOvE,GAC/D,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAE1B,OAAKzC,EAAe7B,UAAUjF,KAAK8H,eAAgByB,EAAOvE,GAEnDhF,KAAKqK,mBAAmB,CAC7BvC,eAAgBhB,EAAexB,iBAAiBtF,KAAK8H,eAAgByB,EAAOvE,KAHLhF,IAK3E,EAQAsN,iCAAkC,SAA0C/D,EAAOvE,GACjF,IAAKhF,KAAK0L,mBAAmBnC,GAC3B,MAAM,IAAI5H,MACR4H,EAAQ,kFAEZ,OAAKzC,EAAe7B,UAAUjF,KAAK+H,6BAA8BwB,EAAOvE,GAEjEhF,KAAKqK,mBAAmB,CAC7BtC,6BAA8BjB,EAAexB,iBAC3CtF,KAAK+H,6BAA8BwB,EAAOvE,KAJyChF,IAMzF,EAOAuN,oBAAqB,SAA6BT,GAChD,IAAK9M,KAAK+M,aAAaD,GAAM,OAAO9M,KAEpC,IAAIgN,EAAe,CACjB/E,eAAgBjI,KAAKiI,eAAe7B,QAAO,SAASoH,GAClD,OAAOA,IAAMV,CACf,KAGF,OAAO9M,KAAKqK,mBAAmB2C,EACjC,EAUAtH,iBAAkB,SAA0B6D,EAAOvE,GACjD,OAAOhF,KAAKyN,sBAAsBlE,EAAOvE,EAC3C,EASAyI,sBAAuB,SAA+BlE,EAAOvE,GAC3D,GAAIhF,KAAKyM,oBAAoBlD,GAC3B,OAAOvJ,KAAK6J,kCAAkCN,EAAOvE,GAChD,GAAIhF,KAAKwL,mBAAmBjC,GACjC,OAAOvJ,KAAK0N,iCAAiCnE,EAAOvE,GAC/C,GAAIhF,KAAK0L,mBAAmBnC,GACjC,OAAOvJ,KAAK2N,iCAAiCpE,EAAOvE,GAGtD,MAAM,IAAIrD,MAAM,sCAAwC4H,EACtD,6FACJ,EAQAmE,iCAAkC,SAA0CnE,EAAOvE,GACjF,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAG1B,OAAOvJ,KAAKqK,mBAAmB,CAC7BxC,kBAAmBf,EAAepB,iBAAiB1F,KAAK6H,kBAAmB0B,EAAOvE,IAEtF,EAQA4I,6BAA8B,SAAsCrE,EAAOvE,GACzE,IAAKhF,KAAKwL,mBAAmBjC,GAC3B,MAAM,IAAI5H,MAAM4H,EAAQ,uEAG1B,OAAOvJ,KAAKqK,mBAAmB,CAC7BvC,eAAgBhB,EAAepB,iBAAiB1F,KAAK8H,eAAgByB,EAAOvE,IAEhF,EAQA2I,iCAAkC,SAA0CpE,EAAOvE,GACjF,IAAKhF,KAAK0L,mBAAmBnC,GAC3B,MAAM,IAAI5H,MACR4H,EAAQ,kFAGZ,OAAOvJ,KAAKqK,mBAAmB,CAC7BtC,6BAA8BjB,EAAepB,iBAC3C1F,KAAK+H,6BAA8BwB,EAAOvE,IAEhD,EAQA6E,kCAAmC,SAA2CN,EAAOvE,GACnF,IAAKhF,KAAKyM,oBAAoBlD,GAC5B,MAAM,IAAI5H,MACR4H,EAAQ,mFAGZ,IAAIsE,EAAY7N,KAAK8N,+BAA+B9N,KAAK+N,2BAA2BxE,IAEhFlE,EAAM,CAAC,EAyBX,YAvByElF,IAA9CH,KAAKkI,8BAA8BqB,IAC5DvJ,KAAKkI,8BAA8BqB,GAAO9H,OAAS,IAGnDzB,KAAKkI,8BAA8BqB,GAAO,KAAOvE,GAK2B,IAA5EhF,KAAKkI,8BAA8BqB,GAAO,GAAG/C,QAAQxB,EAAQ6I,KAI3B,IAA9B7I,EAAMwB,QAAQqH,GAEhBxI,EAAIkE,GAAS,GAEblE,EAAIkE,GAAS,CAACvE,EAAMhD,MAAM,EAAGgD,EAAMgJ,YAAYH,KAGjDxI,EAAIkE,GAAS,CAACvE,GAGThF,KAAKqK,mBAAmB,CAC7BnC,8BAA+BzD,EAAa,CAAC,EAAGY,EAAKrF,KAAKkI,gCAE9D,EASA+F,+BAAgC,SAAS1E,EAAO2E,GAC9C,GAAIlO,KAAKmO,2BAA2B5E,GAClC,MAAM,IAAI5H,MAAM4H,EAAQ,wBAE1B,IAAKvJ,KAAKyM,oBAAoBlD,GAC5B,MAAM,IAAI5H,MAAM4H,EAAQ,oFAE1B,IAAIlE,EAAM,CAAC,EAEX,OADAA,EAAIkE,GAAS,CAAC2E,GACPlO,KAAKqK,mBAAmB,CAC7BnC,8BAA+BzD,EAAa,CAAC,EAAGY,EAAKrF,KAAKkI,gCAE9D,EAQAkG,kCAAmC,SAAS7E,GAC1C,IAAKvJ,KAAKmO,2BAA2B5E,GACnC,OAAOvJ,KAET,IAAIqF,EAAM,CAAC,EAEX,OADAA,EAAIkE,GAAS,GACNvJ,KAAKqK,mBAAmB,CAC7BnC,8BAA+BzD,EAAa,CAAC,EAAGY,EAAKrF,KAAKkI,gCAE9D,EAOAmG,oBAAqB,SAA6BvB,GAChD,OAAI9M,KAAK+M,aAAaD,GACb9M,KAAKuN,oBAAoBT,GAG3B9M,KAAK6M,iBAAiBC,EAC/B,EAOApB,mBAAoB,SAASnC,GAC3B,OAAOvJ,KAAK2H,kBAAkBnB,QAAQ+C,IAAU,CAClD,EAOAkD,oBAAqB,SAASlB,GAC5B,YAAsDpL,IAA/CH,KAAK+N,2BAA2BxC,EACzC,EAOAC,mBAAoB,SAASjC,GAC3B,OAAOvJ,KAAK0H,OAAOlB,QAAQ+C,IAAU,CACvC,EAUA+E,eAAgB,SAAwB/E,EAAOvE,GAC7C,QAAKhF,KAAKwL,mBAAmBjC,IAGtBzC,EAAe7B,UAAUjF,KAAK6H,kBAAmB0B,EAAOvE,EACjE,EAWAuJ,iBAAkB,SAA0BhF,EAAOvE,GACjD,QAAKhF,KAAKwL,mBAAmBjC,IAGtBzC,EAAe7B,UAAUjF,KAAK8H,eAAgByB,EAAOvE,EAC9D,EAUAwJ,0BAA2B,SAAmCjF,EAAOvE,GACnE,QAAKhF,KAAK0L,mBAAmBnC,IAGtBzC,EAAe7B,UAAUjF,KAAK+H,6BAA8BwB,EAAOvE,EAC5E,EAUAmJ,2BAA4B,SAAoC5E,EAAOvE,GACrE,IAAKhF,KAAKyM,oBAAoBlD,GAC5B,OAAO,EAGT,IAAIkF,EAAczO,KAAK0J,0BAA0BH,GAEjD,OAAKvE,GAIkC,IAAhCyJ,EAAYjI,QAAQxB,GAHlByJ,EAAYhN,OAAS,CAIhC,EAWA4J,iBAAkB,SAA0BtG,EAAWmE,EAAUlE,GAC/D,QAAc7E,IAAV6E,QAAoC7E,IAAb+I,EACzB,QAASlJ,KAAKgI,mBAAmBjD,GAGnC,IAAI2J,EACF1O,KAAKgI,mBAAmBjD,SACyB5E,IAAjDH,KAAKgI,mBAAmBjD,GAAWmE,GAErC,QAAc/I,IAAV6E,IAAwB0J,EAC1B,OAAOA,EAGT,IAjrCeC,EAAOC,EAirClBhG,EAAchC,EAAY5B,GAC1B6J,OAEF1O,KAprCawO,EAmrCH3O,KAAKgI,mBAAmBjD,GAAWmE,GAnrCzB0F,EAmrCoChG,EAlrCrDjC,EAAKgI,GAAO,SAASG,GAC1B,OAAO/H,EAAyB+H,EAAcF,EAChD,KAmrCE,OAAOF,GAAqBG,CAC9B,EAOA9B,aAAc,SAAsBD,GAClC,OAA6C,IAAtC9M,KAAKiI,eAAezB,QAAQsG,EACrC,EAQAiC,4BAA6B,WAC3B,IAAI5G,EAAOnI,KAGPgP,EAAkCtI,EACpCZ,OAAOC,KAAK/F,KAAKgI,oBAAoB5B,QAAO,SAASmD,GACnD,OAAOzD,OAAOC,KAAKoC,EAAKH,mBAAmBuB,IAAQ9H,OAAS,CAC9D,IACAzB,KAAK2H,mBAGP,OAAO7B,OAAOC,KAAK/F,KAAK+H,8BAA8B3B,QAAO,SAASmD,GACpE,OAAOpB,EAAKJ,6BAA6BwB,GAAO9H,OAAS,CAC3D,IACG2D,OAAO4J,GACP5J,OAAOpF,KAAKiP,+BACjB,EAQAA,6BAA8B,WAC5B,IAAI9G,EAAOnI,KACX,OAAO0G,EAGL1G,KAAK4H,mBAAmBmB,KAAI,SAASQ,GAAS,OAAOA,EAAMI,IAAM,IACjE7D,OAAOC,KAAK/F,KAAKkI,+BAA+B9B,QAAO,SAASmD,GAC9D,OAAOpB,EAAKD,8BAA8BqB,GAAO9H,OAAS,CAC5D,IAEJ,EAMAyN,8BAA+B,WAC7B,IAAIC,EAAgBnP,KAAK+O,8BAEzB,OAAO/O,KAAK2H,kBAAkBvB,QAAO,SAASX,GAC5C,OAAqC,IAA9B0J,EAAc3I,QAAQf,EAC/B,GACF,EAEA2J,kBAAmB,CACjB,QAEA,SACA,oBACA,oBACA,qBACA,iBAEA,+BACA,qBACA,iBACA,iCAEFC,eAAgB,WACd,IAAID,EAAoBpP,KAAKoP,kBAEzBE,EAAc,CAAC,EAEfnH,EAAOnI,KAQX,OAPA8F,OAAOC,KAAK/F,MAAMoI,SAAQ,SAASC,GACjC,IAAIwD,EAAa1D,EAAKE,IACwB,IAA1C+G,EAAkB5I,QAAQ6B,SAAoClI,IAAf0L,IACjDyD,EAAYjH,GAAawD,EAE7B,IAEOyD,CACT,EAWAC,kBAAmB,SAAsBC,EAAWxK,GAClD,GAAIhF,KAAKwP,KAAexK,EAAO,OAAOhF,KAEtC,IAAIgN,EAAe,CAAC,EAIpB,OAFAA,EAAawC,GAAaxK,EAEnBhF,KAAKqK,mBAAmB2C,EACjC,EAOA3C,mBAAoB,SAA4B/C,GAC9C,IAAKA,EAAQ,OAAOtH,KAEpB,IAAIwB,EAAQgC,EAAiBsG,SAAS9J,KAAMsH,GAE5C,GAAI9F,EACF,MAAMA,EAGR,IAAI2G,EAAOnI,KACPyP,EAAkBjM,EAAiB+D,cAAcD,GACjDoI,EAAsB5J,OAAOC,KAAK/F,MAAMgG,QAAO,SAAS2J,EAAKxM,GAE/D,OADAwM,EAAIxM,GAAOgF,EAAKhF,GACTwM,CACT,GAAG,CAAC,GAEAC,EAAkB9J,OAAOC,KAAK0J,GAAiBzJ,QACjD,SAAS6J,EAAU1M,GACjB,IAAI2M,OAA2C3P,IAAlB0P,EAAS1M,GAClC4M,OAA8C5P,IAAzBsP,EAAgBtM,GAEzC,OAAI2M,IAA2BC,EACtBrL,EAAKmL,EAAU,CAAC1M,KAGrB4M,IACFF,EAAS1M,GAAOsM,EAAgBtM,IAG3B0M,EACT,GACAH,GAGF,OAAO,IAAI1P,KAAKkK,YAAY0F,EAC9B,EAQAI,UAAW,WACT,YAAkB7P,IAAdH,KAAK6K,KACA7K,KAGFA,KAAK2K,QAAQ,EACtB,EAOAsF,4BAA6B,SAASzD,GACpC,OAAOA,EAAkB0D,QAAU,CAAC,iBAAkB,WACxD,EAQApC,+BAAgC,SAAStB,GACvC,OAAOA,EAAkBqB,WAAa,KACxC,EAQAsC,yBAA0B,SAAS3D,GACjC,OAAOA,EAAkBhD,UAAY,IACvC,EAQA4G,gCAAiC,SAAS5D,GACxC,MAAiD,kBAAtCA,EAAkB6D,iBACpB7D,EAAkB6D,eAG7B,EAOAtC,2BAA4B,SAASuC,GACnC,OAAO3J,EACL3G,KAAK4H,oBACL,SAASnC,GACP,OAAOA,EAAEkE,OAAS2G,CACpB,GAEJ,EAOAC,+BAAgC,SAAShF,GACvC,IAAKvL,KAAKyM,oBAAoBlB,GAC5B,MAAO,GAGT,IAAIiF,EAAaxQ,KAAK0J,0BAA0B6B,GAAW,GAC3D,IAAKiF,EAAY,MAAO,GAExB,IAAI3C,EAAY7N,KAAK8N,+BACnB9N,KAAK+N,2BAA2BxC,IAGlC,OADWiF,EAAWC,MAAM5C,GAChB9E,KAAI,SAAS2H,GACvB,OAAOA,EAAKC,MACd,GACF,EAEAC,SAAU,WACR,OAAOC,KAAKC,UAAU9Q,KAAM,KAAM,EACpC,GAYFQ,EAAOC,QAAU+C,oCCn+CjBhD,EAAOC,QASP,SAAuBsQ,GACrB,OAAO,SAAkBC,EAAyBC,GAChD,IAAIzE,EAAoBuE,EAAMnJ,mBAAmBqJ,GAC7CC,EACDH,EAAM7I,8BAA8BsE,EAAkB7C,OACrDoH,EAAM7I,8BAA8BsE,EAAkB7C,MAAM,IAC9D,GACEwH,EAAwBJ,EAAMjD,+BAChCtB,GAEE4E,EAAuBL,EAAMZ,yBAC/B3D,GAEE6E,EAA8BN,EAAMX,gCACtC5D,GAEE0D,EAASoB,EACXP,EAAMd,4BAA4BzD,IAGhC+E,EAAiBP,EAAwB7J,OAAM,SAASqK,GAC1D,OAAOA,EAAYC,UACrB,IAEIC,EA4BR,SACExB,EACAiB,EACAC,EACAC,EACA5H,GAEA,OAAO,SACLkI,EACAX,EACAY,GAEA,IAAIC,EAASF,EAEb,GAAIC,EAA2B,EAAG,CAChC,IAAIE,EAAQ,EAIZ,IAFAD,EAASF,EAEFG,EAAQF,GAA0B,CAIvC,IAAIG,EAAOF,GAAU9P,MAAMmF,QAAQ2K,EAAOE,MAAQF,EAAOE,KAAO,GAChEF,EAASlL,EAAKoL,GAAM,SAASC,GAC3B,OAAOA,EAAQ/M,SACjB,IACA6M,GACF,CACF,CAGA,GAAID,EAAQ,CAYV,IAAII,EAASnM,OAAOC,KAAKiL,EAAwBe,MAC9ChJ,KAAI,SAASmJ,GACZ,MAAO,CAACA,EAAYlB,EAAwBe,KAAKG,GACnD,IACC9L,QAAO,SAAS+L,GAEf,OAgCV,SACED,EACAE,EACA3I,EACA0H,EACAC,EACAC,GAGA,GACED,IAC8C,IAA7Cc,EAAW1L,QAAQ4K,IAClBA,IAAyBc,GAE3B,OAAO,EAIT,OACId,IAC+C,IAA/Cc,EAAW1L,QAAQ2K,IAEpBC,GACCc,EAAWzB,MAAMU,GAAuB1P,OACtC2P,EAAqBX,MAAMU,GAAuB1P,QAClD,IAG4C,IAA/CyQ,EAAW1L,QAAQ2K,KACoC,IAAtD1H,EAAkBjD,QAAQ2K,IAEc,IAA1C1H,EAAkBjD,QAAQ0L,IAEkC,IAA3DA,EAAW1L,QAAQ4L,EAAajB,KAC9BE,GAC2C,IAA1Ca,EAAW1L,QAAQiD,GAE3B,CArEiB4I,CADUF,EAAM,GAGrBN,EAAO3D,MAAQkD,EACf3H,EACA0H,EACAC,EACAC,EAEJ,IAEFQ,EAAOE,KAAOO,EACZL,EAAOlJ,KAAI,SAASoJ,GAClB,IAAID,EAAaC,EAAM,GAGvB,OAwDV,SACEI,EACAL,EACAf,EACA1H,EACAgI,GAEA,IAAIe,EAAQN,EAAWzB,MAAMU,GAC7B,MAAO,CACLxH,KAAM6I,EAAMA,EAAM/Q,OAAS,GAAGkP,OAC9BzC,KAAMgE,EACNO,aAAcC,EAAiBR,GAC/BS,MAAOJ,EACPtN,UACEwE,IAAsByI,GAC4C,IAAlEzI,EAAkBjD,QAAQ0L,EAAaf,GACzCM,WAAYA,EACZM,KAAM,KAEV,CA3EiBa,CAFUT,EAAM,GAIrBD,EACAf,EACA0B,EAAmBpJ,GACnBuH,EAAwBS,WAE5B,IACAvB,EAAO,GACPA,EAAO,GAEX,CAEA,OAAOyB,CACT,CACF,CA5GyBmB,CACnB5C,EACAiB,EACAC,EACAC,EACAH,GAGE6B,EAAU/B,EAQd,OANII,IACF2B,EAAU/B,EAAwBhP,MAChCoP,EAAqBX,MAAMU,GAAuB1P,SAI/CsR,EAAQ/M,OAAO0L,EAAgB,CACpC/H,KAAMoH,EAAMnJ,mBAAmBqJ,GAAwBtH,KACvDgJ,MAAO,KACP1N,WAAW,EACXiJ,KAAM,KACNuE,aAAc,KACdhB,WAAYF,EACZQ,KAAM,MAEV,CACF,EAzDA,IAAIO,EAAU,EAAQ,MAClB3L,EAAO,EAAQ,MACf2K,EAAiC,EAAQ,MACzC0B,EAAK,EAAQ,MACbN,EAAmBM,EAAGN,iBACtBG,EAAqBG,EAAGH,sDCP5B,IAAIpM,EAAQ,EAAQ,KAChBhC,EAAe,EAAQ,MACvB6N,EAAU,EAAQ,MAClBW,EAAU,EAAQ,MAClBtM,EAAO,EAAQ,MACfuM,EAAY,EAAQ,MACpBC,EAAa,EAAQ,MACrBH,EAAK,EAAQ,MACbN,EAAmBM,EAAGN,iBACtBG,EAAqBG,EAAGH,mBAExBC,EAA2B,EAAQ,KA8CvC,SAASM,EAAWC,GAClB,IAAIC,EAAU,CAAC,EAMf,OAJAD,EAAWjL,SAAQ,SAAS2D,EAAKwH,GAC/BD,EAAQvH,GAAOwH,CACjB,IAEOD,CACT,CAEA,SAASE,EAAiBC,EAAMC,EAAYvQ,GACtCuQ,GAAcA,EAAWvQ,KAC3BsQ,EAAKE,MAAQD,EAAWvQ,GAE5B,CA4JA,SAASM,EAAcsN,EAAOgC,EAASa,GACrC,IAAIC,EAAkBd,EAAQ,GAE9B/S,KAAK8T,YAAcf,EAEnB,IAAI5K,EAAOnI,KAGX8F,OAAOC,KAAK8N,GAAiBzL,SAAQ,SAASjF,GAC5CgF,EAAKhF,GAAO0Q,EAAgB1Q,EAC9B,IAGA2C,OAAOC,KAAK6N,GAAW,CAAC,GAAGxL,SAAQ,SAASjF,GAC1CgF,EAAKhF,GAAOyQ,EAAQzQ,EACtB,IA2IAnD,KAAK+T,iBAAmBhB,EAAQ/M,QAAO,SAASgO,EAAKC,GACnD,YAAmC9T,IAA5B8T,EAAOF,iBACVC,EACAA,EAAMC,EAAOF,gBACnB,GAAG,GAMH/T,KAAK2H,kBAAoB,GAKzB3H,KAAK4H,mBAAqBmJ,EAAMnJ,mBAAmBmB,KAAI,WACrD,MAAO,EACT,IAKA/I,KAAK0H,OAAS,GAEd,IAAIC,EAAoBoJ,EAAMhC,8BAE1BmF,EAAgBd,EAAWrC,EAAMrJ,QACjCyM,EAA2Bf,EAAWrC,EAAMpJ,mBAC5CyM,EAAwB,EAKxBC,EAAaR,EAAgBnM,QAAU,CAAC,EAE5C5B,OAAOC,KAAKsO,GAAYjM,SAAQ,SAASkM,GACvC,IA7UF1M,EACA2M,EA4UMC,EAAmBH,EAAWC,GAE9B9H,GA/UN5E,EAgVImJ,EAAMnJ,mBA/UV2M,EAgVID,EA9UG3N,EAAKiB,GAAoB,SAC9B4E,GAGA,OADiBA,EAAkB6G,YAAc,IAC/B7M,QAAQ+N,IAA8B,CAC1D,KA4UE,GAAI/H,EAAmB,CAGrB,IAAIiI,EAAajI,EAAkB6G,WAAW7M,QAAQ8N,GAClDI,EAAmBxB,EAAUnC,EAAMnJ,oBAAoB,SAASnC,GAClE,OAAOA,EAAEkE,OAAS6C,EAAkB7C,IACtC,IACAxB,EAAKP,mBAAmB8M,GAAkBD,GAAc,CACtD1P,UAAWuP,EACXvC,KAAMyC,EACN/C,WAAYoC,EAAgBc,sBAEhC,KAAO,CACL,IAEI3R,EAFA4R,GAAoE,IAA/C7D,EAAMpJ,kBAAkBnB,QAAQ8N,GACrDO,GAAyD,IAApC9D,EAAMrJ,OAAOlB,QAAQ8N,GAG1CM,IACF5R,EAAWmR,EAAyBG,GACpCnM,EAAKR,kBAAkB3E,GAAY,CACjC2G,KAAM2K,EACNvC,KAAMyC,EACN/C,WAAYoC,EAAgBc,uBAE9BnB,EAAiBrL,EAAKR,kBAAkB3E,GAAW6Q,EAAgBiB,aAAcR,IAE/EO,IACF7R,EAAWkR,EAAcI,GACzBnM,EAAKT,OAAO1E,GAAY,CACtB2G,KAAM2K,EACNvC,KAAMyC,EACN/C,WAAYoC,EAAgBc,uBAE9BnB,EAAiBrL,EAAKT,OAAO1E,GAAW6Q,EAAgBiB,aAAcR,GAE1E,CACF,IAGAtU,KAAK4H,mBAAqBqL,EAAQjT,KAAK4H,oBAGvCD,EAAkBS,SAAQ,SAAS2M,GACjC,IAAId,EAASlB,EAAQqB,GACjB1M,EAASuM,GAAUA,EAAOvM,OAASuM,EAAOvM,OAAS,CAAC,EACpD8E,EAAoBuE,EAAMhD,2BAA2BgH,GAGzDjP,OAAOC,KAAK2B,GAAQU,SAAQ,SAAS4M,GACnC,IAEIhS,EAFAiS,EAAevN,EAAOsN,GAI1B,GAAIxI,EAAmB,CACrBxJ,EAAWkQ,EAAUnC,EAAMnJ,oBAAoB,SAASnC,GACtD,OAAOA,EAAEkE,OAAS6C,EAAkB7C,IACtC,IACA,IAAIuL,EAAiBhC,EAAU/K,EAAKP,mBAAmB5E,IAAW,SAASyC,GACzE,OAAOA,EAAEV,YAAciQ,CACzB,IAGA,IAAwB,IAApBE,EACF,OAGF/M,EAAKP,mBAAmB5E,GAAUkS,GAAgBnD,KAAOtL,EACvD,CAAC,EACD0B,EAAKP,mBAAmB5E,GAAUkS,GAAgBnD,KAClDkD,EAEJ,KAAO,CACLjS,EAAWmR,EAAyBa,GAEpC,IAAIG,EAAsBtB,EAAgBnM,QAAUmM,EAAgBnM,OAAOsN,IAAW,CAAC,EAEvF7M,EAAKR,kBAAkB3E,GAAY,CACjC2G,KAAMqL,EACNjD,KAAMtN,EAAa,CAAC,EAAGwQ,EAAcE,GACrC1D,WAAYwC,EAAOU,uBAErBnB,EAAiBrL,EAAKR,kBAAkB3E,GAAWiR,EAAOa,aAAcE,GAEpEjE,EAAMhJ,6BAA6BiN,IACrCjE,EAAMhJ,6BAA6BiN,GAAQ5M,SAAQ,SAAS/B,IAErD8B,EAAKR,kBAAkB3E,GAAU+O,KAAK1L,IACzC0K,EAAMhJ,6BAA6BiN,GAAQxO,QAAQqM,EAAmBxM,KAAqB,IAC3F8B,EAAKR,kBAAkB3E,GAAU+O,KAAK1L,GAAmB,EAE7D,GAEJ,CACF,IACA+N,GACF,IAGArD,EAAM9B,+BAA+B7G,SAAQ,SAASgN,GACpD,IAAI5I,EAAoBuE,EAAMhD,2BAA2BqH,GACrDvH,EAAYkD,EAAMjD,+BAA+BtB,GAEjD/C,EAAoBsH,EAAMrH,0BAA0B0L,GAGvB,IAA7B3L,EAAkBhI,QAAgBgI,EAAkB,GAAGgH,MAAM5C,GAAWpM,OAAS,GAIrFsR,EAAQ/Q,MAAMoS,GAAuBhM,SAAQ,SAAS6L,GACpD,IAAIvM,EAASuM,GAAUA,EAAOvM,OAC1BuM,EAAOvM,OACP,CAAC,EAEL5B,OAAOC,KAAK2B,GAAQU,SAAQ,SAAS4M,GACnC,IAAIC,EAAevN,EAAOsN,GACtBhS,EAAWkQ,EAAUnC,EAAMnJ,oBAAoB,SAASnC,GAC1D,OAAOA,EAAEkE,OAAS6C,EAAkB7C,IACtC,IACIuL,EAAiBhC,EAAU/K,EAAKP,mBAAmB5E,IAAW,SAASyC,GACzE,OAAOA,EAAEV,YAAciQ,CACzB,IAGA,IAAwB,IAApBE,EAAJ,CAYA,IAAIG,EAAc,CAAC,EAEnB,GAAI5L,EAAkBhI,OAAS,EAAG,CAChC,IAAI6T,EAAO7L,EAAkB,GAAGgH,MAAM5C,GAAW,GACjDwH,EAAYC,GAAQnN,EAAKP,mBAAmB5E,GAAUkS,GAAgBnD,KAAKuD,EAC7E,CAEAnN,EAAKP,mBAAmB5E,GAAUkS,GAAgBnD,KAAOtN,EACvD4Q,EACAJ,EACA9M,EAAKP,mBAAmB5E,GAAUkS,GAAgBnD,KApBpD,CAsBF,IAEAqC,GACF,GACF,IAGAtO,OAAOC,KAAKgL,EAAMjJ,gBAAgBM,SAAQ,SAASmD,GACjD,IAAIgK,EAAWxE,EAAMjJ,eAAeyD,GAChCvI,EAAWkR,EAAc3I,GAE7BpD,EAAKT,OAAO1E,GAAY,CACtB2G,KAAM4B,EACNwG,KAAM8B,EAAgBnM,OAAO6D,GAC7BkG,WAAYoC,EAAgBc,uBAE9BY,EAASnN,SAAQ,SAAS8J,GACxB/J,EAAKT,OAAO1E,GAAYmF,EAAKT,OAAO1E,IAAa,CAAC2G,KAAM4B,GACxDpD,EAAKT,OAAO1E,GAAU+O,KAAO5J,EAAKT,OAAO1E,GAAU+O,MAAQ,CAAC,EAC5D5J,EAAKT,OAAO1E,GAAU+O,KAAKG,GAAc,CAC3C,GACF,IAKAlS,KAAK4H,mBAAqB5H,KAAK4H,mBAAmBmB,IAAI+J,EAAyB/B,IAK/E/Q,KAAK0H,OAASuL,EAAQjT,KAAK0H,QAI3B1H,KAAK2H,kBAAoBsL,EAAQjT,KAAK2H,mBAEtC3H,KAAKwV,OAASzE,CAChB,CAyBA,SAAS0E,EAA6B1C,EAAShO,GAC7C,SAAS2Q,EAAUnM,GACjB,OAAOA,EAAMI,OAAS5E,CACxB,CAEA,GAAIgO,EAAQyC,OAAOhK,mBAAmBzG,GAAY,CAChD,IAAIwE,EAAQ5C,EAAKoM,EAAQrL,OAAQgO,GACjC,OAAKnM,EAEEzD,OAAOC,KAAKwD,EAAMwI,MAAMhJ,KAAI,SAASY,GAC1C,IAAI3E,EAAQ0N,EAAiB/I,GAC7B,MAAO,CACLA,KAAMA,EACN8I,aAAczN,EACd2N,MAAOpJ,EAAMwI,KAAKpI,GAClB1E,UAAW8N,EAAQyC,OAAOlH,eAAevJ,EAAWC,GACpD2Q,WAAY5C,EAAQyC,OAAOjH,iBAAiBxJ,EAAW4E,GAE3D,IAXmB,EAYrB,CAAO,GAAIoJ,EAAQyC,OAAO9J,mBAAmB3G,GAAY,CACvD,IAAIgQ,EAAmBpO,EAAKoM,EAAQpL,kBAAmB+N,GACvD,OAAKX,EAEEjP,OAAOC,KAAKgP,EAAiBhD,MAAMhJ,KAAI,SAASY,GACrD,IAAI3E,EAAQ0N,EAAiB/I,GAC7B,MAAO,CACLA,KAAMA,EACN8I,aAAczN,EACd2N,MAAOoC,EAAiBhD,KAAKpI,GAC7B1E,UAAW8N,EAAQyC,OAAOhH,0BAA0BzJ,EAAWC,GAEnE,IAV8B,EAWhC,CAAO,GAAI+N,EAAQyC,OAAO/I,oBAAoB1H,GAAY,CACxD,IAAI6Q,EAA0BjP,EAAKoM,EAAQnL,mBAAoB8N,GAC/D,IAAKE,EAAyB,OAAOA,EAErC,IAAIpJ,EAAoBuG,EAAQyC,OAAOzH,2BAA2BhJ,GAC9D8Q,EAAyBhD,EAC3BE,EAAQyC,OAAO9L,0BAA0B3E,GAAW,IAAM,IAC1D0L,MAAMsC,EAAQyC,OAAO1H,+BAA+BtB,IAKtD,OAJAqJ,EAAuBC,QAAQ/Q,GAE/BgR,EAAaH,EAAyBC,EAAwB,GAEvDD,CACT,CACF,CAQA,SAASG,EAAaC,EAAMvM,EAAmBwM,GAC7CD,EAAK/Q,UAAY+Q,EAAKrM,OAASF,EAAkBwM,GAC7CD,EAAKjE,MACPiE,EAAKjE,KAAK3J,SAAQ,SAAS8N,GACzBH,EAAaG,EAAOzM,EAAmBwM,EAAQ,EACjD,GAEJ,CAUA,SAASE,EAAQC,EAAQC,EAAMC,EAAOxE,GAGpC,GAFAA,EAAQA,GAAS,EAEb/P,MAAMmF,QAAQmP,GAChB,OAAOD,EAAOC,EAAMC,EAAMxE,IAG5B,IAAKuE,EAAKtE,MAA6B,IAArBsE,EAAKtE,KAAKtQ,OAC1B,OAAO4U,EAGT,IAAIE,EAAWF,EAAKtE,KAAKhJ,KAAI,SAASyN,GACpC,OAAOL,EAAQC,EAAQI,EAAWF,EAAOxE,EAAQ,EACnD,IACI2E,EAAiBL,EAAOG,EAAUD,EAAMxE,IAE5C,OADcrN,EAAa,CAACsN,KAAM0E,GAAiBJ,EAErD,CAkMA,SAASK,EAAyBvQ,EAAWoF,GAC3C,IAAIwG,EAAOpL,EAAKR,GAAW,SAASoD,GAClC,OAAOA,EAAMI,OAAS4B,CACxB,IACA,OAAOwG,GAAQA,EAAK4B,KACtB,CAgFA,SAASgD,EAAc5F,EAAO9P,EAAM2V,EAAejN,EAAMkN,GACvD,IAAItN,EAAQ5C,EAAKkQ,GAAe,SAASpR,GACvC,OAAOA,EAAEkE,OAASiN,CACpB,IACIjE,EAAQpJ,GAASA,EAAMwI,MAAQxI,EAAMwI,KAAKpI,GAAQJ,EAAMwI,KAAKpI,GAAQ,EACrE8H,EAAclI,GAASA,EAAMkI,aAAe,EAEhD,MAAO,CACLxQ,KAAMA,EACN2V,cAAeA,EACfjN,KAAMA,EACNgJ,MAAOA,EACPlB,WAAYA,EAEhB,CA9YAhO,EAAc/C,UAAUoW,eAAiB,SAASnN,GAChD,SAAS+L,EAAUnM,GACjB,OAAOA,EAAMI,OAASA,CACxB,CAEA,OAAOhD,EAAK3G,KAAK0H,OAAQgO,IACvB/O,EAAK3G,KAAK2H,kBAAmB+N,IAC7B/O,EAAK3G,KAAK4H,mBAAoB8N,EAClC,EAmGAjS,EAAcsT,aAAe,CAAC,iBAAkB,aAAc,YA4H9DtT,EAAc/C,UAAUsW,eAAiB,SAASjS,EAAWlB,GAC3D,IAAIoT,EAAcxB,EAA6BzV,KAAM+E,GACrD,GAAKkS,EAAL,CAIA,IAQI5D,EARAO,EAAUnP,EAAa,CAAC,EAAGZ,EAAM,CACnCqM,OAAQzM,EAAcsT,aAGtBG,gBAAiBrT,GAAQA,EAAKqM,UAG5B6C,EAAU/S,KAEd,GAAI+B,MAAMmF,QAAQ+P,GAChB5D,EAAa,CAACtO,QAGdsO,EADaN,EAAQyC,OAAOzH,2BAA2BkJ,EAAYtN,MAC/C0J,WAGtB,OAAO8C,GAAQ,SAASpE,EAAMxG,GAC5B,GAAIqI,EAAQsD,cAAe,CACzB,IAAIA,EAjFV,SAA0BnE,EAAShO,GACjC,OACEgO,EAAQoE,kBACRpE,EAAQoE,iBAAiBD,eACzBnE,EAAQoE,iBAAiBD,cAAchR,QACvC6M,EAAQoE,iBAAiBD,cAAchR,OAAOnB,EAElD,CA0E0BqS,CAAiBrE,EAASxH,GAC9C,GAAI8L,QAAQH,GACV,OAnIR,SAA8BD,EAAaC,GACzC,IAAII,EAAgB,GAChBC,EAAkB,GAOlBC,GALQN,EAAcO,OAAS,IAKVzR,QAAO,SAAS2J,EAAKhG,EAAMrI,GAElD,OADAqO,EAAIhG,GAAQrI,EACLqO,CACT,GAAG,CAAC,GAEJsH,EAAY7O,SAAQ,SAAS4N,GAE3B,IAAIrM,EAAOqM,EAAK9H,MAAQ8H,EAAKrM,UACFxJ,IAAvBqX,EAAa7N,GACf2N,EAAcE,EAAa7N,IAASqM,EAEpCuB,EAAgBjV,KAAK0T,EAEzB,IAEAsB,EAAgBA,EAAclR,QAAO,SAASmD,GAC5C,OAAOA,CACT,IAEA,IACImO,EADAC,EAAkBT,EAAcS,gBAEpC,MAAwB,WAApBA,EACKL,GAEPI,EAD6B,UAApBC,EACE,CAAC,CAAC,OAAQ,QAAS,CAAC,MAAO,QAE3B,CAAC,CAAC,SAAU,CAAC,SAGnBL,EAAclS,OACnBkN,EAAQiF,EAAiBG,EAAS,GAAIA,EAAS,KAEnD,CA0FeE,CAAqB7F,EAAMmF,EAEtC,CAEA,GAAInV,MAAMmF,QAAQ0M,EAAQ1D,QAAS,CACjC,IAAIuH,EAAQtE,EAAWS,EAAQ1D,OAAQzM,EAAcsT,cACrD,OAAOzE,EAAQP,EAAM0F,EAAM,GAAIA,EAAM,GACvC,CAAO,GAA8B,mBAAnB7D,EAAQ1D,OACxB,OA5JN,SAAuBuH,EAAO1F,GAC5B,OAAOA,EAAK8F,KAAKJ,EACnB,CA0JaK,CAAclE,EAAQ1D,OAAQ6B,GAEvC,MAAM,IAAIpQ,MACR,oHAGJ,GAAGsV,EAAa5D,EApChB,CAqCF,EAQA5P,EAAc/C,UAAUqX,cAAgB,SAAShT,GAC/C,OAAI/E,KAAKwV,OAAOhK,mBAAmBzG,GAC1B2R,EAAyB1W,KAAK0H,OAAQ3C,GACpC/E,KAAKwV,OAAO9J,mBAAmB3G,GACjC2R,EAAyB1W,KAAK2H,kBAAmB5C,QADnD,CAKT,EA8BAtB,EAAc/C,UAAUsX,eAAiB,WACvC,IAAIjH,EAAQ/Q,KAAKwV,OACbzC,EAAU/S,KACViY,EAAM,GA8CV,OA5CAnS,OAAOC,KAAKgL,EAAMlJ,mBAAmBO,SAAQ,SAASwO,GACpD7F,EAAMlJ,kBAAkB+O,GAAexO,SAAQ,SAASuB,GACtDsO,EAAI3V,KAAKqU,EAAc5F,EAAO,QAAS6F,EAAejN,EAAMoJ,EAAQrL,QACtE,GACF,IAEA5B,OAAOC,KAAKgL,EAAMjJ,gBAAgBM,SAAQ,SAASwO,GACjD7F,EAAMjJ,eAAe8O,GAAexO,SAAQ,SAASuB,GACnDsO,EAAI3V,KAAKqU,EAAc5F,EAAO,UAAW6F,EAAejN,EAAMoJ,EAAQrL,QACxE,GACF,IAEA5B,OAAOC,KAAKgL,EAAMhJ,8BAA8BK,SAAQ,SAASwO,GAC/D7F,EAAMhJ,6BAA6B6O,GAAexO,SAAQ,SAASuB,GACjEsO,EAAI3V,KAAKqU,EAAc5F,EAAO,cAAe6F,EAAejN,EAAMoJ,EAAQpL,mBAC5E,GACF,IAEA7B,OAAOC,KAAKgL,EAAM7I,+BAA+BE,SAAQ,SAASwO,GAChE7F,EAAM7I,8BAA8B0O,GAAexO,SAAQ,SAASuB,GAClEsO,EAAI3V,KA+DV,SAAmCyO,EAAO6F,EAAejN,EAAMkN,GAC7D,IAAIqB,EAAmBnH,EAAMhD,2BAA2B6I,GACpD/I,EAAYkD,EAAMjD,+BAA+BoK,GACjDzH,EAAQ9G,EAAK8G,MAAM5C,GACnBsK,EAAYxR,EAAKkQ,GAAe,SAAStN,GAC3C,OAAOA,EAAMI,OAASiN,CACxB,IAEIrN,EAAQkH,EAAMzK,QAAO,SAASoS,EAAmB1H,GACnD,IAAI2H,EACFD,GAAqBzR,EAAKyR,EAAkBrG,MAAM,SAAStM,GACzD,OAAOA,EAAEkE,OAAS+G,CACpB,IACF,YAAoBvQ,IAAbkY,EAAyBA,EAAWD,CAC7C,GAAGD,GAECxF,EAASpJ,GAASA,EAAMoJ,OAAU,EAClClB,EAAclI,GAASA,EAAMkI,aAAe,EAC5CvD,EAAQ3E,GAASA,EAAM2E,MAAS,GAEpC,MAAO,CACLjN,KAAM,eACN2V,cAAeA,EACfjN,KAAMuE,EACNyE,MAAOA,EACPlB,WAAYA,EAEhB,CA1Fe/H,CAA0BqH,EAAO6F,EAAejN,EAAMoJ,EAAQnL,oBACzE,GACF,IAGA9B,OAAOC,KAAKgL,EAAM/I,oBAAoBI,SAAQ,SAASwO,GACrD,IAAI3N,EAAY8H,EAAM/I,mBAAmB4O,GACzC9Q,OAAOC,KAAKkD,GAAWb,SAAQ,SAASc,GACtCD,EAAUC,GAAUd,SAAQ,SAASpD,GACnCiT,EAAI3V,KAAK,CACPrB,KAAM,UACN2V,cAAeA,EACfjN,KAAM3E,EACNsT,aAActT,EACdkE,SAAUA,GAEd,GACF,GACF,IAEA6H,EAAM9I,eAAeG,SAAQ,SAASuB,GACpCsO,EAAI3V,KAAK,CAACrB,KAAM,MAAO2V,cAAe,QAASjN,KAAMA,GACvD,IAEOsO,CACT,EAmEAzX,EAAOC,QAAUgD,qCC7hCjB,IAAID,EAAmB,EAAQ,MAC3BC,EAAgB,EAAQ,MACxBM,EAAgB,EAAQ,MACxBwU,EAAiB,EAAQ,MAEzBxY,EAAe,EAAQ,MACvBqE,EAAW,EAAQ,MACnBO,EAAgB,EAAQ,KACxBD,EAAO,EAAQ,MACf+B,EAAQ,EAAQ,KAEhB3C,EAAU,EAAQ,MAClB4O,EAAmB,yBAyGvB,SAASnP,EAAoBI,EAAQC,EAAOgQ,GACJ,mBAA3BjQ,EAAO6U,iBAChB7U,EAAO6U,gBAAgB,cAAgB1U,EAAU,KAGnD9D,KAAKyY,UAAU9U,GACf,IAAIE,EAAO+P,GAAW,CAAC,EACvB/P,EAAKD,MAAQA,EACb5D,KAAK+Q,MAAQvN,EAAiB6F,KAAKxF,GACnC7D,KAAKmE,YAAc,KACnBnE,KAAK0Y,SAAW,EAChB1Y,KAAK2Y,sBAAwB,EAC7B3Y,KAAK4Y,eAAiB,GACtB5Y,KAAK6Y,kBAAoB,CAC3B,CA4vBA,SAASC,EAAejO,GACtB,GAAIA,EAAO,EAAG,MAAM,IAAIlJ,MAAM,2BAO9B,OALA3B,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMpG,QAAQE,GAC1BmO,aAAa,IAGRhZ,IACT,CA4MA,SAASiZ,IACP,OAAOjZ,KAAK+Q,MAAMlG,IACpB,CAj9BAzG,EAASb,EAAqBxD,GAa9BwD,EAAoB7C,UAAUwY,OAAS,WAErC,OADAlZ,KAAKmZ,QAAQ,CAACC,wBAAwB,IAC/BpZ,IACT,EAEAuD,EAAoB7C,UAAU2Y,6BAA+B,WAE3D,OADArZ,KAAKmZ,QAAQ,CAACC,wBAAwB,IAC/BpZ,IACT,EAOAuD,EAAoB7C,UAAU4Y,SAAW,WACvC,IAAIvI,EAAQ/Q,KAAK+Q,MACjB,OAAOwH,EAAegB,qBAAqBxI,EAC7C,EAsCAxN,EAAoB7C,UAAU8Y,WAAa,SAAS5F,EAAS6F,GAC3D,IAAIC,EAAa9F,EAAuB5T,KAAK+Q,MAAM1G,mBAAmBuJ,GAA3C5T,KAAK+Q,MAC5B4I,EAAUpB,EAAeqB,YAAYF,EAAU9V,MAAO8V,GACtDvR,EAAOnI,KAQX,GANAA,KAAK6Y,oBAEL7Y,KAAKgB,KAAK,aAAc,CACtB+P,MAAO2I,KAGLD,EAuBJ,OAAOzZ,KAAK2D,OAAOuV,OAAOS,GAASE,MAAK,SAASC,GAG/C,OAFA3R,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBAAyB1Q,EAAKnH,KAAK,oBACrC,CACL8Y,QAAS,IAAIrW,EAAciW,EAAWI,EAAQ/G,SAC9ChC,MAAO2I,EACPK,kBAAmBD,EAEvB,IAAG,SAASE,GAGV,MAFA7R,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBAAyB1Q,EAAKnH,KAAK,oBACtCgZ,CACR,IAlCEha,KAAK2D,OACFuV,OAAOS,GACPE,MAAK,SAASC,GACb3R,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBACP1Q,EAAKnH,KAAK,oBAGZyY,EAAG,KAAM,IAAIhW,EAAciW,EAAWI,EAAQ/G,SAAU2G,EAC1D,IACCO,OAAM,SAASrY,GACduG,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBACP1Q,EAAKnH,KAAK,oBAGZyY,EAAG7X,EAAK,KAAM8X,EAChB,GAkBN,EAaAnW,EAAoB7C,UAAUwZ,YAAc,SAAStG,GACnDpR,QAAQiF,KAAK,yDACb,IAAIsJ,EAAQ/Q,KAAK+Q,MACboJ,EAAgBna,KAAK4Y,eAAe,GACxC,IAAKuB,EACH,OAAOC,QAAQC,QAAQ,IAEzB,IAAIC,EAAeH,EAAc5V,iBAAiBwM,GAC9CgB,EAAOtL,EACT,CACE8T,wBAAyB3G,EAAQ2G,wBACjCC,OAAQ5G,EAAQ4G,QAElB,CACElT,OAAQ5C,EAAK6T,EAAegB,qBAAqBe,GAAe,CAC9D,sBACA,cACA,+BACA,0BAKFG,EAAe,8GACnB,GAAqC,mBAA1Bza,KAAK2D,OAAO+W,UACrB,MAAM,IAAI/Y,MAAM8Y,GAElB,IAAI7W,EAAQ5D,KAAK2D,OAAO+W,UAAUJ,EAAa1W,OAC/C,GAAiC,mBAAtBA,EAAMsW,YACf,MAAM,IAAIvY,MAAM8Y,GAElB,OAAO7W,EAAMsW,YAAYI,EAAa5P,MAAOkJ,EAAQ+G,eAAgB5I,EACvE,EAoCAxO,EAAoB7C,UAAUka,qBAAuB,SAASrR,EAAOmB,EAAOmQ,EAAcC,GACxF,IAAIC,EAA4D,mBAArC/a,KAAK2D,OAAOiX,qBACnCI,EAAsD,mBAA1Bhb,KAAK2D,OAAO+W,UAC5C,IACGK,IACAC,GAC6B,mBAAvBhb,KAAK2D,OAAOuV,OAEnB,MAAM,IAAIvX,MACR,yKAIJ,IAAIoP,EAAQ/Q,KAAK+Q,MAAM1G,mBAAmByQ,GAAa,CAAC,GACpDG,EAAgBlK,EAAMrF,mBAAmBnC,GACzC2R,EAAe3C,EAAe4C,uBAAuB5R,EAAOmB,EAAOmQ,EAAc9J,GAErF/Q,KAAK6Y,oBACL,IACIuC,EADAjT,EAAOnI,KAoCX,OAjCI+a,EACFK,EAA8Bpb,KAAK2D,OAAOiX,qBAAqB,CAC7D,CAACS,UAAWtK,EAAMnN,MAAO0D,OAAQ4T,KAG1BF,EACTI,EAA8Bpb,KAAK2D,OAChC+W,UAAU3J,EAAMnN,OAChBgX,qBAAqBM,WAIjBA,EAAa3P,UACpB6P,EAA8Bpb,KAAK2D,OAChCuV,OAAO,CACN,CACEjY,KAAM,QACNsI,MAAOA,EACP8R,UAAWtK,EAAMnN,MACjB0D,OAAQ4T,KAGXrB,MAAK,SAAyByB,GAC7B,OAAOA,EAASvI,QAAQ,EAC1B,KAGJ/S,KAAKgB,KAAK,uBAAwB,CAChC+P,MAAOA,EACPxH,MAAOA,EACPmB,MAAOA,IAGF0Q,EAA4BvB,MAAK,SAAsBC,GAa5D,OAZA3R,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBAAyB1Q,EAAKnH,KAAK,qBAE5C8Y,EAAU/X,MAAMmF,QAAQ4S,GAAWA,EAAQ,GAAKA,GAExCyB,UAAUnT,SAAQ,SAAS3C,GACjCA,EAAEgN,aAAeC,EAAiBjN,EAAET,OACpCS,EAAER,UAAYgW,EACVlK,EAAMvC,0BAA0BjF,EAAO9D,EAAEgN,cACzC1B,EAAMzC,eAAe/E,EAAO9D,EAAEgN,aACpC,IAEOqH,CACT,IAAG,SAASE,GAGV,MAFA7R,EAAK0Q,oBAC0B,IAA3B1Q,EAAK0Q,mBAAyB1Q,EAAKnH,KAAK,oBACtCgZ,CACR,GACF,EAWAzW,EAAoB7C,UAAU8J,SAAW,SAASgR,GAMhD,OALAxb,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYxF,SAASgR,GACvCxC,aAAa,IAGRhZ,IACT,EAyBAuD,EAAoB7C,UAAUkJ,iBAAmB,SAASD,GAMxD,OALA3J,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYpG,iBAAiBD,GAC/CqP,aAAa,IAGRhZ,IACT,EAUAuD,EAAoB7C,UAAU4J,UAAY,WAMxC,OALAtK,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY1F,YAC9B0O,aAAa,IAGRhZ,IACT,EAaAuD,EAAoB7C,UAAUkM,8BAAgC,SAASrD,EAAOvE,GAM5E,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYpD,8BAA8BrD,EAAOvE,GACnEgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAU+a,qBAAuB,WACnD,OAAOzb,KAAK4M,8BAA8B3K,MAAMjC,KAAM0B,UACxD,EAeA6B,EAAoB7C,UAAUuN,+BAAiC,SAAS1E,EAAOvE,GAM7E,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY/B,+BAA+B1E,EAAOvE,GACpEgU,aAAa,IAGRhZ,IACT,EAcAuD,EAAoB7C,UAAU0K,qBAAuB,SAASrG,EAAWmE,EAAUlE,GAMjF,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY5E,qBAAqBrG,EAAWmE,EAAUlE,GACxEgU,aAAa,IAGRhZ,IACT,EAaAuD,EAAoB7C,UAAUgM,mBAAqB,SAASnD,EAAOvE,GAMjE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYtD,mBAAmBnD,EAAOvE,GACxDgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAUgb,UAAY,WACxC,OAAO1b,KAAK0M,mBAAmBzK,MAAMjC,KAAM0B,UAC7C,EAcA6B,EAAoB7C,UAAUib,kBAAoB,SAASpS,EAAOvE,GAMhE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYrD,qBAAqBpD,EAAOvE,GAC1DgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAUkb,WAAa,WACzC,OAAO5b,KAAK2b,kBAAkB1Z,MAAMjC,KAAM0B,UAC5C,EAYA6B,EAAoB7C,UAAUmb,OAAS,SAAS/O,GAM9C,OALA9M,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYnD,iBAAiBC,GAC/CkM,aAAa,IAGRhZ,IACT,EAoBAuD,EAAoB7C,UAAUkL,wBAA0B,SAAS7G,EAAWmE,EAAUlE,GAMpF,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYpE,wBAAwB7G,EAAWmE,EAAUlE,GAC3EgU,aAAa,IAGRhZ,IACT,EAgBAuD,EAAoB7C,UAAU4M,iCAAmC,SAAS/D,EAAOvE,GAM/E,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY1C,iCAAiC/D,EAAOvE,GACtEgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAUob,wBAA0B,WACtD,OAAO9b,KAAKsN,iCAAiCrL,MAAMjC,KAAM0B,UAC3D,EAUA6B,EAAoB7C,UAAU0N,kCAAoC,SAAS7E,GAMzE,OALAvJ,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY5B,kCAAkC7E,GAChEyP,aAAa,IAGRhZ,IACT,EAgBAuD,EAAoB7C,UAAU0M,sBAAwB,SAAS7D,EAAOvE,GAMpE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY5C,sBAAsB7D,EAAOvE,GAC3DgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAUqb,aAAe,WAC3C,OAAO/b,KAAKoN,sBAAsBnL,MAAMjC,KAAM0B,UAChD,EAgBA6B,EAAoB7C,UAAUsb,qBAAuB,SAASzS,EAAOvE,GAMnE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY3C,wBAAwB9D,EAAOvE,GAC7DgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAUub,cAAgB,WAC5C,OAAOjc,KAAKgc,qBAAqB/Z,MAAMjC,KAAM0B,UAC/C,EAYA6B,EAAoB7C,UAAUwb,UAAY,SAASpP,GAMjD,OALA9M,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYzC,oBAAoBT,GAClDkM,aAAa,IAGRhZ,IACT,EAaAuD,EAAoB7C,UAAUyb,qBAAuB,SAAS5S,EAAOvE,GAMnE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYpC,6BAA6BrE,EAAOvE,GAClEgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAU0b,cAAgB,WAC5C,OAAOpc,KAAKmc,qBAAqBla,MAAMjC,KAAM0B,UAC/C,EAiBA6B,EAAoB7C,UAAUgF,iBAAmB,SAAS6D,EAAOvE,GAC/D,OAAOhF,KAAKyN,sBAAsBlE,EAAOvE,EAC3C,EAgBAzB,EAAoB7C,UAAU+M,sBAAwB,SAASlE,EAAOvE,GAMpE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYvC,sBAAsBlE,EAAOvE,GAC3DgU,aAAa,IAGRhZ,IACT,EAKAuD,EAAoB7C,UAAU2b,aAAe,WAC3C,OAAOrc,KAAKyN,sBAAsBxL,MAAMjC,KAAM0B,UAChD,EAYA6B,EAAoB7C,UAAU4b,UAAY,SAASxP,GAMjD,OALA9M,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAY3B,oBAAoBvB,GAClDkM,aAAa,IAGRhZ,IACT,EAWAuD,EAAoB7C,UAAU6b,SAAW,WACvC,IAAI1R,EAAO7K,KAAK+Q,MAAMlG,MAAQ,EAC9B,OAAO7K,KAAK2K,QAAQE,EAAO,EAC7B,EAWAtH,EAAoB7C,UAAU8b,aAAe,WAC3C,IAAI3R,EAAO7K,KAAK+Q,MAAMlG,MAAQ,EAC9B,OAAO7K,KAAK2K,QAAQE,EAAO,EAC7B,EAwBAtH,EAAoB7C,UAAUoY,eAAiBA,EAU/CvV,EAAoB7C,UAAUiK,QAAUmO,EAWxCvV,EAAoB7C,UAAU6J,SAAW,SAASZ,GAMhD,OALA3J,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYzF,SAASZ,GACvCqP,aAAa,IAGRhZ,IACT,EAmBAuD,EAAoB7C,UAAU6O,kBAAoB,SAASC,EAAWxK,GAMpE,OALAhF,KAAK+Y,QAAQ,CACXhI,MAAO/Q,KAAK+Q,MAAMf,YAAYT,kBAAkBC,EAAWxK,GAC3DgU,aAAa,IAGRhZ,IACT,EASAuD,EAAoB7C,UAAU+b,SAAW,SAASC,GAMhD,OALA1c,KAAK+Y,QAAQ,CACXhI,MAAOvN,EAAiB6F,KAAKqT,GAC7B1D,aAAa,IAGRhZ,IACT,EAmBAuD,EAAoB7C,UAAUic,0CAA4C,SAASD,GAEjF,OADA1c,KAAK+Q,MAAQ,IAAIvN,EAAiBkZ,GAC3B1c,IACT,EAyBAuD,EAAoB7C,UAAUkc,eAAiB,SAAS7X,GACtD,QAAIJ,EAAc3E,KAAK+Q,MAAM/E,sBAAsBjH,MAExC/E,KAAK+Q,MAAMvF,mBAAmBzG,GAChC/E,KAAK+Q,MAAMzC,eAAevJ,GACxB/E,KAAK+Q,MAAMrF,mBAAmB3G,GAChC/E,KAAK+Q,MAAMvC,0BAA0BzJ,KACnC/E,KAAK+Q,MAAMtE,oBAAoB1H,IACjC/E,KAAK+Q,MAAM5C,2BAA2BpJ,GASjD,EAqBAxB,EAAoB7C,UAAUiV,WAAa,SAASpM,EAAOvE,GACzD,OAAOhF,KAAK+Q,MAAMxC,iBAAiBhF,EAAOvE,EAC5C,EAKAzB,EAAoB7C,UAAUmc,qBAAuB,SAAStT,EAAOvE,GACnE,OAAOhF,KAAK+Q,MAAMvC,0BAA0BjF,EAAOvE,EACrD,EAOAzB,EAAoB7C,UAAUoc,OAAS,SAAShQ,GAC9C,OAAO9M,KAAK+Q,MAAMhE,aAAaD,EACjC,EAKAvJ,EAAoB7C,UAAUqM,aAAe,WAC3C,OAAO/M,KAAK+c,kBAAkB9a,MAAMjC,KAAM0B,UAC5C,EAUA6B,EAAoB7C,UAAUsc,SAAW,WACvC,OAAOhd,KAAK+Q,MAAMnN,KACpB,EAWAL,EAAoB7C,UAAUuY,eAAiBA,EAM/C1V,EAAoB7C,UAAUuc,QAAUhE,EAOxC1V,EAAoB7C,UAAUwc,QAAU,WACtC,OAAOld,KAAK+Q,MAAM9I,cACpB,EA8CA1E,EAAoB7C,UAAUsX,eAAiB,SAASzM,GACtD,IAAIkD,EAAc,GAElB,GAAIzO,KAAK+Q,MAAMvF,mBAAmBD,GACVvL,KAAK+Q,MAAMzF,0BAA0BC,GAE3CnD,SAAQ,SAAS+U,GAC/B1O,EAAYnM,KAAK,CACf0C,MAAOmY,EACPlc,KAAM,eAEV,IAEyBjB,KAAK+Q,MAAMpF,sBAAsBJ,GAEvCnD,SAAQ,SAAS+U,GAClC1O,EAAYnM,KAAK,CACf0C,MAAOmY,EACPlc,KAAM,WAEV,SACK,GAAIjB,KAAK+Q,MAAMrF,mBAAmBH,GAAY,CAC7BvL,KAAK+Q,MAAMtF,0BAA0BF,GAE3CnD,SAAQ,SAAS+U,GAC/B1O,EAAYnM,KAAK,CACf0C,MAAOmY,EACPlc,KAAM,eAEV,GACF,CAEA,IAAI+G,EAAqBhI,KAAK+Q,MAAM/E,sBAAsBT,GAY1D,OAVAzF,OAAOC,KAAKiC,GAAoBI,SAAQ,SAASc,GAC/C,IAAIlE,EAAQgD,EAAmBkB,GAE/BuF,EAAYnM,KAAK,CACf0C,MAAOA,EACPkE,SAAUA,EACVjI,KAAM,WAEV,IAEOwN,CACT,EAQAlL,EAAoB7C,UAAUuL,qBAAuB,SAASlH,EAAWmE,GACvE,OAAOlJ,KAAK+Q,MAAM9E,qBAAqBlH,EAAWmE,EACpD,EAOA3F,EAAoB7C,UAAU6P,+BAAiC,SAAShF,GACtE,OAAOvL,KAAK+Q,MAAMR,+BAA+BhF,EACnD,EAYAhI,EAAoB7C,UAAUyY,QAAU,SAASvF,GAC/C,IAAI7C,EAAQ/Q,KAAK+Q,MACbqM,EAAS,GACTC,EAAc,GAEbzJ,EAAQwF,yBACXiE,EAAc9E,EAAeqB,YAAY7I,EAAMnN,MAAOmN,GAEtDqM,EAAO9a,KAAK,CACVyO,MAAOA,EACPuM,aAAcD,EAAY5b,OAC1B8b,OAAQvd,OAGVA,KAAKgB,KAAK,SAAU,CAClB+P,MAAOA,EACPgC,QAAS/S,KAAKmE,eAIlB,IAAIqZ,EAAiBxd,KAAK4Y,eAAe7P,KAAI,SAASoR,GACpD,IAAIG,EAAeH,EAAc5V,iBAAiBwM,GAC9C0M,EAAsBlF,EAAeqB,YAAYU,EAAa1W,MAAO0W,GAazE,OAXA8C,EAAO9a,KAAK,CACVyO,MAAOuJ,EACPgD,aAAcG,EAAoBhc,OAClC8b,OAAQpD,IAGVA,EAAcnZ,KAAK,SAAU,CAC3B+P,MAAOuJ,EACPvH,QAASoH,EAAchW,cAGlBsZ,CACT,IAEI9D,EAAU5X,MAAMrB,UAAU0E,OAAOnD,MAAMob,EAAaG,GACpDE,EAAU1d,KAAK0Y,WAEnB1Y,KAAK6Y,oBAEL,IACE7Y,KAAK2D,OAAOuV,OAAOS,GAChBE,KAAK7Z,KAAK2d,yBAAyBC,KAAK5d,KAAMod,EAAQM,IACtDzD,MAAMja,KAAK6d,sBAAsBD,KAAK5d,KAAM0d,GAMjD,CALE,MAAOlc,GAEPxB,KAAKgB,KAAK,QAAS,CACjBQ,MAAOA,GAEX,CACF,EAaA+B,EAAoB7C,UAAUid,yBAA2B,SAASP,EAAQM,EAAS5D,GAGjF,KAAI4D,EAAU1d,KAAK2Y,sBAAnB,CAKA3Y,KAAK6Y,mBAAsB6E,EAAU1d,KAAK2Y,qBAC1C3Y,KAAK2Y,qBAAuB+E,EAEG,IAA3B1d,KAAK6Y,mBAAyB7Y,KAAKgB,KAAK,oBAE5C,IAAI+R,EAAU+G,EAAQ/G,QAAQ/Q,QAE9Bob,EAAOhV,SAAQ,SAAS0V,GACtB,IAAI/M,EAAQ+M,EAAE/M,MACVuM,EAAeQ,EAAER,aACjBC,EAASO,EAAEP,OACXQ,EAAkBhL,EAAQ9P,OAAO,EAAGqa,GAEpCU,EAAoBT,EAAOpZ,YAAc,IAAIV,EAAcsN,EAAOgN,GAEtER,EAAOvc,KAAK,SAAU,CACpB+R,QAASiL,EACTjN,MAAOA,GAEX,GArBA,CAsBF,EAEAxN,EAAoB7C,UAAUmd,sBAAwB,SAASH,EAASlc,GAClEkc,EAAU1d,KAAK2Y,uBAKnB3Y,KAAK6Y,mBAAqB6E,EAAU1d,KAAK2Y,qBACzC3Y,KAAK2Y,qBAAuB+E,EAE5B1d,KAAKgB,KAAK,QAAS,CACjBQ,MAAOA,IAGsB,IAA3BxB,KAAK6Y,mBAAyB7Y,KAAKgB,KAAK,oBAC9C,EAEAuC,EAAoB7C,UAAUud,mBAAqB,SAASvT,EAAOwT,EAAcjU,EAAgBD,GAC/F,OAAOU,GACmB,IAAxBwT,EAAazc,QACa,IAA1BwI,EAAexI,QACO,IAAtBuI,EAAWvI,MACf,EAQA8B,EAAoB7C,UAAUyd,2BAA6B,SAAS5U,GAClE,OAAOvJ,KAAK+Q,MAAMqN,uBAAuB7U,IACvCvJ,KAAK+Q,MAAMqN,uBAAuB7U,GAAO9H,OAAS,CACtD,EAEA8B,EAAoB7C,UAAUqY,QAAU,SAASsF,GAC/C,IAAItN,EAAQsN,EAAMtN,MACdiI,EAAcqF,EAAMrF,YAEpBjI,IAAU/Q,KAAK+Q,QACjB/Q,KAAK+Q,MAAQA,EAEb/Q,KAAKgB,KAAK,SAAU,CAClB+P,MAAO/Q,KAAK+Q,MACZgC,QAAS/S,KAAKmE,YACd6U,YAAaA,IAGnB,EAMAzV,EAAoB7C,UAAU4d,WAAa,WAEzC,OADAte,KAAK2D,OAAO2a,YAActe,KAAK2D,OAAO2a,aAC/Bte,IACT,EAQAuD,EAAoB7C,UAAU+X,UAAY,SAAS8F,GACjD,OAAIve,KAAK2D,SAAW4a,IAEqB,mBAA9BA,EAAU/F,iBACnB+F,EAAU/F,gBAAgB,cAAgB1U,EAAU,KAEtD9D,KAAK2D,OAAS4a,GALwBve,IAQxC,EAMAuD,EAAoB7C,UAAU8d,UAAY,WACxC,OAAOxe,KAAK2D,MACd,EAqBAJ,EAAoB7C,UAAU+d,OAAS,SAASxa,GAC9C,IAAIkW,EAAgB,IAAIpW,EAAc/D,KAAMiE,GAE5C,OADAjE,KAAK4Y,eAAetW,KAAK6X,GAClBA,CACT,EASA5W,EAAoB7C,UAAU4D,oBAAsB,SAAS6V,GAC3D,IAAIuE,EAAM1e,KAAK4Y,eAAepS,QAAQ2T,GACtC,IAAa,IAATuE,EAAY,MAAM,IAAI/c,MAAM,mCAChC3B,KAAK4Y,eAAe3V,OAAOyb,EAAK,EAClC,EAMAnb,EAAoB7C,UAAUie,mBAAqB,WACjD,OAAO3e,KAAK6Y,kBAAoB,CAClC,EAkBArY,EAAOC,QAAU8C,iCCv9CjB/C,EAAOC,QAAU,SAAiBkO,GAChC,OAAK5M,MAAMmF,QAAQyH,GAIZA,EAAMvI,OAAOiR,SAHX,EAIX,iCCJA7W,EAAOC,QAAU,WACf,IAAIme,EAAU7c,MAAMrB,UAAUsB,MAAMF,KAAKJ,WAEzC,OAAOkd,EAAQC,aAAY,SAASlP,EAAKmP,GAWvC,OAVAhZ,OAAOC,KAAKD,OAAOgZ,IAAS1W,SAAQ,SAASjF,QACvBhD,IAAhB2e,EAAO3b,UAGMhD,IAAbwP,EAAIxM,WAECwM,EAAIxM,GAEbwM,EAAIxM,GAAO2b,EAAO3b,GACpB,IACOwM,CACT,GAAG,CAAC,EACN,iCCMAnP,EAAOC,QAAU,CACfiS,iBAnBF,SAA0B1N,GACxB,MAAqB,iBAAVA,EAA2BA,EAE/B+Z,OAAO/Z,GAAOga,QAAQ,KAAM,MACrC,EAgBEnM,mBARF,SAA4B7N,GAC1B,MAAqB,iBAAVA,EAA2BA,EAE/BA,EAAMga,QAAQ,OAAQ,IAC/B,kCCrBAxe,EAAOC,QAAU,SAAckO,EAAOsQ,GACpC,GAAKld,MAAMmF,QAAQyH,GAInB,IAAK,IAAIrN,EAAI,EAAGA,EAAIqN,EAAMlN,OAAQH,IAChC,GAAI2d,EAAWtQ,EAAMrN,IACnB,OAAOqN,EAAMrN,EAGnB,iCCVAd,EAAOC,QAAU,SAAckO,EAAOsQ,GACpC,IAAKld,MAAMmF,QAAQyH,GACjB,OAAQ,EAGV,IAAK,IAAIrN,EAAI,EAAGA,EAAIqN,EAAMlN,OAAQH,IAChC,GAAI2d,EAAWtQ,EAAMrN,IACnB,OAAOA,EAGX,OAAQ,CACV,qCCZA,IAAIqF,EAAO,EAAQ,MAQnBnG,EAAOC,QAAU,SAAoByP,EAAQgP,GAC3C,IAAIC,GAAuBD,GAAY,IAAInW,KAAI,SAAS8O,GACtD,OAAOA,EAAKpH,MAAM,IACpB,IAEA,OAAOP,EAAOlK,QACZ,SAA0BoZ,EAAKvH,GAC7B,IAAIwH,EAAkBxH,EAAKpH,MAAM,KAE7B6O,EAAkB3Y,EAAKwY,GAAqB,SAC9CI,GAEA,OAAOA,EAAmB,KAAOF,EAAgB,EACnD,IAEA,OAAIA,EAAgB5d,OAAS,IAAM6d,GACjCF,EAAI,GAAG9c,KAAK+c,EAAgB,IAC5BD,EAAI,GAAG9c,KAAK+c,EAAgB,IACrBD,IAGTA,EAAI,GAAG9c,KAAKgd,EAAgB,IAC5BF,EAAI,GAAG9c,KAAKgd,EAAgB,IACrBF,EACT,GACA,CAAC,GAAI,IAET,iCCxBA5e,EAAOC,QAXP,SAAkB+e,EAAMC,GACtBD,EAAK9e,UAAYoF,OAAO4Z,OAAOD,EAAU/e,UAAW,CAClDwJ,YAAa,CACXlF,MAAOwa,EACPG,YAAY,EACZC,UAAU,EACVC,cAAc,IAGpB,iCCAArf,EAAOC,QATP,SAAsBqf,EAAMC,GAC1B,OAAOD,EAAK1Z,QAAO,SAASpB,EAAOpB,GACjC,OACEmc,EAAKvZ,QAAQxB,IAAU,GACvB8a,EAAKtZ,QAAQxB,KAAWpB,CAE5B,GACF,gCCAA,SAASoc,EAA0Bhb,GACjC,MACmB,mBAAVA,GACPjD,MAAMmF,QAAQlC,IAC4B,oBAA1Cc,OAAOpF,UAAUkQ,SAAS9O,KAAKkD,EAEnC,CAEA,SAASib,EAAOC,EAAQpB,GACtB,GAAIoB,IAAWpB,EACb,OAAOoB,EAGT,IAAK,IAAI/c,KAAO2b,EACd,GACGhZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,IACtC,cAARA,GACQ,gBAARA,EAHF,CAQA,IAAIid,EAAYtB,EAAO3b,GACnBkd,EAAYH,EAAO/c,QAEE,IAAdkd,QAAkD,IAAdD,IAK7CJ,EAA0BK,IAC1BL,EAA0BI,GAE1BF,EAAO/c,GAAO8c,EAAOI,EAAWD,GAEhCF,EAAO/c,GAzCU,iBADR6B,EA0CWob,IAzCmB,OAAVpb,EACxBib,EAAOle,MAAMmF,QAAQlC,GAAS,GAAK,CAAC,EAAGA,GAEzCA,EAuBL,CA3BJ,IAAeA,EA6Cb,OAAOkb,CACT,CAiCA1f,EAAOC,QAfP,SAAeyf,GACRF,EAA0BE,KAC7BA,EAAS,CAAC,GAGZ,IAAK,IAAI5e,EAAI,EAAGgf,EAAI5e,UAAUD,OAAQH,EAAIgf,EAAGhf,IAAK,CAChD,IAAIwd,EAASpd,UAAUJ,GAEnB0e,EAA0BlB,IAC5BmB,EAAOC,EAAQpB,EAEnB,CACA,OAAOoB,CACT,gCCzEA1f,EAAOC,QAJP,SAAuB8f,GACrB,OAAOA,GAAOza,OAAOC,KAAKwa,GAAK9e,OAAS,CAC1C,iCCaAjB,EAAOC,QAdP,SAAuCqe,EAAQ0B,GAC7C,GAAe,OAAX1B,EAAiB,MAAO,CAAC,EAC7B,IAEI3b,EACA7B,EAHA4e,EAAS,CAAC,EACVO,EAAa3a,OAAOC,KAAK+Y,GAG7B,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IACjC6B,EAAMsd,EAAWnf,GACbkf,EAASha,QAAQrD,IAAQ,IAC7B+c,EAAO/c,GAAO2b,EAAO3b,IAEvB,OAAO+c,CACT,iCCbA,SAASQ,EAAiB1b,EAAO2b,GAC/B,GAAI3b,IAAU2b,EAAO,CACnB,IAAIC,OAAyBzgB,IAAV6E,EACf6b,EAAsB,OAAV7b,EAEZ8b,OAAyB3gB,IAAVwgB,EACfI,EAAsB,OAAVJ,EAEhB,IACII,GAAa/b,EAAQ2b,GACtBE,GAAaC,IACbF,EAED,OAAO,EAET,IACIC,GAAa7b,EAAQ2b,GACtBI,GAAaH,IACbE,EAED,OAAQ,CAEZ,CACA,OAAO,CACT,CAoDAtgB,EAAOC,QA7CP,SAAiBugB,EAAYC,EAAWC,GACtC,IAAKnf,MAAMmF,QAAQ8Z,GACjB,MAAO,GAGJjf,MAAMmF,QAAQga,KACjBA,EAAS,IAGX,IAAIjN,EAAS+M,EAAWjY,KAAI,SAAS/D,EAAOpB,GAC1C,MAAO,CACLud,SAAUF,EAAUlY,KAAI,SAASqY,GAC/B,OAAOpc,EAAMoc,EACf,IACAxd,MAAOA,EACPoB,MAAOA,EAEX,IAuBA,OArBAiP,EAAO4D,MAAK,SAAkBwJ,EAAQV,GAGpC,IAFA,IAAI/c,GAAS,IAEJA,EAAQyd,EAAOF,SAAS1f,QAAQ,CACvC,IAAIwW,EAAMyI,EAAiBW,EAAOF,SAASvd,GAAQ+c,EAAMQ,SAASvd,IAClE,GAAIqU,EACF,OAAIrU,GAASsd,EAAOzf,OACXwW,EAEa,SAAlBiJ,EAAOtd,IACDqU,EAEHA,CAEX,CAIA,OAAOoJ,EAAOzd,MAAQ+c,EAAM/c,KAC9B,IAEOqQ,EAAOlL,KAAI,SAASkP,GACzB,OAAOA,EAAIjT,KACb,GACF,iCC9DAxE,EAAOC,QAZP,SAASmG,EAAYpB,GACnB,GAAiB,iBAANA,EACT,OAAOA,EACF,GAAiB,iBAANA,EAChB,OAAOqD,WAAWrD,GACb,GAAIzD,MAAMmF,QAAQ1B,GACvB,OAAOA,EAAEuD,IAAInC,GAGf,MAAM,IAAIjF,MAAM,wEAClB,qCCVA,IAAI8E,EAAQ,EAAQ,KAEpB,SAAS6a,EAAWf,GAClB,OAAOza,OAAOC,KAAKwa,GAChB1I,MAAK,SAAS7Q,EAAGC,GAChB,OAAOD,EAAEua,cAActa,EACzB,IACCjB,QAAO,SAAS2J,EAAK6R,GAEpB,OADA7R,EAAI6R,GAAQjB,EAAIiB,GACT7R,CACT,GAAG,CAAC,EACR,CAEA,IAAI4I,EAAiB,CAOnBqB,YAAa,SAAoBhW,EAAOmN,GACtC,IAAI4I,EAAU,GAiFd,OA9EAA,EAAQrX,KAAK,CACX+Y,UAAWzX,EACX0D,OAAQiR,EAAegB,qBAAqBxI,KAI9CA,EAAMhC,8BAA8B3G,SAAQ,SAASgN,GACnDuE,EAAQrX,KAAK,CACX+Y,UAAWzX,EACX0D,OAAQiR,EAAekJ,iCAAiC1Q,EAAOqE,IAEnE,IAGArE,EAAM9B,+BAA+B7G,SAAQ,SAASgN,GACpD,IAAI5I,EAAoBuE,EAAMhD,2BAA2BqH,GACrD3L,EAAoBsH,EAAMrH,0BAA0B0L,GACpDvH,EAAYkD,EAAMjD,+BAA+BtB,GAIrD,GAAI/C,EAAkBhI,OAAS,GAAKgI,EAAkB,GAAGgH,MAAM5C,GAAWpM,OAAS,EAAG,CAEpF,IAAIigB,EAAajY,EAAkB,GAAGgH,MAAM5C,GAAW7L,MAAM,GAAI,GAAGgE,QAClE,SAA0B+C,EAAK4Y,EAAS7P,GACtC,OAAO/I,EAAI3D,OAAO,CAChBL,UAAWyH,EAAkB6G,WAAWvB,GACxC9M,MAAiB,IAAV8M,EACH6P,EACA,CAAC5Y,EAAIA,EAAItH,OAAS,GAAGuD,MAAO2c,GAASC,KAAK/T,IAElD,GACA,IAEF6T,EAAWtZ,SAAQ,SAAShC,EAAQ0L,GAClC,IAAIxK,EAASiR,EAAekJ,iCAC1B1Q,EACA3K,EAAOrB,UACG,IAAV+M,GAIF,SAAS+P,EAA2B7c,GAClC,OAAOwH,EAAkB6G,WAAWyO,MAAK,SAAS/c,GAChD,OAAOA,IAAcC,EAAMyL,MAAM,KAAK,EACxC,GACF,CAEA,IAAIsR,GAAwBza,EAAO4W,cAAgB,IAAIlY,QAAO,SAAS2J,EAAKqS,GAC1E,GAAIjgB,MAAMmF,QAAQ8a,GAAc,CAC9B,IAAIC,EAAWD,EAAY5b,QAAO,SAAS8b,GACzC,OAAQL,EAA2BK,EACrC,IAEID,EAASxgB,OAAS,GACpBkO,EAAIrN,KAAK2f,EAEb,CAMA,MAJ2B,iBAAhBD,GAA6BH,EAA2BG,IACjErS,EAAIrN,KAAK0f,GAGJrS,CACT,GAAG,IAECkC,EAAS6P,EAAW5P,EAAQ,GAE9BxK,EAAO4W,aADLpM,EAAQ,EACYiQ,EAAqB3c,OAAOyM,EAAO9M,UAAY,IAAM8M,EAAO7M,OAE5D+c,EAAqBtgB,OAAS,EAAIsgB,OAAuB5hB,EAGjFwZ,EAAQrX,KAAK,CAAC+Y,UAAWzX,EAAO0D,OAAQA,GAC1C,GACF,CACF,IAEOqS,CACT,EAOAJ,qBAAsB,SAASxI,GAC7B,IAAIrJ,EAASqJ,EAAMrJ,OAChBtC,OAAO2L,EAAMpJ,mBACbvC,OAAOmT,EAAe4J,qCAAqCpR,IAG1DmN,EAAe3F,EAAe6J,iBAAiBrR,GAC/C9G,EAAiBsO,EAAe8J,mBAAmBtR,GACnD/G,EAAauO,EAAe+J,eAAevR,GAC3CwR,EAAmB,CACrB7a,OAAQA,EAAOlB,QAAQ,MAAQ,EAAI,CAAC,KAAOkB,EAC3CsC,WAAYA,GAWd,OARIkU,EAAazc,OAAS,IACxB8gB,EAAiBrE,aAAeA,GAG9BjU,EAAexI,OAAS,IAC1B8gB,EAAiBtY,eAAiBA,GAG7BqX,EAAW7a,EAAM,CAAC,EAAGsK,EAAM1B,iBAAkBkT,GACtD,EASAd,iCAAkC,SAAS1Q,EAAOxH,EAAOiZ,GACvD,IAAItE,EAAe3F,EAAe6J,iBAAiBrR,EAAOxH,EAAOiZ,GAC7DvY,EAAiBsO,EAAe8J,mBAAmBtR,EAAOxH,GAC1DS,EAAauO,EAAe+J,eAAevR,GAC3CwR,EAAmB,CACrBtX,YAAa,EACbJ,KAAM,EACN4X,WAAW,EACXC,gBAAgB,GAGd1Y,EAAWvI,OAAS,IACtB8gB,EAAiBvY,WAAaA,GAGhC,IAAIwC,EAAoBuE,EAAMhD,2BAA2BxE,GAoBzD,OAjBEgZ,EAAiB7a,OADf8E,EACwB+L,EAAeoK,0CACvC5R,EACAvE,EACAgW,GAGwBjZ,EAGxBU,EAAexI,OAAS,IAC1B8gB,EAAiBtY,eAAiBA,GAGhCiU,EAAazc,OAAS,IACxB8gB,EAAiBrE,aAAeA,GAG3BoD,EAAW7a,EAAM,CAAC,EAAGsK,EAAM1B,iBAAkBkT,GACtD,EAQAF,mBAAoB,SAAStR,EAAOxF,GAClC,GAAIwF,EAAM9G,eACR,OAAO8G,EAAM9G,eAGf,IAAIA,EAAiB,GAqBrB,OAnBAnE,OAAOC,KAAKgL,EAAM/I,oBAAoBI,SAAQ,SAASrD,GACrD,IAAIkE,EAAY8H,EAAM/I,mBAAmBjD,IAAc,CAAC,EACxDe,OAAOC,KAAKkD,GAAWb,SAAQ,SAASc,GACtC,IAAIhD,EAAS+C,EAAUC,IAAa,GAChCqC,IAAcxG,GAChBmB,EAAOkC,SAAQ,SAASpD,GACtB,GAAIjD,MAAMmF,QAAQlC,GAAQ,CACxB,IAAI4d,EAAK5d,EAAM+D,KAAI,SAASvD,GAC1B,OAAOT,EAAYmE,EAAW1D,CAChC,IACAyE,EAAe3H,KAAKsgB,EACtB,MACE3Y,EAAe3H,KAAKyC,EAAYmE,EAAWlE,EAE/C,GAEJ,GACF,IAEOiF,CACT,EAOAqY,eAAgB,SAASvR,GACvB,OAAIA,EAAM/G,WACD+G,EAAM/G,WAGR+G,EAAM9I,eAAe2Z,KAAK,IACnC,EAUAQ,iBAAkB,SAASrR,EAAOxH,EAAOiZ,GACvC,IAAItE,EAAe,GAEfrW,EAAoBkJ,EAAMlJ,mBAAqB,CAAC,EACpD/B,OAAOC,KAAK8B,GAAmBO,SAAQ,SAASmD,IAC5B1D,EAAkB0D,IAAc,IACtCnD,SAAQ,SAAS8J,GAC3BgM,EAAa5b,KAAKiJ,EAAY,IAAM2G,EACtC,GACF,IAEA,IAAIpK,EAAiBiJ,EAAMjJ,gBAAkB,CAAC,EAC9ChC,OAAOC,KAAK+B,GAAgBM,SAAQ,SAASmD,IACzBzD,EAAeyD,IAAc,IACnCnD,SAAQ,SAAS8J,GAC3BgM,EAAa5b,KAAKiJ,EAAY,KAAO2G,EACvC,GACF,IAEA,IAAInK,EAA+BgJ,EAAMhJ,8BAAgC,CAAC,EAC1EjC,OAAOC,KAAKgC,GAA8BK,SAAQ,SAASmD,GACzD,IAAI0L,EAAclP,EAA6BwD,IAAc,GAC7D,GAAIA,IAAchC,GAAU0N,GAAsC,IAAvBA,EAAYxV,OAAvD,CAGA,IAAIohB,EAAY,GAEhB5L,EAAY7O,SAAQ,SAAS8J,GAC3B2Q,EAAUvgB,KAAKiJ,EAAY,IAAM2G,EACnC,IAEAgM,EAAa5b,KAAKugB,EAPlB,CAQF,IAEA,IAAI3a,EAAgC6I,EAAM7I,+BAAiC,CAAC,EA4C5E,OA3CApC,OAAOC,KAAKmC,GAA+BE,SAAQ,SAASmD,GAC1D,IACI2G,GADchK,EAA8BqD,IAAc,IACjC,GAE7B,QAAmBpL,IAAf+R,EAAJ,CAIA,IAGI4Q,EACAC,EAJAvW,EAAoBuE,EAAMhD,2BAA2BxC,GACrDsC,EAAYkD,EAAMjD,+BAA+BtB,GACjDhD,EAAWuH,EAAMZ,yBAAyB3D,GAK9C,GAAIjD,IAAUgC,EAAW,CAGvB,IAAuC,IAAnC2G,EAAW1L,QAAQqH,KAAuBrE,IAAsC,IAA1BgZ,GACvDhZ,GAAYA,EAASiH,MAAM5C,GAAWpM,SAAWyQ,EAAWzB,MAAM5C,GAAWpM,OAC9E,OAGG+H,GAIHuZ,EAAkBvZ,EAASiH,MAAM5C,GAAWpM,OAAS,EACrDyQ,EAAa1I,IAJbuZ,EAAkB7Q,EAAWzB,MAAM5C,GAAWpM,OAAS,EACvDyQ,EAAaA,EAAWlQ,MAAM,EAAGkQ,EAAWlE,YAAYH,KAM1DiV,EAAoBtW,EAAkB6G,WAAW0P,EACnD,MACEA,EAAkB7Q,EAAWzB,MAAM5C,GAAWpM,OAAS,EAEvDqhB,EAAoBtW,EAAkB6G,WAAW0P,GAG/CD,GACF5E,EAAa5b,KAAK,CAACwgB,EAAoB,IAAM5Q,GAjC/C,CAmCF,IAEOgM,CACT,EAEAiE,qCAAsC,SAASpR,GAG7C,OAAOA,EAAMnJ,mBAAmB5B,QAE9B,SAA+Cgd,EAAexW,GAC5D,IAAIyW,EAAyBlS,EAAMrH,0BAA0B8C,EAAkB7C,MAAM,GAGrF,IAAKsZ,EAEH,OADAD,EAAc1gB,KAAKkK,EAAkB6G,WAAW,IACzC2P,EAGT,IAAInV,EAAYkD,EAAMjD,+BAA+BtB,GACjDsF,EAAQmR,EAAuBxS,MAAM5C,GAAWpM,OAChDyhB,EAAgB1W,EAAkB6G,WAAWrR,MAAM,EAAG8P,EAAQ,GAElE,OAAOkR,EAAc5d,OAAO8d,EAC9B,GAlBQ,GAmBZ,EAEAP,0CAA2C,SAAS5R,EAAOvE,EAAmB2W,GAC5E,IAAItV,EAAYkD,EAAMjD,+BAA+BtB,GACrD,IAAkB,IAAd2W,EAAoB,CACtB,IAAI3Z,EAAWuH,EAAMZ,yBAAyB3D,GAC1C0I,EAAiB,EAKrB,OAHI1L,IACF0L,EAAiB1L,EAASiH,MAAM5C,GAAWpM,QAEtC,CAAC+K,EAAkB6G,WAAW6B,GACvC,CAEA,IAIIkO,GAJyBrS,EAAMrH,0BAA0B8C,EAAkB7C,MAAM,IAAM,IAIlD8G,MAAM5C,GAAWpM,OAAS,EACnE,OAAO+K,EAAkB6G,WAAWrR,MAAM,EAAGohB,EAAc,EAC7D,EAEAjI,uBAAwB,SAAS5P,EAAWb,EAAOmQ,EAAc9J,GAC/D,IAAIsS,EAA+BtS,EAAMrF,mBAAmBH,GAC1DwF,EAAMnH,iBAAiB2B,GACvBwF,EACEuS,EAAiC,CACnCC,WAAY7Y,EACZa,UAAWA,GAKb,MAH4B,iBAAjBsP,IACTyI,EAA+BzI,aAAeA,GAEzCyG,EAAW7a,EAChB,CAAC,EACD8R,EAAegB,qBAAqB8J,GACpCC,GAEJ,GAGF9iB,EAAOC,QAAU8X,iCC1XjB/X,EAAOC,QAAU,SAA0B+G,GACzC,OAAkB,OAAdA,GAGG,wBAAwBgc,KAAKhc,EACtC,iCCLAhH,EAAOC,QAAU,0BCDmDD,EAAOC,QAAgG,WAAY,aAAa,SAASuZ,EAAEA,EAAExM,EAAE2P,GAAG,OAAO3P,KAAKwM,EAAElU,OAAO2d,eAAezJ,EAAExM,EAAE,CAACxI,MAAMmY,EAAEwC,YAAW,EAAGE,cAAa,EAAGD,UAAS,IAAK5F,EAAExM,GAAG2P,EAAEnD,CAAC,CAAC,SAASxM,EAAEwM,EAAExM,GAAG,IAAI2P,EAAErX,OAAOC,KAAKiU,GAAG,GAAGlU,OAAO4d,sBAAsB,CAAC,IAAI7iB,EAAEiF,OAAO4d,sBAAsB1J,GAAGxM,IAAI3M,EAAEA,EAAEuF,QAAO,SAAUoH,GAAG,OAAO1H,OAAO6d,yBAAyB3J,EAAExM,GAAGmS,UAAW,KAAIxC,EAAE7a,KAAKL,MAAMkb,EAAEtc,EAAE,CAAC,OAAOsc,CAAC,CAAC,SAASA,EAAEA,GAAG,IAAI,IAAItc,EAAE,EAAEA,EAAEa,UAAUD,OAAOZ,IAAI,CAAC,IAAI+iB,EAAE,MAAMliB,UAAUb,GAAGa,UAAUb,GAAG,CAAC,EAAEA,EAAE,EAAE2M,EAAE1H,OAAO8d,IAAG,GAAIxb,SAAQ,SAAUoF,GAAGwM,EAAEmD,EAAE3P,EAAEoW,EAAEpW,GAAI,IAAG1H,OAAO+d,0BAA0B/d,OAAOge,iBAAiB3G,EAAErX,OAAO+d,0BAA0BD,IAAIpW,EAAE1H,OAAO8d,IAAIxb,SAAQ,SAAU4R,GAAGlU,OAAO2d,eAAetG,EAAEnD,EAAElU,OAAO6d,yBAAyBC,EAAE5J,GAAI,GAAE,CAAC,OAAOmD,CAAC,CAAC,SAAStc,EAAEmZ,EAAExM,GAAG,GAAG,MAAMwM,EAAE,MAAM,CAAC,EAAE,IAAImD,EAAEtc,EAAE+iB,EAAE,SAAS5J,EAAExM,GAAG,GAAG,MAAMwM,EAAE,MAAM,CAAC,EAAE,IAAImD,EAAEtc,EAAE+iB,EAAE,CAAC,EAAE5c,EAAElB,OAAOC,KAAKiU,GAAG,IAAInZ,EAAE,EAAEA,EAAEmG,EAAEvF,OAAOZ,IAAIsc,EAAEnW,EAAEnG,GAAG2M,EAAEhH,QAAQ2W,IAAI,IAAIyG,EAAEzG,GAAGnD,EAAEmD,IAAI,OAAOyG,CAAC,CAAnI,CAAqI5J,EAAExM,GAAG,GAAG1H,OAAO4d,sBAAsB,CAAC,IAAI1c,EAAElB,OAAO4d,sBAAsB1J,GAAG,IAAInZ,EAAE,EAAEA,EAAEmG,EAAEvF,OAAOZ,IAAIsc,EAAEnW,EAAEnG,GAAG2M,EAAEhH,QAAQ2W,IAAI,GAAGrX,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKkY,EAAEmD,KAAKyG,EAAEzG,GAAGnD,EAAEmD,GAAG,CAAC,OAAOyG,CAAC,CAAC,SAASA,EAAE5J,EAAExM,GAAG,OAAO,SAASwM,GAAG,GAAGjY,MAAMmF,QAAQ8S,GAAG,OAAOA,CAAC,CAAxC,CAA0CA,IAAI,SAASA,EAAExM,GAAG,GAAKwW,OAAOC,YAAYne,OAAOkU,IAAI,uBAAuBlU,OAAOpF,UAAUkQ,SAAS9O,KAAKkY,GAAzF,CAAoG,IAAImD,EAAE,GAAGtc,GAAE,EAAG+iB,GAAE,EAAG5c,OAAE,EAAO,IAAI,IAAI,IAAIkd,EAAE5iB,EAAE0Y,EAAEgK,OAAOC,cAAcpjB,GAAGqjB,EAAE5iB,EAAE6iB,QAAQC,QAAQjH,EAAE7a,KAAK4hB,EAAElf,QAAQwI,GAAG2P,EAAE1b,SAAS+L,GAAG3M,GAAE,GAAsF,CAAjF,MAAMmZ,GAAG4J,GAAE,EAAG5c,EAAEgT,CAAC,CAAC,QAAQ,IAAInZ,GAAG,MAAMS,EAAE+iB,QAAQ/iB,EAAE+iB,QAA6B,CAApB,QAAQ,GAAGT,EAAE,MAAM5c,CAAC,CAAC,CAAC,OAAOmW,CAA7N,CAA8N,CAA/U,CAAiVnD,EAAExM,IAAI,WAAW,MAAM,IAAIzM,UAAU,uDAAuD,CAAtF,EAAyF,CAAC,SAASiG,EAAEgT,GAAG,OAAO,SAASA,GAAG,GAAGjY,MAAMmF,QAAQ8S,GAAG,CAAC,IAAI,IAAIxM,EAAE,EAAE2P,EAAE,IAAIpb,MAAMiY,EAAEvY,QAAQ+L,EAAEwM,EAAEvY,OAAO+L,IAAI2P,EAAE3P,GAAGwM,EAAExM,GAAG,OAAO2P,CAAC,CAAC,CAArG,CAAuGnD,IAAI,SAASA,GAAG,GAAGgK,OAAOC,YAAYne,OAAOkU,IAAI,uBAAuBlU,OAAOpF,UAAUkQ,SAAS9O,KAAKkY,GAAG,OAAOjY,MAAMuiB,KAAKtK,EAAE,CAA1H,CAA4HA,IAAI,WAAW,MAAM,IAAIjZ,UAAU,kDAAkD,CAAjF,EAAoF,CAAC,SAASmjB,EAAElK,GAAG,IAAIxM,EAAE2P,EAAE,2BAA2B/X,OAAO4U,EAAE7W,KAAKtC,EAAE,WAAW,YAAO,IAAS2M,IAAIA,EAAEwM,EAAEuK,cAAcC,OAAOD,cAAc/W,CAAC,EAAExG,EAAE,WAAW,OAAO6J,KAAK4T,MAAM5jB,IAAI6jB,QAAQvH,IAAI,KAAK,EAAE,MAAM,CAACwH,IAAI,SAAS3K,EAAExM,GAAG,IAAI2P,EAAEzb,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAACkjB,KAAK,WAAW,OAAOxK,QAAQC,SAAS,GAAG,OAAOD,QAAQC,UAAUR,MAAK,WAAY,IAAIsD,EAAEtM,KAAKC,UAAUkJ,GAAGnZ,EAAEmG,IAAImW,GAAG,OAAO/C,QAAQyK,IAAI,CAAChkB,GAAG2M,SAAI,IAAS3M,GAAI,IAAGgZ,MAAK,SAAUG,GAAG,IAAIxM,EAAEoW,EAAE5J,EAAE,GAAGnZ,EAAE2M,EAAE,GAAGxG,EAAEwG,EAAE,GAAG,OAAO4M,QAAQyK,IAAI,CAAChkB,EAAEmG,GAAGmW,EAAEyH,KAAK/jB,IAAK,IAAGgZ,MAAK,SAAUG,GAAG,OAAO4J,EAAE5J,EAAE,GAAG,EAAG,GAAE,EAAE8K,IAAI,SAAS9K,EAAExM,GAAG,OAAO4M,QAAQC,UAAUR,MAAK,WAAY,IAAI+J,EAAE5c,IAAI,OAAO4c,EAAE/S,KAAKC,UAAUkJ,IAAIxM,EAAE3M,IAAIkkB,QAAQ5H,EAAEtM,KAAKC,UAAU8S,IAAIpW,CAAE,GAAE,EAAEwX,OAAO,SAAShL,GAAG,OAAOI,QAAQC,UAAUR,MAAK,WAAY,IAAIrM,EAAExG,WAAWwG,EAAEqD,KAAKC,UAAUkJ,IAAInZ,IAAIkkB,QAAQ5H,EAAEtM,KAAKC,UAAUtD,GAAI,GAAE,EAAEyX,MAAM,WAAW,OAAO7K,QAAQC,UAAUR,MAAK,WAAYhZ,IAAIqkB,WAAW/H,EAAG,GAAE,EAAE,CAAC,SAAS7b,EAAE0Y,GAAG,IAAIxM,EAAExG,EAAEgT,EAAEmL,QAAQhI,EAAE3P,EAAE4X,QAAQ,YAAO,IAASjI,EAAE,CAACwH,IAAI,SAAS3K,EAAExM,GAAG,IAAI2P,EAAEzb,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAACkjB,KAAK,WAAW,OAAOxK,QAAQC,SAAS,GAAS,OAAJ7M,IAAaqM,MAAK,SAAUG,GAAG,OAAOI,QAAQyK,IAAI,CAAC7K,EAAEmD,EAAEyH,KAAK5K,IAAK,IAAGH,MAAK,SAAUG,GAAG,OAAO4J,EAAE5J,EAAE,GAAG,EAAG,GAAE,EAAE8K,IAAI,SAAS9K,EAAExM,GAAG,OAAO4M,QAAQC,QAAQ7M,EAAE,EAAEwX,OAAO,SAAShL,GAAG,OAAOI,QAAQC,SAAS,EAAE4K,MAAM,WAAW,OAAO7K,QAAQC,SAAS,GAAG,CAACsK,IAAI,SAAS3K,EAAEnZ,GAAG,IAAI+iB,EAAEliB,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAACkjB,KAAK,WAAW,OAAOxK,QAAQC,SAAS,GAAG,OAAO8C,EAAEwH,IAAI3K,EAAEnZ,EAAE+iB,GAAG3J,OAAM,WAAY,OAAO3Y,EAAE,CAAC6jB,OAAO3X,IAAImX,IAAI3K,EAAEnZ,EAAE+iB,EAAG,GAAE,EAAEkB,IAAI,SAAS9K,EAAEnZ,GAAG,OAAOsc,EAAE2H,IAAI9K,EAAEnZ,GAAGoZ,OAAM,WAAY,OAAO3Y,EAAE,CAAC6jB,OAAO3X,IAAIsX,IAAI9K,EAAEnZ,EAAG,GAAE,EAAEmkB,OAAO,SAAShL,GAAG,OAAOmD,EAAE6H,OAAOhL,GAAGC,OAAM,WAAY,OAAO3Y,EAAE,CAAC6jB,OAAO3X,IAAIwX,OAAOhL,EAAG,GAAE,EAAEiL,MAAM,WAAW,OAAO9H,EAAE8H,QAAQhL,OAAM,WAAY,OAAO3Y,EAAE,CAAC6jB,OAAO3X,IAAIyX,OAAQ,GAAE,EAAE,CAAC,SAASnH,IAAI,IAAI9D,EAAEtY,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAAC2jB,cAAa,GAAI7X,EAAE,CAAC,EAAE,MAAM,CAACmX,IAAI,SAASxH,EAAEtc,GAAG,IAAI+iB,EAAEliB,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAACkjB,KAAK,WAAW,OAAOxK,QAAQC,SAAS,GAAGrT,EAAE6J,KAAKC,UAAUqM,GAAG,GAAGnW,KAAKwG,EAAE,OAAO4M,QAAQC,QAAQL,EAAEqL,aAAaxU,KAAK4T,MAAMjX,EAAExG,IAAIwG,EAAExG,IAAI,IAAIkd,EAAErjB,IAAIS,EAAEsiB,GAAGA,EAAEgB,MAAM,WAAW,OAAOxK,QAAQC,SAAS,EAAE,OAAO6J,EAAErK,MAAK,SAAUG,GAAG,OAAO1Y,EAAE0Y,EAAG,IAAGH,MAAK,WAAY,OAAOqK,CAAE,GAAE,EAAEY,IAAI,SAAS3H,EAAEtc,GAAG,OAAO2M,EAAEqD,KAAKC,UAAUqM,IAAInD,EAAEqL,aAAaxU,KAAKC,UAAUjQ,GAAGA,EAAEuZ,QAAQC,QAAQxZ,EAAE,EAAEmkB,OAAO,SAAShL,GAAG,cAAcxM,EAAEqD,KAAKC,UAAUkJ,IAAII,QAAQC,SAAS,EAAE4K,MAAM,WAAW,OAAOzX,EAAE,CAAC,EAAE4M,QAAQC,SAAS,EAAE,CAAC,SAASiL,EAAEtL,GAAG,IAAI,IAAIxM,EAAEwM,EAAEvY,OAAO,EAAE+L,EAAE,EAAEA,IAAI,CAAC,IAAI2P,EAAEoI,KAAKC,MAAMD,KAAKE,UAAUjY,EAAE,IAAI3M,EAAEmZ,EAAExM,GAAGwM,EAAExM,GAAGwM,EAAEmD,GAAGnD,EAAEmD,GAAGtc,CAAC,CAAC,OAAOmZ,CAAC,CAAC,SAASsG,EAAEtG,EAAExM,GAAG,OAAOA,GAAG1H,OAAOC,KAAKyH,GAAGpF,SAAQ,SAAU+U,GAAGnD,EAAEmD,GAAG3P,EAAE2P,GAAGnD,EAAG,IAAGA,GAAGA,CAAC,CAAC,SAASvU,EAAEuU,GAAG,IAAI,IAAIxM,EAAE9L,UAAUD,OAAO0b,EAAE,IAAIpb,MAAMyL,EAAE,EAAEA,EAAE,EAAE,GAAG3M,EAAE,EAAEA,EAAE2M,EAAE3M,IAAIsc,EAAEtc,EAAE,GAAGa,UAAUb,GAAG,IAAI+iB,EAAE,EAAE,OAAO5J,EAAEgF,QAAQ,OAAM,WAAY,OAAO0G,mBAAmBvI,EAAEyG,KAAM,GAAE,CAAC,IAAI+B,EAAE,CAACC,sBAAsB,EAAEC,cAAc,GAAG,SAASC,EAAE9L,EAAExM,GAAG,IAAI2P,EAAEnD,GAAG,CAAC,EAAEnZ,EAAEsc,EAAEpL,MAAM,CAAC,EAAE,OAAOjM,OAAOC,KAAKoX,GAAG/U,SAAQ,SAAU4R,IAAI,IAAI,CAAC,UAAU,UAAU,kBAAkB,OAAO,aAAaxT,QAAQwT,KAAKnZ,EAAEmZ,GAAGmD,EAAEnD,GAAI,IAAG,CAACjI,KAAKjM,OAAOigB,QAAQllB,GAAGY,OAAO,EAAEZ,OAAE,EAAOmlB,QAAQ7I,EAAE6I,SAASxY,EAAEyY,QAAQ9I,EAAE8I,SAAS,CAAC,EAAEC,gBAAgB/I,EAAE+I,iBAAiB,CAAC,EAAEC,UAAUhJ,EAAEgJ,UAAU,CAAC,IAAI/jB,EAAE,CAACgkB,KAAK,EAAEC,MAAM,EAAEC,IAAI,GAAGC,EAAE,EAAE/gB,EAAE,EAAEghB,EAAE,EAAE,SAAS3jB,EAAEmX,GAAG,IAAIxM,EAAE9L,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG6kB,EAAE,OAAOpJ,EAAEA,EAAE,CAAC,EAAEnD,GAAG,CAAC,EAAE,CAACyM,OAAOjZ,EAAEkZ,WAAWC,KAAKC,OAAO,CAAC,SAAS3f,EAAE+S,GAAG,MAAM,iBAAiBA,EAAE,CAAC6M,SAAS,QAAQC,IAAI9M,EAAE+M,OAAO3kB,EAAEkkB,KAAK,CAACO,SAAS7M,EAAE6M,UAAU,QAAQC,IAAI9M,EAAE8M,IAAIC,OAAO/M,EAAE+M,QAAQ3kB,EAAEkkB,IAAI,CAAC,IAAIU,EAAE,MAAMC,EAAE,OAAO,SAASzL,EAAExB,EAAExM,GAAG,OAAO4M,QAAQyK,IAAIrX,EAAEzE,KAAI,SAAUyE,GAAG,OAAOwM,EAAE2K,IAAInX,GAAE,WAAY,OAAO4M,QAAQC,QAAQxX,EAAE2K,GAAI,GAAG,KAAIqM,MAAK,SAAUG,GAAG,IAAImD,EAAEnD,EAAE5T,QAAO,SAAU4T,GAAG,OAAO,SAASA,GAAG,OAAOA,EAAEyM,SAASF,GAAGI,KAAKC,MAAM5M,EAAE0M,WAAW,IAAI,CAA7D,CAA+D1M,EAAG,IAAGnZ,EAAEmZ,EAAE5T,QAAO,SAAU4T,GAAG,OAAO,SAASA,GAAG,OAAOA,EAAEyM,SAASD,GAAGG,KAAKC,MAAM5M,EAAE0M,YAAY,IAAI,CAA9D,CAAgE1M,EAAG,IAAG4J,EAAE,GAAGxe,OAAO4B,EAAEmW,GAAGnW,EAAEnG,IAAI,MAAM,CAACqmB,WAAW,SAASlN,EAAExM,GAAG,OAAO,IAAI3M,EAAEY,QAAQ,IAAIuY,EAAE,EAAEnZ,EAAEY,OAAO,EAAEuY,GAAGxM,CAAC,EAAE2Z,eAAevD,EAAEniB,OAAO,EAAEmiB,EAAE7a,KAAI,SAAUiR,GAAG,OAAO/S,EAAE+S,EAAG,IAAGxM,EAAG,GAAE,CAAC,SAAS4Z,EAAEpN,EAAExM,EAAE3M,EAAE+iB,GAAG,IAAIM,EAAE,GAAG5iB,EAAE,SAAS0Y,EAAExM,GAAG,GAAGwM,EAAEqN,SAASL,SAAG,IAAShN,EAAEjI,WAAM,IAASvE,EAAEuE,MAA7C,CAAyD,IAAIlR,EAAEkB,MAAMmF,QAAQ8S,EAAEjI,MAAMiI,EAAEjI,KAAKoL,EAAEA,EAAE,CAAC,EAAEnD,EAAEjI,MAAMvE,EAAEuE,MAAM,OAAOlB,KAAKC,UAAUjQ,EAAjF,CAAmF,CAAzJ,CAA2JA,EAAE+iB,GAAG9F,EAAE,SAAS9D,EAAExM,GAAG,IAAI3M,EAAEsc,EAAEA,EAAE,CAAC,EAAEnD,EAAEiM,SAASzY,EAAEyY,SAASrC,EAAE,CAAC,EAAE,OAAO9d,OAAOC,KAAKlF,GAAGuH,SAAQ,SAAU4R,GAAG,IAAIxM,EAAE3M,EAAEmZ,GAAG4J,EAAE5J,EAAEsN,eAAe9Z,CAAE,IAAGoW,CAAC,CAArI,CAAuI5J,EAAE4J,GAAG0B,EAAEzkB,EAAEwmB,OAAO/G,EAAEzf,EAAEwmB,SAASL,EAAE,CAAC,EAAE7J,EAAEA,EAAE,CAAC,EAAEtc,EAAEkR,MAAM6R,EAAE7R,MAAMtM,EAAE0X,EAAEA,EAAEA,EAAE,CAAC,kBAAkBnD,EAAEuN,UAAUviB,OAAOgV,EAAEkM,iBAAiB5F,GAAGsD,EAAEsC,iBAAiBP,EAAE,EAAEG,EAAE,SAAStY,EAAE2P,EAAEnW,GAAG,IAAIsZ,EAAEnD,EAAEqK,MAAM,QAAG,IAASlH,EAAE,KAAK,CAAC3W,KAAK,aAAa8d,QAAQ,gHAAgHC,sBAAsBC,EAAEzD,IAAI,IAAI4B,EAAE,CAAC/T,KAAKzQ,EAAE2kB,QAAQnI,EAAEuJ,OAAO/B,EAAEwB,IAAIc,EAAEtH,EAAEzf,EAAEqN,KAAKzI,GAAGoiB,eAAe7gB,EAAE2e,EAAE3L,EAAE8N,SAASC,SAASC,gBAAgBhhB,EAAE2e,EAAE/B,EAAEoC,UAAU5jB,EAAE,SAAS4X,GAAG,IAAIxM,EAAE,CAACya,QAAQnC,EAAExK,SAAStB,EAAEkO,KAAK5H,EAAE6H,UAAUhL,EAAE1b,QAAQ,OAAOyiB,EAAE5hB,KAAKkL,GAAGA,CAAC,EAAE+Y,EAAE,CAAC6B,UAAU,SAASpO,GAAG,OAAO,SAASA,GAAG,IAAI,OAAOnJ,KAAK4T,MAAMzK,EAAEF,QAA4G,CAAnG,MAAMtM,GAAG,MAAM,SAASwM,EAAExM,GAAG,MAAM,CAAC7D,KAAK,uBAAuB8d,QAAQzN,EAAEsB,SAAS9N,EAAE,CAAtE,CAAwEA,EAAEia,QAAQzN,EAAE,CAAC,CAAjJ,CAAmJA,EAAE,EAAEqO,QAAQ,SAASxnB,GAAG,IAAI+iB,EAAExhB,EAAEvB,GAAG,OAAOA,EAAEynB,YAAY3C,IAAIvL,QAAQyK,IAAI,CAAC7K,EAAEuO,OAAOC,KAAK,oBAAoBC,EAAE7E,IAAI5J,EAAE0O,WAAW5D,IAAIxE,EAAEzd,EAAEyd,EAAEzf,EAAEynB,WAAW9B,EAAEhhB,MAAMqU,MAAK,WAAY,OAAOrM,EAAE2P,EAAEnW,EAAG,GAAE,EAAE2hB,OAAO,SAAS3O,GAAG,MAAM5X,EAAE4X,GAAG,SAASA,EAAExM,GAAG,IAAI2P,EAAEnD,EAAEF,QAAQjZ,EAAEmZ,EAAEyM,OAAO7C,EAAEzG,EAAE,IAAIyG,EAAE/S,KAAK4T,MAAMtH,GAAGsK,OAAiB,CAAT,MAAMzN,GAAG,CAAC,OAAO,SAASA,EAAExM,EAAE2P,GAAG,MAAM,CAACxT,KAAK,WAAW8d,QAAQzN,EAAEyM,OAAOjZ,EAAEka,sBAAsBvK,EAAE,CAAlF,CAAoFyG,EAAE/iB,EAAE2M,EAAE,CAApL,CAAsLwM,EAAE2N,EAAEzD,GAAG,GAAG,OAAOlK,EAAE4O,UAAUC,KAAK/C,GAAGjM,MAAK,SAAUG,GAAG,OAAO,SAASA,EAAExM,GAAG,OAAO,SAASwM,GAAG,IAAIxM,EAAEwM,EAAEyM,OAAO,OAAOzM,EAAEsO,YAAY,SAAStO,GAAG,IAAIxM,EAAEwM,EAAEsO,WAAWnL,EAAEnD,EAAEyM,OAAO,OAAOjZ,GAAG,KAAK2P,CAAC,CAA1D,CAA4DnD,IAAI,MAAMxM,EAAE,MAAM,MAAMA,EAAE,IAAI,CAA1I,CAA4IwM,GAAGxM,EAAE6a,QAAQrO,GAAG,MAAMA,EAAEyM,OAAO,KAAKjZ,EAAE4a,UAAUpO,GAAGxM,EAAEmb,OAAO3O,EAAE,CAA/N,CAAiOA,EAAEuM,EAAG,GAAE,EAAE,OAAO/K,EAAExB,EAAE0O,WAAWlb,GAAGqM,MAAK,SAAUG,GAAG,OAAO8L,EAAE9e,EAAEgT,EAAEmN,gBAAgB2B,UAAU9O,EAAEkN,WAAY,GAAE,CAAC,SAAS6B,EAAE/O,GAAG,IAAIxM,EAAE,CAACxI,MAAM,2BAA2BI,OAAO4U,EAAE,KAAKgP,IAAI,SAAShP,GAAG,IAAImD,EAAE,KAAK/X,OAAO4U,EAAE2H,SAASvc,YAAO,IAAS4U,EAAElW,QAAQ,KAAKsB,OAAO4U,EAAElW,QAAQ,KAAK,IAAI,OAAO,IAAI0J,EAAExI,MAAMwB,QAAQ2W,KAAK3P,EAAExI,MAAM,GAAGI,OAAOoI,EAAExI,OAAOI,OAAO+X,IAAI3P,CAAC,GAAG,OAAOA,CAAC,CAAC,SAASoa,EAAE5N,EAAExM,EAAE2P,GAAG,IAAItc,EAAEooB,EAAE9L,GAAGyG,EAAE,GAAGxe,OAAO4U,EAAE6M,SAAS,OAAOzhB,OAAO4U,EAAE8M,IAAI,KAAK1hB,OAAO,MAAMoI,EAAE0b,OAAO,GAAG1b,EAAE2b,OAAO,GAAG3b,GAAG,OAAO3M,EAAEY,SAASmiB,GAAG,IAAIxe,OAAOvE,IAAI+iB,CAAC,CAAC,SAASqF,EAAEjP,GAAG,OAAOlU,OAAOC,KAAKiU,GAAGjR,KAAI,SAAUyE,GAAG,OAAO/H,EAAE,QAAQ+H,GAAG2P,EAAEnD,EAAExM,GAAG,oBAAoB1H,OAAOpF,UAAUkQ,SAAS9O,KAAKqb,IAAI,mBAAmBrX,OAAOpF,UAAUkQ,SAAS9O,KAAKqb,GAAGtM,KAAKC,UAAUkJ,EAAExM,IAAIwM,EAAExM,KAAK,IAAI2P,CAAE,IAAGyE,KAAK,IAAI,CAAC,SAAS+F,EAAE3N,GAAG,OAAOA,EAAEjR,KAAI,SAAUiR,GAAG,OAAOyO,EAAEzO,EAAG,GAAE,CAAC,SAASyO,EAAEzO,GAAG,IAAIxM,EAAEwM,EAAEiO,QAAQhC,QAAQ,qBAAqB,CAAC,oBAAoB,SAAS,CAAC,EAAE,OAAO9I,EAAEA,EAAE,CAAC,EAAEnD,GAAG,CAAC,EAAE,CAACiO,QAAQ9K,EAAEA,EAAE,CAAC,EAAEnD,EAAEiO,SAAS,CAAC,EAAE,CAAChC,QAAQ9I,EAAEA,EAAE,CAAC,EAAEnD,EAAEiO,QAAQhC,SAASzY,MAAM,CAAC,IAAI4b,EAAE,SAASpP,GAAG,IAAIxM,EAAEwM,EAAEqP,MAAMxoB,EAAE,SAASmZ,EAAExM,EAAE2P,GAAG,IAAItc,EAAE,CAAC,oBAAoBsc,EAAE,2BAA2B3P,GAAG,MAAM,CAACyY,QAAQ,WAAW,OAAOjM,IAAI2L,EAAEE,cAAchlB,EAAE,CAAC,CAAC,EAAEqlB,gBAAgB,WAAW,OAAOlM,IAAI2L,EAAEC,sBAAsB/kB,EAAE,CAAC,CAAC,EAAE,CAA1M,MAA4M,IAASmZ,EAAEsP,SAAStP,EAAEsP,SAAS3D,EAAEE,cAAcrY,EAAEwM,EAAEuP,QAAQviB,EAAE,SAASgT,GAAG,IAAIxM,EAAEwM,EAAE0O,WAAWvL,EAAEnD,EAAEuO,OAAO1nB,EAAEmZ,EAAE4O,UAAU5hB,EAAEgT,EAAEwP,cAActF,EAAElK,EAAEyP,eAAenoB,EAAE0Y,EAAE8N,SAAShK,EAAE9D,EAAEuN,UAAUjC,EAAEtL,EAAE0P,MAAMpJ,EAAEtG,EAAEkM,gBAAgBzgB,EAAE,CAACijB,WAAWlb,EAAE+a,OAAOpL,EAAEyL,UAAU/nB,EAAE2oB,cAAcxiB,EAAEyiB,eAAevF,EAAE4D,SAASxmB,EAAEimB,UAAUzJ,EAAEmI,QAAQjM,EAAEiM,QAAQC,gBAAgB5F,EAAEoJ,MAAMpE,EAAEvc,KAAI,SAAUiR,GAAG,OAAO/S,EAAE+S,EAAG,IAAG2P,KAAK,SAAS3P,EAAExM,GAAG,IAAI2P,EAAE2I,EAAEtY,EAAE/H,EAAEqiB,SAAS6B,MAAM9oB,EAAE,WAAW,OAAOumB,EAAE3hB,EAAEA,EAAEikB,MAAMtjB,QAAO,SAAU4T,GAAG,OAAO,IAAIA,EAAE+M,OAAO3kB,EAAEgkB,KAAM,IAAGpM,EAAEmD,EAAE,EAAE,IAAG,UAAM,IAASA,EAAEgJ,UAAUhJ,EAAEgJ,UAAUnM,EAAEmM,WAAW,OAAOtlB,IAAI,IAAImG,EAAE,CAACihB,QAAQjO,EAAE4P,qBAAqBzM,EAAE0M,YAAY,CAAC3D,gBAAgBzgB,EAAEygB,gBAAgBD,QAAQxgB,EAAEwgB,UAAU,OAAOxgB,EAAEgkB,eAAe9E,IAAI3d,GAAE,WAAY,OAAOvB,EAAE+jB,cAAc7E,IAAI3d,GAAE,WAAY,OAAOvB,EAAE+jB,cAAc1E,IAAI9d,EAAEnG,KAAKgZ,MAAK,SAAUG,GAAG,OAAOI,QAAQyK,IAAI,CAACpf,EAAE+jB,cAAcxE,OAAOhe,GAAGgT,GAAI,IAAE,SAAUA,GAAG,OAAOI,QAAQyK,IAAI,CAACpf,EAAE+jB,cAAcxE,OAAOhe,GAAGoT,QAAQ0P,OAAO9P,IAAK,IAAGH,MAAK,SAAUG,GAAG,IAAIxM,EAAEoW,EAAE5J,EAAE,GAAQ,OAALxM,EAAE,GAAUA,EAAE,EAAG,GAAG,GAAG,GAAE,CAACoX,KAAK,SAAS5K,GAAG,OAAOvU,EAAEgkB,eAAe3E,IAAI9d,EAAEgT,EAAE,GAAG,EAAE+P,MAAM,SAAS/P,EAAExM,GAAG,OAAO4Z,EAAE3hB,EAAEA,EAAEikB,MAAMtjB,QAAO,SAAU4T,GAAG,OAAO,IAAIA,EAAE+M,OAAO3kB,EAAEikB,MAAO,IAAGrM,EAAE8L,EAAEtY,EAAE/H,EAAEqiB,SAASiC,OAAO,GAAG,OAAOtkB,CAAC,CAA7mC,CAA+mC0X,EAAEA,EAAE,CAACuM,MAAM,CAAC,CAAC5C,IAAI,GAAG1hB,OAAOoI,EAAE,oBAAoBuZ,OAAO3kB,EAAEgkB,MAAM,CAACU,IAAI,GAAG1hB,OAAOoI,EAAE,gBAAgBuZ,OAAO3kB,EAAEikB,QAAQjhB,OAAOkgB,EAAE,CAAC,CAACwB,IAAI,GAAG1hB,OAAOoI,EAAE,sBAAsB,CAACsZ,IAAI,GAAG1hB,OAAOoI,EAAE,sBAAsB,CAACsZ,IAAI,GAAG1hB,OAAOoI,EAAE,0BAA0BwM,GAAG,CAAC,EAAE,CAACiM,QAAQ9I,EAAEA,EAAEA,EAAE,CAAC,EAAEtc,EAAEolB,WAAW,CAAC,eAAe,sCAAsCjM,EAAEiM,SAASC,gBAAgB/I,EAAEA,EAAE,CAAC,EAAEtc,EAAEqlB,mBAAmBlM,EAAEkM,oBAAoB,OAAO5F,EAAE,CAACuJ,YAAY7iB,EAAEqiB,MAAM7b,EAAEgL,gBAAgB,SAASwB,EAAExM,GAAGxG,EAAEugB,UAAUyB,IAAI,CAACrH,QAAQ3H,EAAElW,QAAQ0J,GAAG,EAAE8Q,WAAW,WAAW,OAAOlE,QAAQyK,IAAI,CAAC7d,EAAEwiB,cAAcvE,QAAQje,EAAEyiB,eAAexE,UAAUpL,MAAK,WAAa,GAAE,GAAGG,EAAEgQ,QAAQ,EAAEC,EAAE,SAASjQ,GAAG,OAAO,SAASxM,EAAE2P,GAAG,OAAO3P,EAAE6Z,SAASL,EAAEhN,EAAE6P,YAAYF,KAAKnc,EAAE2P,GAAGnD,EAAE6P,YAAYE,MAAMvc,EAAE2P,EAAE,CAAC,EAAExU,EAAE,SAASqR,GAAG,OAAO,SAASxM,GAAG,IAAI2P,EAAEzb,UAAUD,OAAO,QAAG,IAASC,UAAU,GAAGA,UAAU,GAAG,CAAC,EAA0D,OAAO4e,EAA7D,CAACuJ,YAAY7P,EAAE6P,YAAYR,MAAMrP,EAAEqP,MAAMhO,UAAU7N,GAAc2P,EAAE6M,QAAQ,CAAC,EAAEE,EAAE,SAASlQ,GAAG,OAAO,SAASxM,EAAE3M,GAAG,IAAI+iB,EAAEpW,EAAEzE,KAAI,SAAUiR,GAAG,OAAOmD,EAAEA,EAAE,CAAC,EAAEnD,GAAG,CAAC,EAAE,CAAC1S,OAAO2hB,EAAEjP,EAAE1S,QAAQ,CAAC,IAAK,IAAG,OAAO0S,EAAE6P,YAAYF,KAAK,CAACtC,OAAOJ,EAAE/Y,KAAK,sBAAsB6D,KAAK,CAACoY,SAASvG,GAAGuC,WAAU,GAAItlB,EAAE,CAAC,EAAEupB,EAAE,SAASpQ,GAAG,OAAO,SAASxM,EAAEoW,GAAG,OAAOxJ,QAAQyK,IAAIrX,EAAEzE,KAAI,SAAUyE,GAAG,IAAIxG,EAAEwG,EAAElG,OAAO4c,EAAEld,EAAEuE,UAAUjK,EAAE0F,EAAEuc,WAAWzF,EAAEjd,EAAEmG,EAAE,CAAC,YAAY,eAAe,OAAO2B,EAAEqR,EAAFrR,CAAK6E,EAAE6N,UAAU,CAAC2O,QAAQ,CAACpP,qBAAqByP,KAAKzP,qBAAqBsJ,EAAE5iB,EAAE6b,EAAEA,EAAE,CAAC,EAAEyG,GAAG9F,GAAI,IAAG,CAAC,EAAEwM,EAAE,SAAStQ,GAAG,OAAO,SAASxM,EAAE2P,EAAEtc,GAAG,OAAOmZ,EAAE6P,YAAYF,KAAK,CAACtC,OAAOJ,EAAE/Y,KAAKzI,EAAE,0BAA0BuU,EAAEqB,WAAWtJ,KAAK,CAACrH,MAAM8C,EAAEmN,eAAewC,GAAGgJ,WAAU,GAAItlB,EAAE,CAAC,EAAE0pB,EAAE,SAASvQ,GAAG,OAAO,SAASxM,EAAE2P,GAAG,OAAOnD,EAAE6P,YAAYF,KAAK,CAACtC,OAAOJ,EAAE/Y,KAAKzI,EAAE,qBAAqBuU,EAAEqB,WAAWtJ,KAAK,CAACrH,MAAM8C,GAAG2Y,WAAU,GAAIhJ,EAAE,CAAC,EAAEkN,EAAE,SAASrQ,GAAG,OAAO,SAASxM,EAAE2P,EAAEtc,GAAG,OAAOmZ,EAAE6P,YAAYF,KAAK,CAACtC,OAAOJ,EAAE/Y,KAAKzI,EAAE,+BAA+BuU,EAAEqB,UAAU7N,GAAGuE,KAAK,CAACwR,WAAWpG,GAAGgJ,WAAU,GAAItlB,EAAE,CAAC,EAAE2pB,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE,SAASC,EAAE3Q,EAAExM,EAAE3M,GAAG,IAAI+iB,EAAE5c,EAAE,CAACqiB,MAAMrP,EAAEuP,OAAO/b,EAAEsa,SAAS,CAACC,QAAQ,EAAE4B,KAAK,EAAEI,MAAM,IAAInB,UAAU,CAACC,KAAK,SAAS7O,GAAG,OAAO,IAAII,SAAQ,SAAU5M,GAAG,IAAI2P,EAAE,IAAIyN,eAAezN,EAAE0N,KAAK7Q,EAAEqN,OAAOrN,EAAE8M,KAAI,GAAIhhB,OAAOC,KAAKiU,EAAEiM,SAAS7d,SAAQ,SAAUoF,GAAG,OAAO2P,EAAE2N,iBAAiBtd,EAAEwM,EAAEiM,QAAQzY,GAAI,IAAG,IAAI3M,EAAE+iB,EAAE,SAAS5J,EAAEnZ,GAAG,OAAOkqB,YAAW,WAAY5N,EAAE6N,QAAQxd,EAAE,CAACiZ,OAAO,EAAE3M,QAAQjZ,EAAEynB,YAAW,GAAK,GAAE,IAAItO,EAAE,EAAEhT,EAAE4c,EAAE5J,EAAE6N,eAAe,sBAAsB1K,EAAE8N,mBAAmB,WAAW9N,EAAE+N,WAAW/N,EAAEgO,aAAQ,IAAStqB,IAAIuqB,aAAapkB,GAAGnG,EAAE+iB,EAAE5J,EAAEgO,gBAAgB,kBAAkB,EAAE7K,EAAEkO,QAAQ,WAAW,IAAIlO,EAAEsJ,SAAS2E,aAAapkB,GAAGokB,aAAavqB,GAAG2M,EAAE,CAACsM,QAAQqD,EAAEmO,cAAc,yBAAyB7E,OAAOtJ,EAAEsJ,OAAO6B,YAAW,IAAK,EAAEnL,EAAEoO,OAAO,WAAWH,aAAapkB,GAAGokB,aAAavqB,GAAG2M,EAAE,CAACsM,QAAQqD,EAAEmO,aAAa7E,OAAOtJ,EAAEsJ,OAAO6B,YAAW,GAAI,EAAEnL,EAAE0L,KAAK7O,EAAEjI,KAAM,GAAE,GAAGwW,QAAQ3E,EAAE8G,EAAE,CAACc,MAAM,SAASxR,EAAExM,GAAG,OAAOgd,GAAG5G,GAAGphB,QAAQgpB,MAAMxR,EAAExM,GAAG4M,QAAQC,SAAS,EAAEmO,KAAK,SAASxO,EAAExM,GAAG,OAAOid,GAAG7G,GAAGphB,QAAQgmB,KAAKxO,EAAExM,GAAG4M,QAAQC,SAAS,EAAE7Y,MAAM,SAASwY,EAAExM,GAAG,OAAOhL,QAAQhB,MAAMwY,EAAExM,GAAG4M,QAAQC,SAAS,IAAIoP,eAAe3L,IAAI0L,cAAc1L,EAAE,CAACuH,cAAa,IAAKqD,WAAWpnB,EAAE,CAAC6jB,OAAO,CAACjB,EAAE,CAAC/gB,IAAI,GAAGiC,OAAO,SAAS,KAAKA,OAAO4U,KAAK8D,OAAOyJ,UAAUwB,EAAE,UAAUC,IAAI,CAACrH,QAAQ,UAAU7d,QAAQ,SAASwlB,SAAS3D,EAAEC,uBAAuB,OAAOwD,EAAEjM,EAAEA,EAAEA,EAAE,CAAC,EAAEnW,GAAGnG,GAAG,CAAC,EAAE,CAACmpB,QAAQ,CAAC9Q,OAAOgR,EAAEtP,qBAAqBwP,EAAEqB,gBAAgBvB,EAAEwB,6BAA6BtB,EAAEuB,cAAc1B,EAAEvP,UAAU,SAASV,GAAG,OAAO,SAASxM,GAAG,OAAO7E,EAAEqR,EAAFrR,CAAK6E,EAAE,CAACwc,QAAQ,CAAC9Q,OAAOqR,EAAE3P,qBAAqByP,EAAEnQ,YAAYoQ,IAAI,CAAC,KAAK,CAAC,OAAOK,EAAE7mB,QAAQ,SAAS6mB,CAAE,CAAj7and,yJCO5E,SAASoe,EAAUC,EAAWpE,GACnC,IAAIoE,EAIF,MAAM,IAAIlqB,MAAM,mBAKpB,CCjBO,IAAImqB,GAAoC,IAAAC,eAAc,MCEtD,SAASC,IACd,IAAI9S,GAAS,IAAA+S,YAAWH,GAExB,OADAF,EAAqB,OAAX1S,GACHA,CACT,CCAO,IAAIgT,EAA8C,oBAAX1H,OAAyB,EAAA2H,gBAAkB,EAAAC,oBCNlF,SAASC,EAAoBtb,GAClC,IAAIub,EAAcC,EAAaC,EAC/B,OAAO,IAAI,gBAAkCzb,EAAO,CAAC,CACnDrG,MAAwC,QAAhC4hB,EAAevb,EAAMrG,aAAoC,IAAjB4hB,EAA0BA,EAAe,GACzFzhB,KAAqC,QAA9B0hB,EAAcxb,EAAMlG,YAAkC,IAAhB0hB,EAAyBA,EAAc,EACpFthB,YAA0D,QAA5CuhB,EAAqBzb,EAAM9F,mBAAgD,IAAvBuhB,EAAgCA,EAAqB,GACvHC,KAAM,GACNjS,OAAQ,EACRkS,QAAS,EACTplB,OAAQ,GACRqlB,kBAAkB,EAClBhY,uBAAuB,EACvBZ,iBAAkB,EAClBnQ,MAAOmN,EAAMnN,QACX,CAEFgpB,gBAAgB,GAEpB,CCnBA,SAASC,EAAQtM,GAAkC,OAAOsM,EAAU,mBAAqB7I,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAGsM,EAAQtM,EAAM,CAC/U,SAASuM,EAAQzL,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAASmnB,EAAchN,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAIwrB,EAAQhnB,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAOgqB,EAAgBjN,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAWgO,EAAQhnB,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAASiN,EAAgB5M,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnBR,EAAQO,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjBR,EAAQ5U,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnVK,CAAaptB,EAAK,UAAW,MAAwB,WAAjBwsB,EAAQ1pB,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1EuqB,CAAevqB,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAIpO,SAASoN,EAAsBC,GACpC,IAAIrQ,EAASqQ,EAAYC,YACrB9a,EAEJ6a,EAAYE,cAEZzB,EAAoB9O,EAAOxM,OACvBgd,EAAgBH,EAAYI,mBAAmBjlB,KAAI,SAAUklB,GAC/D,IAAIC,EAAkBD,EAAaE,UAAYP,EAAYQ,aAAerb,EAAUsZ,EAAoB4B,EAAa1Q,OAAOxM,OAC5H,OAAOmc,EAAcA,EAAc,CAAC,EAAGe,GAAe,CAAC,EAAG,CAExDlb,QAASkb,EAAalb,SAAWmb,GAErC,IACA,MAAO,CACLnb,QAASA,EACTgb,cAAeA,EAEnB,CCxBO,IAAIM,GAA4B,IAAAtC,eAAc,MCE9C,SAASuC,IACd,IAAIzsB,GAAU,IAAAoqB,YAAWoC,GAEzB,OADAzC,EAAsB,OAAZ/pB,GACHA,CACT,CCPA,SAAS0sB,EAAeC,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3BC,CAAgBD,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gBG,CAAsBV,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAOwL,EAAkBxL,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAOuuB,EAAkBxL,EAAGuL,EAAS,CAF7TE,CAA4Bb,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvDuuB,EAAoB,CAG7J,SAASF,EAAkBZ,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAO3K,SAASwP,IACd,IAAIrW,EAAS8S,IACTwD,EAAclB,IAIhBmB,EAAalB,GAHC,IAAAmB,WAAS,WACrB,OAAO/B,EAAsB6B,EAC/B,IACuC,GACvCG,EAAgBF,EAAW,GAC3BG,EAAmBH,EAAW,GAoBhC,OAnBA,IAAArD,YAAU,WACR,SAASyD,IACP,IAAI9c,EAAUyc,EAAY1B,aAKV,OAAZ/a,GACF6c,EAAiB,CACf7c,QAASA,EACTgb,cAAeyB,EAAYxB,oBAGjC,CAEA,OADA9U,EAAOhX,YAAY,SAAU2tB,GACtB,WACL3W,EAAOpW,eAAe,SAAU+sB,EAClC,CACF,GAAG,CAAC3W,EAAQsW,IACLG,CACT,CCvCA,SAAS,EAAenB,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,EAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,EAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,EAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAM3K,SAAS+P,IACd,IAAI5W,EAAS8S,IACTwD,EAAclB,IACdH,EAAUqB,EAAYpB,aAIxBqB,EAAa,GAHC,IAAAC,WAAS,WACrB,OAAOxW,EAAO6W,YAChB,IACuC,GACvCC,EAAUP,EAAW,GACrBQ,EAAkBR,EAAW,GAC3BS,EAAeF,EAAQ7B,GACvBgC,GAAa,IAAAC,cAAY,SAAUC,GACrCnX,EAAOiX,WAAWE,EACpB,GAAG,CAACnX,IACAoX,GAAkB,IAAAF,cAAY,SAAUG,GAC1Cf,EAAYc,gBAAgBC,EAC9B,GAAG,CAACf,IAUJ,OATA,IAAApD,YAAU,WACR,SAASyD,IACPI,EAAgB/W,EAAO6W,aACzB,CAEA,OADA7W,EAAOhX,YAAY,SAAU2tB,GACtB,WACL3W,EAAOpW,eAAe,SAAU+sB,EAClC,CACF,GAAG,CAAC3W,IACG,CACL8W,QAASA,EACTG,WAAYA,EACZD,aAAcA,EACdI,gBAAiBA,EAErB,CCpCO,SAASE,IACd,IAAIC,EAAO/uB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC9EgvB,EAAaD,EAAKC,WAChBxX,EAAS8S,IACT2E,EAAkBb,IACpBE,EAAUW,EAAgBX,QAC1BG,EAAaQ,EAAgBR,WAC7BD,EAAeS,EAAgBT,aAC/BI,EAAkBK,EAAgBL,gBAChCM,EAAoBrB,IACtBxc,EAAU6d,EAAkB7d,QAC5Bgb,EAAgB6C,EAAkB7C,cAChC8C,GAAM,IAAAT,cAAY,WACpB,IAAK,IAAIU,EAAOpvB,UAAUD,OAAQsvB,EAAc,IAAIhvB,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACtFD,EAAYC,GAAQtvB,UAAUsvB,GAGhC,OADA9X,EAAO2X,IAAI5uB,MAAMiX,EAAQ6X,GAClB,WACL7X,EAAO+X,MAAMhvB,MAAMiX,EAAQ6X,EAC7B,CACF,GAAG,CAAC7X,IACAgY,GAAU,IAAAd,cAAY,WACxBlX,EAAOgY,SACT,GAAG,CAAChY,IAWJ,OAVAgT,GAA0B,WACxB,GAAIwE,EAAY,CACd,IAAIS,EAAU,WAAoB,EAElC,OADAjY,EAAOhX,YAAY,QAASivB,GACrB,WACL,OAAOjY,EAAOpW,eAAe,QAASquB,EACxC,CACF,CACA,OAAO,WAAa,CACtB,GAAG,CAACjY,EAAQwX,IACL,CACL3d,QAASA,EACTgb,cAAeA,EACfiC,QAASA,EACTG,WAAYA,EACZD,aAAcA,EACdI,gBAAiBA,EACjBO,IAAKA,EACLK,QAASA,EACTzK,OAAQvN,EAAOuN,OACfjlB,MAAO0X,EAAO1X,MAElB,CCnDO,SAAS4vB,EAAwBX,GACtC,IAAI9mB,EAAO8mB,EAAK9mB,KACd0nB,EAAiBZ,EAAKa,UAExB,MAAO,CAAC,qDAAsD3nB,EAAM,YADnC,IAAnB0nB,GAAoCA,EACsC,aAAe,IAAIzP,KAAK,GAClH,CACO,SAAS2P,IACd,IAAK,IAAIT,EAAOpvB,UAAUD,OAAQ+vB,EAAU,IAAIzvB,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAClFQ,EAAQR,GAAQtvB,UAAUsvB,GAE5B,IAAIS,EAAQD,EAAQzoB,KAAI,SAAU2oB,GAChC,OAAON,EAAwBM,EACjC,IAAG9P,KAAK,MACR,OAAO,SAAU6F,GACf,MAAO,CAACA,EAAS,sBAAsBriB,OAAOqsB,IAAQrrB,OAAOiR,SAASuK,KAAK,OAC7E,CACF,CChBO,SAAS+P,IAAQ,CCCjB,SAASC,EAAeC,EAAWC,GACxC,QAAkB3xB,IAAd0xB,GAAgD,mBAAdA,EACpC,MAAM,IAAIlwB,MAAM,mDAAmDyD,QCHzCic,EDG8DwQ,ECFnF/rB,OAAOpF,UAAUkQ,SAAS9O,KAAKuf,GAAQrf,MAAM,GAAI,IDE8C,UAAUoD,OAAO0sB,ICHlH,IAAuBzQ,CDK9B,CELA,SAAS,EAAQd,GAAkC,OAAO,EAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,EAAQA,EAAM,CAC/U,SAAS,EAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,EAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,EAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,EAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,EAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,EAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,EAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,EAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,EAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAI3O,IAAIwR,EAAYR,EAAoC,CAClD5nB,KAAM,QACN2nB,WAAW,IAiEb,EAzDmB,SAAsBU,GACvC,IAAIC,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAEpF,OADAC,EAAeI,EAAUD,KAClB,SAAUG,GACf,MAAO,CACLC,OAAQ,YACRC,KAAM,SAAcC,GAClB,IAAIC,EAAwBD,EAAYC,sBACxCN,EAAS,EAAc,EAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBA,KACrB,EACN,EACAE,OAAQ,SAAgBC,GACtB,IAAIH,EAAwBG,EAAcH,sBAC1CN,EAAS,EAAc,EAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBE,IAAiB,CAAC,EAAG,CACtFH,sBAAuBA,KACrB,EACN,EACAI,QAAS,WACPT,GACF,EACAU,eAAgB,SAAwBC,EAAaH,GACnD,OAAO,EAAc,EAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvDjf,MAAO3T,KAAKuyB,qBAAqBE,IAErC,EACAF,qBAAsB,SAA8B9B,GAClD,IAAI1d,EAAU0d,EAAK1d,QACjBhC,EAAQ0f,EAAK1f,MACf,OAAKgC,EAaE,CACL9H,YAAa8H,EAAQ9H,YACrBuP,OAAQzH,EAAQyH,OAChBqY,aAAc9f,EAAQ8f,aACtBC,mBAA6D,IAAvC/f,EAAQggB,4BAA8ChgB,EAAQggB,2BAA6B,GAAKhgB,EAAQ8f,eAAiB9f,EAAQyH,OACvJkS,QAAS3Z,EAAQ2Z,QACjB7hB,KAAMkI,EAAQlI,KACdkJ,iBAAkBhB,EAAQgB,iBAC1BrJ,MAAOqI,EAAQrI,MACfwnB,aAAcA,GArBP,CACLjnB,YAAa8F,EAAM9F,YACnBuP,OAAQ,EACRqY,kBAAc1yB,EACd2yB,eAAe,EACfpG,QAAS,EACT7hB,KAAMkG,EAAMlG,MAAQ,EACpBkJ,kBAAmB,EACnBrJ,MAAOqG,EAAMrG,OAAS,GACtBwnB,aAAcA,EAcpB,EAEJ,CACF,ECzEA,SAAS,EAAQ3R,GAAkC,OAAO,EAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,EAAQA,EAAM,CAY/U,IAAIyS,EAAMltB,OAAOpF,UAAUyf,eACpB,SAAS8S,EAAOC,EAAKC,EAAKC,GAE/B,GAAIA,SAA0CA,EAAQF,EAAKC,GACzD,OAAO,EAIT,IAAI3T,EACApe,EACJ,GAAI8xB,IAAQC,EAAK,OAAO,EACxB,GAAID,GAAOC,IAAQ3T,EAAO0T,EAAIhpB,eAAiBipB,EAAIjpB,YAAa,CAC9D,GAAIsV,IAASmH,KAAM,OAAOuM,EAAIG,YAAcF,EAAIE,UAChD,GAAI7T,IAAS8T,OAAQ,OAAOJ,EAAItiB,aAAeuiB,EAAIviB,WACnD,GAAI4O,IAASzd,MAAO,CAClB,IAAKX,EAAM8xB,EAAIzxB,UAAY0xB,EAAI1xB,OAC7B,KAAOL,KAAS6xB,EAAOC,EAAI9xB,GAAM+xB,EAAI/xB,GAAMgyB,KAE7C,OAAgB,IAAThyB,CACT,CACA,IAAKoe,GAAyB,WAAjB,EAAQ0T,GAAmB,CAGtC,IAAK1T,KAFLpe,EAAM,EAEO8xB,EAAK,CAChB,GAAIF,EAAIlxB,KAAKoxB,EAAK1T,MAAWpe,IAAQ4xB,EAAIlxB,KAAKqxB,EAAK3T,GAAO,OAAO,EACjE,KAAMA,KAAQ2T,KAASF,EAAOC,EAAI1T,GAAO2T,EAAI3T,GAAO4T,GAAU,OAAO,CACvE,CACA,OAAOttB,OAAOC,KAAKotB,GAAK1xB,SAAWL,CACrC,CACF,CAGA,OAAO8xB,GAAQA,GAAOC,GAAQA,CAChC,CC5CO,IAAII,GAA0C,IAAAxH,eAAc,MCC5D,SAASyH,IACd,OAAO,IAAAvH,YAAWsH,EACpB,CCJA,SAAS,EAAe/E,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,EAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,EAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,EAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAK3K,SAAS0T,EAAezuB,GAC7B,IAGEyqB,EAAa,GAHC,IAAAC,WAAS,WACrB,OAAO1qB,CACT,IACuC,GACvC0uB,EAAcjE,EAAW,GACzBkE,EAAiBlE,EAAW,GAI9B,OAHKwD,EAAOS,EAAa1uB,IACvB2uB,EAAe3uB,GAEV0uB,CACT,CCfO,SAASE,EAAUnD,GACxB,IAAIiB,EAASjB,EAAKiB,OAChBmC,EAAcpD,EAAKoD,YACnBC,EAAQrD,EAAKqD,MACbC,EAAYtD,EAAKsD,UACfC,GAAe,IAAAC,QAAOH,IAC1B,IAAA1H,YAAU,WACR4H,EAAaE,QAAUJ,CACzB,GAAG,CAACA,IACJ,IAAIK,GAAgB,IAAAF,QAAOvC,IAC3B,IAAAtF,YAAU,WACR+H,EAAcD,QAAUxC,CAC1B,GAAG,CAACA,IACJ,IAAI0C,GAAkB,IAAAH,QAAO,MACzBI,EAAuBN,IAAcF,EAAYS,aAAaC,SAAS7C,GACvExY,EAAS8S,IAMbE,GAA0B,WACxB,IAAIsI,EAAiBL,EAAcD,QACnC,SAASO,IACHvb,EAAOwb,uBACXb,EAAYc,cAAc,CAACH,GAC7B,CAGgC,OAA5BJ,EAAgBF,QACbG,GACHR,EAAYe,WAAW,CAAClD,KAO1BtG,aAAagJ,EAAgBF,SAQTjB,EAAOa,EAAOE,EAAaE,WAO7CO,IACAZ,EAAYe,WAAW,CAAClD,MAG5B,OAAO,WAGL0C,EAAgBF,QAAUnJ,WAAW0J,EACvC,CACF,GAAG,CAACZ,EAAanC,EAAQ2C,EAAsBnb,EAAQ4a,IACnDO,GACFR,EAAYe,WAAW,CAAClD,GAE5B,CCtEA,SAAS,EAAQnR,GAAkC,OAAO,EAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,EAAQA,EAAM,CAC/U,IAAIsU,EAAY,CAAC,wBAAyB,gBACxCC,EAAa,CAAC,gBAChB,SAAS,EAAetG,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,EAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,EAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,EAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAGlL,SAAS,EAAQsB,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,EAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,EAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,EAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,EAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,EAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,EAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,EAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,EAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAASwU,GAAyBjW,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN8U,CAA8BlW,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAUpe,SAASgV,GAAa5D,GAC3B,IAAIwC,EAAQpyB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC7EyzB,EAA6BzzB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAClG0zB,EAAgB5B,IAChBta,EAAS8S,IACT6H,EAAcvF,IACd+G,EAAc5B,EAAeK,GAC7BwB,EAAmC7B,EAAe0B,GAClDI,GAAoB,IAAAtB,SAAO,GAC3BuB,GAAyB,IAAAvB,QAAO,MAChCvC,GAAS,IAAA+D,UAAQ,WA2CnB,OAAO,EAAc,EAAc,CAAC,EA1CjBnE,GAAU,SAAUoE,EAAgBC,GAKrD,GAAIA,EACFJ,EAAkBrB,SAAU,OAc9B,GAAIqB,EAAkBrB,QAAS,CACDwB,EAAepD,sBAC1BoD,EAAexD,aADhC,IAEEU,EAAcmC,GAAyBW,EAAgBb,GAMpD5B,EAAOL,EAAa4C,EAAuBtB,SAAS,SAAUltB,EAAGC,GACpE,OAAQD,aAA6B,EAASA,EAAEkD,eAAiB0rB,WAAa3uB,aAA6B,EAASA,EAAEiD,eAAiB0rB,QACzI,MAEEnZ,EAASmW,GACT4C,EAAuBtB,QAAUtB,EAErC,CACF,IAAG,WAGD2C,EAAkBrB,SAAU,CAC9B,GACuC2B,CAAaR,IAAeC,EACrE,GAAG,CAAChE,EAAW+D,EAAaC,IACxBQ,GAAY,IAAApG,WAAS,WACrB,GAAIgC,EAAOa,qBAAsB,CAC/B,IAAIwD,EAEAxY,EAASsW,EAAYhG,YACrBmC,EAAU6D,EAAYmC,iBAAiB,CAAC,GAAGnC,EAAYzF,cAC3D7Q,EAAOxM,OAAwE,QAA9DglB,EAAwBrE,EAAOuE,iCAAiE,IAA1BF,OAAmC,EAASA,EAAsBj0B,KAAK4vB,EAAQnU,EAAOxM,MAAO,CAClLif,QAASA,MACJzS,EAAOxM,MACd,IAAImlB,EAAwBvI,EAAsBkG,GAChD9gB,EAAUmjB,EAAsBnjB,QAChCgb,EAAgBmI,EAAsBnI,cAKpCoI,EAAwBzE,EAAOa,qBAAqB,CACpDhV,OAAQA,EACR1L,OAAQgiB,EACRvB,sBAAuBpZ,EACvBnG,QAASA,EACTgb,cAAeA,EACfhd,MAAOwM,EAAOxM,MACd6hB,YAAa1Z,EAAO0Z,YACpBwD,gBAAiBld,EAAOkd,gBACxBC,UAAWxC,EAAYwC,UACvBC,eAAgB,CACdC,gBAAmC,YAAlBrd,EAAOuN,QAE1BA,OAAQvN,EAAOuN,OACfjlB,MAAO0X,EAAO1X,QAED20B,EAAsBjE,aAEvC,OADgB6C,GAAyBoB,EAAuBrB,EAElE,CACA,MAAO,CAAC,CACV,IACArF,EAAa,EAAeqG,EAAW,GACvC/kB,EAAQ0e,EAAW,GACnBhT,EAAWgT,EAAW,GAOxB,OANAmE,EAAU,CACRlC,OAAQA,EACRmC,YAAaA,EACbC,MAAOuB,EACPtB,UAAW1c,QAAQ+d,KAEdrkB,CACT,gBC/HO,SAASylB,GAAelE,EAAuBzgB,EAAQme,GAC5D,IAAIzS,EAAS1L,EAAOgc,YACpB,MAAO,CACLmC,QAASA,EACTzS,OAAQA,EACR1L,OAAQA,EACRygB,sBAAuBA,EACvBvhB,MAAOwM,EAAOxM,MACd6hB,YAAaN,EAAsBM,YACnCwD,gBAAiB9D,EAAsB8D,gBACvCC,UAAWxkB,EAAOwkB,UAClBtI,cAAe,GACfuI,eAAgB,CACdC,gBAAkD,YAAjCjE,EAAsB7L,QAEzCA,OAAQ6L,EAAsB7L,OAC9BjlB,MAAO8wB,EAAsB9wB,MAEjC,CACO,SAASi1B,GAAiBnE,EAAuBzgB,GACtD,IAAIkB,EAAUlB,EAAOic,aACrB,MAAO,CACLvQ,OAAQ1L,EAAOgc,YACfhc,OAAQA,EACRygB,sBAAuBA,EACvBvf,QAASA,EACTgb,cAAelc,EAAOmc,mBACtBjd,MAAOgC,EAAQyC,OACfod,YAAaN,EAAsBM,YACnCwD,gBAAiB9D,EAAsB8D,gBACvCC,UAAWxkB,EAAOwkB,UAClBC,eAAgB,CACdC,gBAAkD,YAAjCjE,EAAsB7L,QAEzCA,OAAQ6L,EAAsB7L,OAC9BjlB,MAAO8wB,EAAsB9wB,MAEjC,CChCO,SAASk1B,GAAmBC,GACjC,IAAIlG,EAAO/uB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAC3Ek1B,SAAU,WAEV,GAEFA,EAAWnG,EAAKmG,SAElB,MAAsB,oBAAXpS,OACFoS,IAIFD,EAAS,CACdnS,OAAQA,QAEZ,CCpBA,SAASqS,GAAerF,EAASc,EAAuBwE,GACtD,IAAIzE,EAAcmE,GAAelE,EAAuBA,EAAsByE,UAAWzE,EAAsB0E,iBAC/GxF,EAAQppB,SAAQ,SAAUspB,GACxB,IAAIQ,EAAe,CAAC,EACpB,GAAIR,EAAOa,qBAAsB,CAC/B,IAAIK,EAAclB,EAAOa,qBAAqBF,GAC1CO,GAAeA,EAAYV,eAE7BA,EAAeU,EAAYV,aAE/B,CAGA,IAAI5qB,EAASxB,OAAOC,KAAKmsB,GAAc9rB,QAAO,SAAUjD,GACtD,YAA6BhD,IAAtB+xB,EAAa/uB,EACtB,IACA2zB,EAAQtF,QAAQlvB,KAAK,CACnBrB,KAAMywB,EAAOS,OACb8E,WAAYvF,EAAOwF,aACnB5vB,OAAQA,IAEY,cAAlBoqB,EAAOS,QACT0E,GAAenF,EAAO4C,aAAchC,EAAuBwE,EAE/D,GACF,CAoBO,SAASK,KACd,OAAO,SAAUC,GACf,IAAI9E,EAAwB8E,EAAM9E,sBAC9BwE,EAAU,CACZtF,QAAS,IAEP6F,EAAmBC,SAASC,cAAc,QAC1CC,EAAUF,SAASG,cAAc,QAErC,OADAJ,EAAiB1tB,KAAO,wBACjB,CACL+tB,cAAe,WAA0B,EACzCC,UAAW,WAET5M,YAAW,WACT,IAAIpnB,EAAS2uB,EAAsB3uB,OACnCmzB,EAAQc,GAAKj0B,EAAOkmB,aAAelmB,EAAOkmB,YAAYtC,UAAY5jB,EAAOkmB,YAAYtC,UAAUviB,MAAQrB,EAAOk0B,IAC9GhB,GAAevE,EAAsByE,UAAUzC,aAAchC,EAAuBwE,GACpFO,EAAiBvd,QAAUjJ,KAAKC,UAAUgmB,GAC1CU,EAAQM,YAAYT,EACtB,GAAG,EACL,EACAU,QAAS,WAAoB,EAC7BC,YAAa,WACXX,EAAiBY,QACnB,EAEJ,CACF,gBCzEA,SAAS,GAAQ1X,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAE/U,SAAS2X,GAAkBhY,EAAQ4T,GAAS,IAAK,IAAIxyB,EAAI,EAAGA,EAAIwyB,EAAMryB,OAAQH,IAAK,CAAE,IAAI62B,EAAarE,EAAMxyB,GAAI62B,EAAWxY,WAAawY,EAAWxY,aAAc,EAAOwY,EAAWtY,cAAe,EAAU,UAAWsY,IAAYA,EAAWvY,UAAW,GAAM9Z,OAAO2d,eAAevD,EAAQ,GAAeiY,EAAWh1B,KAAMg1B,EAAa,CAAE,CAE5U,SAAS,GAAgB5X,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAAM,GAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAC3O,SAAS,GAAelgB,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAI5H,IAAIi1B,GAAiB,SAAwBC,GACvCA,IAGF7T,OAAO8S,SAASe,MAAQA,EAE5B,EACIC,GAA8B,WAKhC,SAASA,EAAe7H,GACtB,IAAI8H,EAAQv4B,KACRw4B,EAAc/H,EAAK+H,YACrBC,EAAkBhI,EAAKiI,WACvBA,OAAiC,IAApBD,EAA6B,IAAMA,EAChDpC,EAAY5F,EAAK4F,UACjBsC,EAAWlI,EAAKkI,SAChBC,EAAcnI,EAAKmI,YACnBC,EAAQpI,EAAKoI,MACbnG,EAAUjC,EAAKiC,QACfpwB,EAAOmuB,EAAKnuB,MA9BlB,SAAyBgH,EAAUwvB,GAAe,KAAMxvB,aAAoBwvB,GAAgB,MAAM,IAAI/3B,UAAU,oCAAwC,CA+BpJg4B,CAAgB/4B,KAAMs4B,GACtB,GAAgBt4B,KAAM,mBAAe,GACrC,GAAgBA,KAAM,kBAAc,GACpC,GAAgBA,KAAM,kBAAc,GACpC,GAAgBA,KAAM,gBAAY,GAClC,GAAgBA,KAAM,mBAAe,GACrC,GAAgBA,KAAM,kBAAc,GACpC,GAAgBA,KAAM,cAAc,GACpC,GAAgBA,KAAM,cAAc,GACpC,GAAgBA,KAAM,4BAA6B,GACnD,GAAgBA,KAAM,cAAU,GAChC,GAAgBA,KAAM,gBAAY,GAClC,GAAgBA,KAAM,aAAS,GAC/BA,KAAKw4B,YAAcA,EACnBx4B,KAAKg5B,gBAAa74B,EAClBH,KAAK04B,WAAaA,EAClB14B,KAAKi5B,WAAa5C,EAClBr2B,KAAK24B,SAAWA,EAChB34B,KAAK44B,YAAcA,EACnB54B,KAAKk5B,OAASL,EACd74B,KAAKm5B,SAAWzG,EAChB1yB,KAAKo5B,MAAQ92B,EACbo0B,IAAmB,SAAUU,GAC3B,IAAI5S,EAAS4S,EAAM5S,OACf6T,EAAQE,EAAMC,aAAeD,EAAMC,YAAYD,EAAM5O,QACzDyO,GAAeC,GACfE,EAAMc,0BAA4B7U,EAAO8U,QAAQ73B,MACnD,GACF,CAzDF,IAAsBq3B,EAAaS,EAAYC,EAuM7C,OAvMoBV,EA8DPR,EA9DoBiB,EA8DJ,CAAC,CAC5Bp2B,IAAK,OACL6B,MAAO,WACL,OAAOhF,KAAK24B,SAAS,CACnBc,SAAU,GACVC,SAAU15B,KAAK44B,eAEnB,GAKC,CACDz1B,IAAK,QACL6B,MAAO,SAAe20B,GACpB,IAAIC,EAAS55B,KACb02B,IAAmB,SAAUmD,GAC3B,IAAIrV,EAASqV,EAAMrV,OACfsC,EAAM8S,EAAOvD,UAAUsD,GACvBtB,EAAQuB,EAAOpB,aAAeoB,EAAOpB,YAAYmB,GACjDC,EAAOZ,YACT5N,aAAawO,EAAOZ,YAEtBY,EAAOZ,WAAajO,YAAW,WAC7BqN,GAAeC,GACXuB,EAAOE,YAAYhT,KACjB8S,EAAOR,MACTQ,EAAOR,MAAMtS,GAEbtC,EAAO8U,QAAQS,UAAUJ,EAAYtB,GAAS,GAAIvR,GAEpD8S,EAAOP,0BAA4B7U,EAAO8U,QAAQ73B,QAEpDm4B,EAAOI,YAAa,EACpBJ,EAAOZ,gBAAa74B,CACtB,GAAGy5B,EAAOlB,WACZ,GACF,GAMC,CACDv1B,IAAK,WACL6B,MAAO,SAAkB2xB,GACvB,IAAIsD,EAASj6B,KACTA,KAAKk5B,QACPl5B,KAAKk5B,QAAO,WACVvC,EAASsD,EAAOtQ,OAClB,IAEF3pB,KAAKk6B,YAAc,WACbD,EAAOjB,aACT5N,aAAa6O,EAAOjB,YACpBiB,EAAOjB,gBAAa74B,GAEtB85B,EAAOD,YAAa,EAIpBrD,EAASsD,EAAOtQ,OAClB,EACA+M,IAAmB,SAAUyD,GACdA,EAAM3V,OACZ4V,iBAAiB,WAAYH,EAAOC,YAC7C,GACF,GASC,CACD/2B,IAAK,YACL6B,MAAO,SAAmB20B,GACxB,OAAO35B,KAAKi5B,WAAW,CACrBQ,SAAU,GACVE,WAAYA,EACZD,SAAU15B,KAAK44B,eAEnB,GAKC,CACDz1B,IAAK,UACL6B,MAAO,WACL,IAAIq1B,EAASr6B,KACTA,KAAKm5B,UACPn5B,KAAKm5B,WAEPn5B,KAAKs6B,YAAa,EAClB5D,IAAmB,SAAU6D,GAC3B,IAAI/V,EAAS+V,EAAM/V,OACf6V,EAAOH,aACT1V,EAAOgW,oBAAoB,WAAYH,EAAOH,YAElD,IACIl6B,KAAKg5B,YACP5N,aAAaprB,KAAKg5B,YAEpBh5B,KAAK+pB,MAAM,CAAC,EACd,GACC,CACD5mB,IAAK,QACL6B,MAAO,WACLhF,KAAKs6B,YAAa,CACpB,GACC,CACDn3B,IAAK,cACL6B,MAAO,SAAqB8hB,GAC1B,IAAI2T,EAASz6B,KACb,OAAO02B,IAAmB,SAAUgE,GAClC,IAAIlW,EAASkW,EAAMlW,OAMfmW,IAAgCF,EAAOH,YAAcG,EAAOpB,4BAA8B7U,EAAO8U,QAAQ73B,QAC7G,OAGGg5B,EAAOT,YAERW,GAEA7T,IAAQtC,EAAOkV,SAASkB,IAE5B,GACF,IArM8DrB,GAAYrB,GAAkBY,EAAYp4B,UAAW64B,GAAiBC,GAAatB,GAAkBY,EAAaU,GAAc1zB,OAAO2d,eAAeqV,EAAa,YAAa,CAAElZ,UAAU,IAuMrP0Y,CACT,CA3LkC,GA4LnB,SAASuC,KACtB,IAAIC,EAAQp5B,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC/Eq5B,EAAkBD,EAAMzE,UACxBA,OAAgC,IAApB0E,EAA6B,SAAUC,GACjD,IAAIvB,EAAWuB,EAAMvB,SACnBE,EAAaqB,EAAMrB,WACnBD,EAAWsB,EAAMtB,SACf7S,EAAW6S,EAAS7S,SACtBoU,EAAWvB,EAASuB,SACpBC,EAAiBxB,EAASyB,KAC1BA,OAA0B,IAAnBD,EAA4B,GAAKA,EACxCE,EAAW1B,EAAS0B,SACpBC,EAAO3B,EAAS2B,KACdC,EAAc7B,EAAS3oB,UAAU6oB,GACjC4B,EAA0B,KAATJ,EAAc,GAAK,IAAI/1B,OAAO+1B,GAGnD,OAAKG,EAGE,GAAGl2B,OAAOyhB,EAAU,MAAMzhB,OAAO61B,GAAU71B,OAAOm2B,GAAgBn2B,OAAOg2B,EAAU,KAAKh2B,OAAOk2B,GAAal2B,OAAOi2B,GAFjH,GAAGj2B,OAAOyhB,EAAU,MAAMzhB,OAAO61B,GAAU71B,OAAOm2B,GAAgBn2B,OAAOg2B,GAAUh2B,OAAOi2B,EAGrG,EAAIN,EACJS,EAAiBV,EAAMnC,SACvBA,OAA8B,IAAnB6C,EAA4B,SAAUC,GAC/C,IAAIhC,EAAWgC,EAAMhC,SACnBC,EAAW+B,EAAM/B,SAWnB,OAAOD,EAAShV,MAAMiV,EAASxgB,OAAOlX,MAAM,GAAI,CAC9C05B,WAAY,IAEhB,EAAIF,EACJG,EAAmBb,EAAMpC,WACzBA,OAAkC,IAArBiD,EAA8B,IAAMA,EACjDnD,EAAcsC,EAAMtC,YACpBoD,EAAoBd,EAAMlC,YAC1BA,OAAoC,IAAtBgD,EAA+B,WAC3C,OAAOlF,IAAmB,SAAUmF,GAElC,OADaA,EAAOrX,OACNkV,QAChB,GAAG,CACD9C,SAAU,WACR,MAAM,IAAIj1B,MAAM,2GAClB,GAEJ,EAAIi6B,EACJ/C,EAAQiC,EAAMjC,MACdnG,EAAUoI,EAAMpI,QAChBpwB,EAAOw4B,EAAMx4B,KACf,OAAO,IAAIg2B,GAAe,CACxBjC,UAAWA,EACXsC,SAAUA,EACVD,WAAYA,EACZF,YAAaA,EACbI,YAAaA,EACbC,MAAOA,EACPnG,QAASA,EACTpwB,KAAMA,GAEV,CC/QA,SAAS,GAAQie,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,aACjB,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAyBzB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAE3e,SAAS4b,GAA8B9L,GACrBA,EAAQ+L,UAExB,OADmB,GAAyB/L,EAAS,GAEvD,CAKe,SAASgM,KACtB,MAAO,CACLC,aAAc,SAAsBjM,GAClC,OAAOlqB,OAAOC,KAAKiqB,GAAShqB,QAAO,SAAU+K,EAAOod,GAClD,OAAO,GAAc,GAAc,CAAC,EAAGpd,GAAQ,CAAC,EAAG,GAAgB,CAAC,EAAGod,EAAS2N,GAA8B9L,EAAQ7B,KACxH,GAAG,CAAC,EACN,EACA+N,aAAc,WACZ,IAAIvC,EAAaj4B,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EACtF,OAAOoE,OAAOC,KAAK4zB,GAAY3zB,QAAO,SAAU+K,EAAOod,GACrD,OAAO,GAAc,GAAc,CAAC,EAAGpd,GAAQ,CAAC,EAAG,GAAgB,CAAC,EAAGod,EAAS2N,GAA8BnC,EAAWxL,KAC3H,GAAG,CAAC,EACN,EAEJ,CChCA,SAASgO,GAAY5b,GACnB,OAAOA,IAAQza,OAAOya,EACxB,CACO,SAAS6b,GAAQC,EAAOC,GAC7B,GAAID,IAAUC,EACZ,OAAO,EAET,GAAIH,GAAYE,IAAUF,GAAYG,IAA4B,mBAAVD,GAA0C,mBAAXC,EACrF,OAAOD,IAAUC,EAEnB,GAAIx2B,OAAOC,KAAKs2B,GAAO56B,SAAWqE,OAAOC,KAAKu2B,GAAQ76B,OACpD,OAAO,EAKT,IAAK,IAAIitB,EAAK,EAAG6N,EAAez2B,OAAOC,KAAKs2B,GAAQ3N,EAAK6N,EAAa96B,OAAQitB,IAAM,CAClF,IAAIvrB,EAAMo5B,EAAa7N,GACvB,KAAMvrB,KAAOm5B,GACX,OAAO,EAET,IAAKF,GAAQC,EAAMl5B,GAAMm5B,EAAOn5B,IAC9B,OAAO,CAEX,CACA,OAAO,CACT,CC1BA,SAAS,GAAQod,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CCHpO,SAASic,GAAc9K,GAC5B,MAAyB,cAAlBA,EAAOS,MAChB,CCFA,SAAS,GAAQ5R,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,SAAU,oBAAqB,oBAAqB,iBAAkB,+BAAgC,qBAAsB,iBAAkB,qBAAsB,gCAAiC,gBACtN,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAyBzB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAI3e,IAAIuc,GAAgB,SAAuBC,EAAMC,GAClCA,EAAMj1B,OACGi1B,EAAMh1B,kBACNg1B,EAAM90B,kBACT80B,EAAM70B,eACQ60B,EAAM50B,6BAChB40B,EAAM30B,mBACV20B,EAAM10B,eACF00B,EAAM/0B,mBACK+0B,EAAMz0B,8BACvBy0B,EAAMC,aATvB,IAUEC,EAAO,GAAyBF,EAAO,IACzC,OAAOD,EAAKryB,mBAAmBwyB,EACjC,EAGIC,GAAc,SAAqBJ,EAAMC,GAC3C,OAAOA,EAAMj1B,OAAO1B,QAAO,SAAU+2B,EAAGpzB,GACtC,OAAOozB,EAAE1wB,SAAS1C,EACpB,GAAG+yB,EACL,EACIM,GAAyB,SAAgCN,EAAMC,GACjE,OAAOA,EAAMh1B,kBAAkB3B,QAAO,SAAU+2B,EAAGpzB,GACjD,OAAOozB,EAAEzwB,oBAAoB3C,EAC/B,GAAG+yB,EACL,EACIO,GAA0B,SAAiCP,EAAMC,GACnE,OAAOD,EAAKryB,mBAAmB,CAC7BzC,mBAAoB+0B,EAAM/0B,mBAAmB5B,QAAO,SAAU0B,EAAQ6B,GACpE,IAAI3F,EClCH,SAAmB+K,EAAOsQ,GAC/B,IAAKld,MAAMmF,QAAQyH,GACjB,OAAQ,EAEV,IAAK,IAAIrN,EAAI,EAAGA,EAAIqN,EAAMlN,OAAQH,IAChC,GAAI2d,EAAWtQ,EAAMrN,IACnB,OAAOA,EAGX,OAAQ,CACV,CDwBkB4R,CAAUxL,GAAQ,SAAUq1B,GACtC,OAAOA,EAAEpzB,OAASJ,EAAMI,IAC1B,IACA,IAAe,IAAX/F,EACF,OAAO8D,EAAOtC,OAAOmE,GAEvB,IAAI2zB,EAAax1B,EAAO1F,QAExB,OADAk7B,EAAWj6B,OAAOW,EAAO,EAAG2F,GACrB2zB,CACT,GAAGR,EAAK90B,qBAEZ,EAGIu1B,GAAsB,SAA6BT,EAAMC,GAC3D,OAAOA,EAAM10B,eAAejC,QAAO,SAAU+2B,EAAG/3B,GAC9C,OAAO+3B,EAAElwB,iBAAiB7H,EAC5B,GAAG03B,EACL,EACIU,GAAwB,SAA+BV,EAAMC,GAC/D,OAAOD,EAAKryB,mBAAmB,CAC7BxC,kBAAmB,GAAc,GAAc,CAAC,EAAG60B,EAAK70B,mBAAoB80B,EAAM90B,oBAEtF,EACIw1B,GAAsB,SAA6BX,EAAMC,GAC3D,OAAOD,EAAKryB,mBAAmB,CAC7BvC,eAAgB,GAAc,GAAc,CAAC,EAAG40B,EAAK50B,gBAAiB60B,EAAM70B,iBAEhF,EACIw1B,GAAoC,SAA2CZ,EAAMC,GACvF,OAAOD,EAAKryB,mBAAmB,CAC7BtC,6BAA8B,GAAc,GAAc,CAAC,EAAG20B,EAAK30B,8BAA+B40B,EAAM50B,+BAE5G,EACIw1B,GAA0B,SAAiCb,EAAMC,GACnE,OAAOD,EAAKryB,mBAAmB,CAC7BrC,mBAAoB,GAAc,GAAc,CAAC,EAAG00B,EAAK10B,oBAAqB20B,EAAM30B,qBAExF,EACIw1B,GAAqC,SAA4Cd,EAAMC,GACzF,OAAOD,EAAKryB,mBAAmB,CAC7BnC,8BAA+B,GAAc,GAAc,CAAC,EAAGw0B,EAAKx0B,+BAAgCy0B,EAAMz0B,gCAE9G,EACIu1B,GAAoB,SAA2Bf,EAAMC,GACvD,IAAIC,EAAoB,GAAGx3B,OAAOs3B,EAAKE,cAAcx3B,OAAOu3B,EAAMC,cAAcx2B,OAAOiR,SEpF1EjR,QAAO,SAAUpB,EAAOpB,EAAOuE,GAC1C,OAAOA,EAAK3B,QAAQxB,KAAWpB,CACjC,IFmFA,OAAIg5B,EAAan7B,OAAS,EACjBi7B,EAAKryB,mBAAmB,CAC7BuyB,aAAcA,IAGXF,CACT,EACWgB,GAAwB,WACjC,IAAK,IAAI5M,EAAOpvB,UAAUD,OAAQ+C,EAAa,IAAIzC,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACrFxsB,EAAWwsB,GAAQtvB,UAAUsvB,GAE/B,OAAOxsB,EAAWwB,QAAO,SAAU02B,EAAMC,GACvC,IAAIgB,EAAsCH,GAAmCd,EAAMC,GAC/EiB,EAA2BX,GAAwBU,EAAqChB,GACxFkB,EAAuBV,GAAoBS,EAA0BjB,GACrEmB,EAA2BP,GAAwBM,EAAsBlB,GACzEoB,EAAqCT,GAAkCQ,EAA0BnB,GACjGqB,EAAuBX,GAAoBU,EAAoCpB,GAC/EsB,EAAyBb,GAAsBY,EAAsBrB,GACrEuB,EAA0BlB,GAAuBiB,EAAwBtB,GACzEwB,EAAqBV,GAAkBS,EAAyBvB,GAChEyB,EAAetB,GAAYqB,EAAoBxB,GACnD,OAAOF,GAAc2B,EAAczB,EACrC,GACF,EG9GA,SAAS,GAAQpc,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,2BACjB,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS8d,GAAmB7P,GAAO,OAInC,SAA4BA,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAO,GAAkBA,EAAM,CAJhD8P,CAAmB9P,IAG7D,SAA0B+P,GAAQ,GAAsB,oBAAXva,QAAmD,MAAzBua,EAAKva,OAAOC,WAA2C,MAAtBsa,EAAK,cAAuB,OAAOx8B,MAAMuiB,KAAKia,EAAO,CAHxFC,CAAiBhQ,IAEtF,SAAqC5K,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,GAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,GAAkB+iB,EAAGuL,EAAS,CAFjU,CAA4BX,IAC1H,WAAgC,MAAM,IAAIztB,UAAU,uIAAyI,CAD3D09B,EAAsB,CAKxJ,SAAS,GAAkBjQ,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAClL,SAAS,GAAyBjB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAI3e,IAAI,GAAYqR,EAAoC,CAClD5nB,KAAM,iBAOR,SAAS+0B,GAAsBnhB,EAAQkT,GACrC,IAAI1f,EAAQ0f,EAAK1f,MACfiI,EAAcyX,EAAKzX,YACnB2lB,EAAWlO,EAAKkO,SACd5tB,IAAUwM,EAAOxM,QACnBwM,EAAOxM,MAAQA,EACfwM,EAAOvc,KAAK,SAAU,CACpB+P,MAAOwM,EAAOxM,MACdgC,QAASwK,EAAOpZ,YAChB6U,YAAaA,EACb2lB,SAAUA,IAGhB,CACA,SAASC,GAAuBpN,EAASqN,GACvC,IAAIC,EAAiBp9B,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC1F,OAAO8vB,EAAQxrB,QAAO,SAAUgqB,EAAS0B,GACvC,OAAI8K,GAAc9K,GACT1B,EAEJ0B,EAAOsE,kBAAqBtE,EAAOqN,eAGpCrN,EAAOsE,iBACFtE,EAAOsE,iBAAiBhG,EAAS6O,GAEnCnN,EAAOqN,eAAe/O,EAAS6O,GAL7B7O,CAMX,GAAG8O,EACL,CACA,SAASE,GAAgCxN,EAASyN,GAChD,IAAIC,EAA0BD,EAA8BC,wBAC1DrC,EAAO,GAAyBoC,EAA+B,IACjE,OAAOzN,EAAQprB,QAAO,SAAUsrB,GAC9B,OAAQ8K,GAAc9K,EACxB,IAAG1rB,QAAO,SAAU+K,EAAO2gB,GACzB,OAAKA,EAAOuE,0BAGLvE,EAAOuE,0BAA0BllB,EAAO8rB,GAFtC9rB,CAGX,GAAGmuB,EACL,CACA,SAASC,GAAqB3N,GAC5B,IAAI4N,EAAe5N,EAAQprB,OAAOo2B,IACN,IAAxB4C,EAAa39B,QAGjB29B,EAAah3B,SAAQ,SAAUspB,GAC7B,IAAI2N,EAAe3N,EAAO7D,YAC1B6Q,GAAsBW,EAAc,CAClCtuB,MAAOsuB,EAAatuB,MAAMf,YAC1BgJ,aAAa,IAEfmmB,GAAqBzN,EAAO4C,aAC9B,GACF,CACA,SAASgL,GAAgC9N,GAEvC,OADmBA,EAAQprB,OAAOo2B,IACdx2B,QAAO,SAAU+nB,EAAemG,GAClD,OAAOnG,EAAc3oB,OAAOnD,MAAM8rB,EAAe,CAAC,CAChDI,QAAS+F,EAAQ9F,aACjBrb,QAASmhB,EAAQpG,aACjBvQ,OAAQ2W,EAAQrG,cACfzoB,OAAOi5B,GAAmBiB,GAAgCpL,EAAQI,gBACvE,GAAG,GACL,CACA,IAoYA,GApYY,SAAepC,GACzB,QAAqB/xB,IAAjB+xB,QAAyD/xB,IAA3B+xB,EAAa7W,UAC7C,MAAM,IAAI1Z,MAAM,GAAU,wCAE5B,IAAI0Z,EAAY6W,EAAa7W,UAC3BkkB,EAAwBrN,EAAa/D,QACrCA,OAAoC,IAA1BoR,EAAmClkB,EAAYkkB,EACvDC,EAAe,GACfC,EAAe,CAAC,EAChBC,EAA6B,KAC7BC,EAAc,KACdpiB,EAAS,KACTpD,EAAgB,KAChBylB,EAA4B,KAChC,MAAO,CACLzN,OAAQ,YACR+E,aAAc,YACd2I,aAAc,WACZ,OAAOxkB,CACT,EACA+S,WAAY,WACV,OAAOD,CACT,EACAN,UAAW,WACT,OAAOtQ,CACT,EACAuQ,WAAY,WACV,IAAIgS,EACJ,OAA2C,QAApCA,EAAiB3lB,SAA8C,IAAnB2lB,GAA6BA,EAAe37B,aAO/FgW,EAAchW,YAAYqR,OAAS+H,EAAOxM,MACnCoJ,EAAchW,aAR+F,IAStH,EACA47B,iBAAkB,WAChB,OAAOH,CACT,EACA5R,iBAAkB,WAChB,IAAIgS,EAAehgC,KAAKigC,YAIxB,OAAOX,GADcU,EAAeA,EAAa1L,aAAe,CAACt0B,MAEnE,EACAigC,UAAW,WACT,OAAON,CACT,EACAtJ,UAAW,SAAmB6J,GAC5B,OAAOR,EAA2BzG,WAAW,GAAgB,CAAC,EAAG9K,EAASyQ,GAAuBY,EAAc,CAC7GW,iBAAkBD,EAClB3iB,OAAQA,KAEZ,EACA+W,WAAY,WACV,OAAOkL,CACT,EACA5K,WAAY,SAAoBpD,GAC9B,IAAI+G,EAAQv4B,KACZ,IAAK+B,MAAMmF,QAAQsqB,GACjB,MAAM,IAAI7vB,MAAM,GAAU,yDAE5B,GAAI6vB,EAAQ1P,MAAK,SAAU4P,GACzB,MAA8B,mBAAhBA,EAAOU,MAAgD,mBAAlBV,EAAOc,MAC5D,IACE,MAAM,IAAI7wB,MAAM,GAAU,sEAgC5B,OA9BA69B,EAAeA,EAAap6B,OAAOosB,GAC/BkO,GAA8BroB,QAAQma,EAAQ/vB,UAChDi9B,GAAsBnhB,EAAQ,CAC5BxM,MAAOiuB,GAAgCQ,EAAc,CACnDxP,QAASyP,EACTP,wBAAyB3hB,EAAOxM,QAElC4tB,SAAUc,IAMZjO,EAAQppB,SAAQ,SAAUspB,GACpBA,EAAOiB,gBAETyN,GAAiB,CACfxN,YAFgBlB,EAAOiB,eAAe+M,EAA2B9M,YAAY2F,EAAMnK,eAAiB,CAAC,EAAGoI,GAAekJ,EAA4BnH,EAAOmH,EAA2B1I,kBAGrL1E,sBAAuBoN,EACvB7tB,OAAQ0mB,GAGd,IACA/G,EAAQppB,SAAQ,SAAUspB,GACpBA,EAAOU,MACTV,EAAOU,KAAKoE,GAAekJ,EAA4BnH,EAAOmH,EAA2B1I,iBAE7F,IACA0I,EAA2BW,kBAEtBrgC,IACT,EACA20B,cAAe,SAAuBnD,GACpC,IAAIoI,EAAS55B,KACb,IAAK+B,MAAMmF,QAAQsqB,GACjB,MAAM,IAAI7vB,MAAM,GAAU,4DAE5B,GAAI6vB,EAAQ1P,MAAK,SAAU4P,GACzB,MAAiC,mBAAnBA,EAAOgB,OACvB,IACE,MAAM,IAAI/wB,MAAM,GAAU,sDAK5B,GAHA69B,EAAeA,EAAap5B,QAAO,SAAUsrB,GAC3C,OAAoC,IAA7BF,EAAQhrB,QAAQkrB,EACzB,IACIgO,GAA8BroB,QAAQma,EAAQ/vB,QAAS,CACzD,IAAIy+B,EAAY1O,EAAQxrB,QAAO,SAAU+K,EAAO2gB,GAO9C,OALWA,EAAOgB,QAAQ,CACxBnV,OAAQA,EACRxM,MAAOA,EACPc,OAAQ+nB,KAEK7oB,CACjB,GAAGwM,EAAOxM,OACV0uB,EAAeb,GAAuBY,EAAc,CAClDW,iBAAkBD,EAClB3iB,OAAQA,IAEVA,EAAOd,SAASuiB,GAAgCQ,EAAc,CAC5DxP,QAASyP,EACTP,wBAAyBgB,KAEvBV,EAAa/9B,QACfi+B,EAA2BW,gBAE/B,CACA,OAAOrgC,IACT,EACAoyB,KAAM,SAAcgF,GAClB,IACEkJ,EADErG,EAASj6B,KAETsyB,EAAwB8E,EAAM9E,sBAChCzgB,EAASulB,EAAMvlB,OACfme,EAAUoH,EAAMpH,QAClB,GAAe,OAAXzS,EAAJ,CAKAmiB,EAA6BpN,EAC7BqN,EAAc9tB,EACd4tB,EAAezP,EAAQ7B,IAAY,CAAC,EAKpC,IAAInqB,EAAasuB,EAAsBtuB,WACnCQ,EAAaw6B,GAAgCQ,EAAc,CAC7DxP,QAASyP,EACTP,wBAAyB,IAAI,mBAAqC,CAChEt7B,MAAOyX,OAOXkC,EAAS,EAAoB,CAAC,EAAG/Y,EAAWZ,MAAOY,IAK5C0U,OAAS,WACd,OAAIoZ,EAAsBoF,eACxBpF,EAAsBoF,cAAc,CAClC1H,QAASsC,EAAsByE,UAAUf,iBAAiB,CAAC,GAC3D7F,WAAY,SAAoB+P,GAC9B,OAAO5N,EAAsBnC,WAAW+P,GAAW,EACrD,IAKKl8B,GAEFA,EAAWkV,QACpB,EACAqE,EAAOgjB,qCAAuC,WAC5C,OAAOv8B,EAAWkV,QACpB,EAGAqE,EAAO3C,qBAAuB,SAAUrP,EAAW2G,EAAY2I,EAAcC,GAC3E,IAAI/J,EAAQwM,EAAOxM,MAAM1G,mBAAmByQ,GAC5C,OAAO9W,EAAW4W,qBAAqBrP,EAAW2G,EAAY2I,EAAc9J,EAC9E,EACAoJ,EAAgBnW,EAAWya,QAAO,WAChC,OAAOif,GAAsBz7B,WAAM,EAAQo8B,GChS5C,SAAiCnK,GAGtC,IAFA,IAAIriB,EAASqiB,EAAQ+L,YACjB7iB,EAAS,CAAC8W,EAAQrG,YAAY9c,OAChB,OAAXc,GACLuL,EAAS,CAACvL,EAAOgc,YAAY9c,OAAO3L,OAAOgY,GAC3CvL,EAASA,EAAOouB,YAElB,OAAO7iB,CACT,CDwRsEojB,CAAwBvG,IACxF,IACA,IAAIwG,EAA0F,QAAnEH,EAAwBhO,EAAsBoO,uBAAuD,IAA1BJ,OAAmC,EAASA,EAAsBtgC,KAAKouB,cAC7K,GAAIqS,EAAqB,CAGvB,IAAI1tB,EAAU,IAAI,gBAAkC,IAAI,mBAAqC0tB,EAAoB1vB,OAAQ0vB,EAAoB1tB,SAC7IoH,EAAchW,YAAc4O,EAC5BwK,EAAOpZ,YAAc4O,CACvB,CAMAwK,EAAO7a,GAAG,UAAU,SAAUm3B,GACVA,EAAM7gB,aAEtBmmB,GAAqBK,EAEzB,IACArlB,EAAczX,GAAG,UAAU,WAKzB4vB,EAAsBqO,uBAOxB,IACAxmB,EAAczX,GAAG,UAAU,SAAUy3B,GACnC,IAAIpnB,EAAUonB,EAAMpnB,QAIpBuf,EAAsBsO,iBAMtBrjB,EAAOpZ,YAAc4O,EACrB6sB,EAA4B7sB,EAAQyC,MACtC,IAKAgqB,EAAap3B,SAAQ,SAAUspB,GACzBA,EAAOiB,gBAETyN,GAAiB,CACfxN,YAFgBlB,EAAOiB,eAAeL,EAAsBM,YAAYqH,EAAO7L,eAAiB,CAAC,EAAGoI,GAAelE,EAAuB2H,EAAQjK,IAGlJsC,sBAAuBA,EACvBzgB,OAAQooB,GAGd,IACAuF,EAAap3B,SAAQ,SAAUspB,GAKzBA,EAAOU,MACTV,EAAOU,KAAKoE,GAAelE,EAAuB2H,EAAQjK,GAE9D,IAQAzS,EAAO7a,GAAG,UAAU,SAAU2b,GAC5B,IAAItN,EAAQsN,EAAMtN,MACd4tB,EAAWtgB,EAAMsgB,SACrBc,EAAeb,GAAuBY,EAAc,CAClDW,iBAAkBpvB,EAClBwM,OAAQA,GACPohB,GAAY,CAAC,GAIXrM,EAAsBoF,eACzBpF,EAAsBuO,uBAE1B,IACIJ,GAIFnO,EAAsBsO,gBAjJxB,CAmJF,EACApO,OAAQ,SAAgB+H,GACtB,IAAIF,EAASr6B,KACTsyB,EAAwBiI,EAAMjI,sBAC7BtyB,KAAK8tB,eAM2B,UAAjCwE,EAAsB7L,QAAuB6L,EAAsBtuB,WAAW2a,sBAChFpB,EAAOd,SAASmjB,GAElBJ,EAAap3B,SAAQ,SAAUspB,GACzBA,EAAOiB,gBAETyN,GAAiB,CACfxN,YAFgBlB,EAAOiB,eAAeL,EAAsBM,YAAYyH,EAAOjM,eAAiB,CAAC,EAAGqI,GAAiBnE,EAAuB+H,IAG5I/H,sBAAuBA,EACvBzgB,OAAQwoB,GAGd,IACAmF,EAAap3B,SAAQ,SAAUspB,GAQzBA,EAAOc,QACTd,EAAOc,OAAOiE,GAAiBnE,EAAuB+H,GAE1D,IACF,EACA3H,QAAS,WACP,IACEoO,EACAC,EAFEtG,EAASz6B,KAGbw/B,EAAap3B,SAAQ,SAAUspB,GACzBA,EAAOgB,SAOThB,EAAOgB,QAAQ,CACbnV,OAAQA,EACRxM,MAAOwM,EAAOxM,MACdc,OAAQ4oB,GAGd,IACAiF,EAA6B,KAC7BC,EAAc,KACS,QAAtBmB,EAAUvjB,SAAgC,IAAZujB,GAA8BA,EAAQ59B,qBACrEqa,EAAS,KAC6B,QAArCwjB,EAAkB5mB,SAA+C,IAApB4mB,GAAsCA,EAAgB18B,SACpG8V,EAAgB,IAClB,EACA6b,iBAAkB,SAA0BhG,GAC1C,OAAOwP,EAAap5B,OAAOo2B,IAAex2B,QAAO,SAAUg7B,EAAiBC,GAC1E,OAAOA,EAAWjL,iBAAiBgL,EACrC,GAAG,GAAc,GAAc,CAAC,EAAGhR,GAAU,CAAC,EAAG,GAAgB,CAAC,EAAG7B,EAAS,GAAc,GAAc,CAAC,EAAG6B,EAAQ7B,IAAWsR,KACnI,EACAV,eAAgB,SAAwB/O,GAEtC,OAAOhwB,KAAKg2B,iBAAiBhG,EAC/B,EACAiG,0BAA2B,SAAmCkK,EAAkBzF,GAC9E,IAAI1K,EAAU0K,EAAM1K,QACpB,OAAOgP,GAAgCQ,EAAc,CACnDxP,QAASA,EACTkP,wBAAyBiB,GAE7B,EACAe,eAAgB,WACdzB,EAAeb,GAAuBY,EAAc,CAClDW,iBAAkBngC,KAAK6tB,YAAY9c,MACnCwM,OAAQvd,KAAK6tB,aACZ4R,EACL,EACAnP,gBAAiB,SAAyBJ,GACxC,IAAIK,EAA2C,mBAAjBL,EAA8BA,EAAauP,GAAgBvP,EACzFwP,EAA2BvP,YAAW,SAAUpf,GAC9C,OAAO,GAAc,GAAc,CAAC,EAAGA,GAAQ,CAAC,EAAG,GAAgB,CAAC,EAAGod,EAASoC,GAClF,GACF,EAEJ,EAEA,SAAS6P,GAAiBtF,GACxB,IAAIlI,EAAckI,EAAMlI,YACtBN,EAAwBwI,EAAMxI,sBAC9BzgB,EAASipB,EAAMjpB,OACbsvB,EAAkBtvB,EAASA,EAAOuc,aAAekE,EAAsByE,UAAU3I,aACrFkE,EAAsBM,YAAc,GAAc,GAAc,CAAC,EAAGN,EAAsBM,aAAc,CAAC,EAAG,GAAgB,CAAC,EAAGuO,EAAiB,GAAc,GAAc,CAAC,EAAG7O,EAAsBM,YAAYuO,IAAmBvO,IACxO,CEreA,IACWwO,GAAY,SAAmBC,GACxC,OAAO,WACL,IAAI5Q,EAAO/uB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC9E4/B,EAAiB7Q,EAAK6Q,eACtBC,EAAe9Q,EAAK8Q,aAClBC,EAAaF,EAAiB,IAAIl8B,OAAOk8B,GAAkB,GAC3DG,EAAWF,EAAe,KAAKn8B,OAAOm8B,GAAgB,GAC1D,MAAO,GAAGn8B,OARE,MAQgB,KAAKA,OAAOi8B,GAAej8B,OAAOo8B,GAAYp8B,OAAOq8B,EACnF,CACF,ECVO,SAASC,GAAkBrgB,EAAQnT,GAExC,OADYnM,MAAMmF,QAAQgH,GAAQA,EAAOA,EAAKuC,MAAM,MACvCzK,QAAO,SAAUkuB,EAAS/wB,GACrC,OAAO+wB,GAAWA,EAAQ/wB,EAC5B,GAAGke,EACL,CCCA,IAAIsgB,GAAe,CACjB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,SAIHC,GAAqB,WACrBC,GAAwBvO,OAAOsO,GAAmB9iB,QAkBtD,IAAIgjB,GAAiB,CACnB,QAAS,IACT,OAAQ,IACR,OAAQ,IACR,SAAU,IACV,QAAS,KAIPC,GAAmB,0BACnBC,GAAsB1O,OAAOyO,GAAiBjjB,QAM3C,SAAS,GAAS9Z,GACvB,OAAOA,GAASg9B,GAAoBxe,KAAKxe,GAASA,EAAMga,QAAQ+iB,IAAkB,SAAUE,GAC1F,OAAOH,GAAeG,EACxB,IAAKj9B,CACP,CCtDA,SAAS,GAAQub,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAsBxU,SAAS2hB,GAAcl9B,GAC5B,IAXF,SAAsBA,GACpB,MAA0B,WAAnB,GAAQA,IAAiC,OAAVA,CACxC,CASOm9B,CAAan9B,IAA4B,oBAjBhD,SAAgBA,GACd,OAAc,OAAVA,OACe7E,IAAV6E,EAAsB,qBAAuB,gBAE/Cc,OAAOpF,UAAUkQ,SAAS9O,KAAKkD,EACxC,CAY8Bo9B,CAAOp9B,GACjC,OAAO,EAET,GAAqC,OAAjCc,OAAOu8B,eAAer9B,GACxB,OAAO,EAGT,IADA,IAAIs9B,EAAQt9B,EAC4B,OAAjCc,OAAOu8B,eAAeC,IAC3BA,EAAQx8B,OAAOu8B,eAAeC,GAEhC,OAAOx8B,OAAOu8B,eAAer9B,KAAWs9B,CAC1C,CClCA,SAAS,GAAQ/hB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAE/U,SAASgiB,KAAiS,OAApRA,GAAWz8B,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAUqiB,GAAStgC,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAQ2f,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAKpO,IAAIkiB,GAAkB,CAC3BC,gBAAiB,oBACjBC,iBAAkB,sBAETC,GACQ,SADRA,GAES,UAEpB,SAASC,GAAqB79B,GAC5B,OFGK,SAAgBA,GACrB,OAAOA,GAAS68B,GAAsBre,KAAKxe,GAASA,EAAMga,QAAQ4iB,IAAoB,SAAUK,GAC9F,OAAON,GAAaM,EACtB,IAAKj9B,CACP,CEPS,CAAOA,GAAOga,QAAQ,IAAIsU,OAAOmP,GAAgBC,gBAAiB,KAAME,IAAiC5jB,QAAQ,IAAIsU,OAAOmP,GAAgBE,iBAAkB,KAAMC,GAC7K,CACA,SAASE,GAAgB1V,GACvB,OAAI8U,GAAc9U,IAAiC,iBAAhBA,EAAMpoB,MAChCc,OAAOC,KAAKqnB,GAAOpnB,QAAO,SAAU2J,EAAKxM,GAC9C,OAAO,GAAc,GAAc,CAAC,EAAGwM,GAAM,CAAC,EAAG,GAAgB,CAAC,EAAGxM,EAAK2/B,GAAgB1V,EAAMjqB,KAClG,GAAG,CAAC,GAEFpB,MAAMmF,QAAQkmB,GACTA,EAAMrkB,IAAI+5B,IAEZ,GAAc,GAAc,CAAC,EAAG1V,GAAQ,CAAC,EAAG,CACjDpoB,MAAO69B,GAAqBzV,EAAMpoB,QAEtC,CACO,SAAS+9B,GAAWtW,GAgBzB,YAfuBtsB,IAAnBssB,EAAKuW,aAGPvW,EAAOA,EAAK1jB,KAAI,SAAU0nB,GACxB,IAAIwS,EAAMV,GAAS,CAAC,GAtC1B,SAAmChiB,GAAO,GAAW,MAAPA,EAAa,MAAM,IAAIxf,UAAU,sBAAwBwf,EAAM,CAsC/E2iB,CAA0BzS,GAAOA,IAOzD,OANIwS,EAAIE,mBACNF,EAAIE,iBAAmBL,GAAgBG,EAAIE,mBAEzCF,EAAIG,iBACNH,EAAIG,eAAiBN,GAAgBG,EAAIG,iBAEpCH,CACT,KACKD,WAAY,GAEZvW,CACT,CACO,SAAS4W,GAAa9nB,GAC3B,OAAOA,EAAUxS,KAAI,SAAU4c,GAC7B,OAAO,GAAc,GAAc,CAAC,EAAGA,GAAI,CAAC,EAAG,CAC7C2d,YAAaT,GAAqBld,EAAE2d,cAExC,GACF,CCxDA,IAAIC,GAAOnC,GAAU,aCDd,SAASoC,GAAuBhxB,GACrC,IAAIkwB,EAAkBE,GACpBD,EAAmBC,GACrB,OAAOpwB,EAAMzJ,KAAI,SAAU2H,GACzB,OAAOA,EAAK+yB,cAAgBf,EAAkBhyB,EAAK1L,MAAQ29B,EAAmBjyB,EAAK1L,KACrF,IAAG4c,KAAK,GACV,CCNA,IAAI8hB,GAAkB,IAAIpQ,OAAO,OAC1B,SAASqQ,GAAyBnxB,EAAOlR,GAC9C,IAAIsiC,EAAQC,EACR3P,EAAU1hB,EAAMlR,GAChBwiC,GAAiD,QAA3BF,EAASpxB,EAAMlR,EAAI,UAA2B,IAAXsiC,OAAoB,EAASA,EAAOH,iBAAkB,EAC/GM,GAAsD,QAA5BF,EAAUrxB,EAAMlR,EAAI,UAA4B,IAAZuiC,OAAqB,EAASA,EAAQJ,iBAAkB,EAC1H,OAAKC,GAAgBlgB,KAAK,GAAS0Q,EAAQlvB,SAAW++B,IAA0BD,EAGzE5P,EAAQuP,cAFNM,CAGX,CCXA,SAAS,GAAQxjB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAIpO,SAASyjB,GAAwBxxB,GACtC,OAAKA,EAAMsP,MAAK,SAAUpR,GACxB,OAAOA,EAAK+yB,aACd,IAOOjxB,EAAMzJ,KAAI,SAAU2H,EAAMpP,GAC/B,OAAO,GAAc,GAAc,CAAC,EAAGoP,GAAO,CAAC,EAAG,CAChD+yB,eAAgBE,GAAyBnxB,EAAOlR,IAEpD,IAVSkR,EAAMzJ,KAAI,SAAU2H,GACzB,OAAO,GAAc,GAAc,CAAC,EAAGA,GAAO,CAAC,EAAG,CAChD+yB,eAAe,GAEnB,GAOJ,CCrBO,SAASQ,GAAoBC,GAClC,IAAIvB,EAAmBC,GACrBF,EAAkBE,GAChBuB,EAAgBD,EAAiBzzB,MAAMiyB,GACvC0B,EAAaD,EAAc/e,QAC3Bif,EAAYD,EAAkB,CAAC,CACjCp/B,MAAOo/B,EACPX,eAAe,IAFY,GAiB7B,OAbAU,EAAc/7B,SAAQ,SAAUqI,GAC9B,IAAI6zB,EAAiB7zB,EAAMA,MAAMkyB,GACjC0B,EAAS/hC,KAAK,CACZ0C,MAAOs/B,EAAe,GACtBb,eAAe,IAES,KAAtBa,EAAe,IACjBD,EAAS/hC,KAAK,CACZ0C,MAAOs/B,EAAe,GACtBb,eAAe,GAGrB,IACOY,CACT,CCtBA,IAAI,GAAOjD,GAAU,oBCArB,IAAI,GAAOA,GAAU,WCArB,IAAI,GAAOA,GAAU,kBCFd,SAASmD,GAAiBzN,GAC/B,OAAO0N,KAAK9e,mBAAmB7U,KAAKC,UAAUgmB,IAChD,CCFA,SAAS,GAAQvW,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAuChU,SAAS,GAAS8G,EAAQyP,GAEvC,OApBK,SAA6BrG,GAClC,IAKIgU,EALApd,EAASoJ,EAAKpJ,OAChByP,EAAUrG,EAAKqG,QACjB,GAAyB,WAArB,GAAQA,GACV,MAAM,IAAIn1B,MAAM,4DAGlB,IACE8iC,EAAoBF,GAAiBzN,EAGvC,CAFE,MAAOt1B,GACP,MAAM,IAAIG,MAAM,+CAClB,CACA,MAAO,yBAA0ByD,OAAOiiB,EAAQ,6BAA+BjiB,OAAOq/B,EAAmB,IAC3G,CAOSC,CAAoB,CACzBrd,OAAQA,EACRyP,QAASA,GAEb,CC7CA,SAAS,GAAQvW,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAK5N,SAASokB,GAAalU,GACnC,IAAImU,EAAenU,EAAKmU,aACxB,MAAO,CACLC,aAAc,SAAsB7/B,EAAOwtB,GACzC,OCZC,SAAsBxtB,EAAO4/B,GAClC,OAAO5/B,EAAM8/B,eAAeF,EAC9B,CDUa,CAAcpX,OAAOgF,EAAOxtB,IAAS4/B,EAC9C,EACAG,UAAW,SAAmBnxB,EAAS4e,GACrC,IAEE,OAAOA,EVdA,SAAmB/B,GAChC,IAAI1rB,EAAY0rB,EAAK1rB,UACnBigC,EAAwBvU,EAAKwU,mBAC7BA,OAA+C,IAA1BD,EAAmC,OAASA,EACjE/B,EAAMxS,EAAKwS,IACXiC,EAAkBzU,EAAK0U,WACvBA,OAAiC,IAApBD,EAA6B,CAAC,EAAIA,EAM/CE,GAL6B1D,GAAkBuB,EAAIE,iBAAkBp+B,IAI/B,CAAC,GACnBC,MACpBqgC,OAAiC,IAAhBD,EAAyB,GAAKA,EAG7CE,EAAY/B,GAAK,CACnBjC,eAAgB,iBACZ6D,EAAW7B,YAAc,IAAIl+B,OAAO+/B,EAAW7B,aAAe,IACpE,OAAO+B,EAAermB,QAAQ,IAAIsU,OAAOsP,GAAiC,KAAM,IAAIx9B,OAAO6/B,EAAoB,YAAa7/B,OAAOkgC,EAAW,OAAQtmB,QAAQ,IAAIsU,OAAOsP,GAAkC,KAAM,KAAKx9B,OAAO6/B,EAAoB,KACnP,CUNsB,CAAW,GAAc,GAAc,CAAC,EAD/Bp0B,KAAK4T,MAAM7Q,IAC0C,CAAC,EAAG,CAC9EqvB,IAAKjjC,QAIT,CAFE,MAAOwB,GACP,MAAM,IAAIG,MAAM,qHAClB,CACF,EACA4jC,iBAAkB,SAA0B3xB,EAAS4e,GACnD,IAEE,OAAOA,ELxBA,SAA0B/B,GACvC,IAAI1rB,EAAY0rB,EAAK1rB,UACnBigC,EAAwBvU,EAAKwU,mBAC7BA,OAA+C,IAA1BD,EAAmC,OAASA,EACjE/B,EAAMxS,EAAKwS,IACXiC,EAAkBzU,EAAK0U,WACvBA,OAAiC,IAApBD,EAA6B,CAAC,EAAIA,EAM/CE,GAL6B1D,GAAkBuB,EAAIE,iBAAkBp+B,IAI/B,CAAC,GACnBC,MACpBqgC,OAAiC,IAAhBD,EAAyB,GAAKA,EAG7CE,EAAY,GAAK,CACnBhE,eAAgB,iBACZ6D,EAAW7B,YAAc,IAAIl+B,OAAO+/B,EAAW7B,aAAe,IAEpE,OAD8BE,GAAuBQ,GAAwBC,GAAoBoB,KAClErmB,QAAQ,IAAIsU,OAAOsP,GAAiC,KAAM,IAAIx9B,OAAO6/B,EAAoB,YAAa7/B,OAAOkgC,EAAW,OAAQtmB,QAAQ,IAAIsU,OAAOsP,GAAkC,KAAM,KAAKx9B,OAAO6/B,EAAoB,KAC5P,CKGsB,CAAkB,GAAc,GAAc,CAAC,EAD/Bp0B,KAAK4T,MAAM7Q,IACiD,CAAC,EAAG,CAC5FqvB,IAAKjjC,QAIT,CAFE,MAAOwB,GACP,MAAM,IAAIG,MAAM,gIAClB,CACF,EACA6jC,QAAS,SAAiB5xB,EAAS4e,GACjC,IAEE,OAAOA,EJlCA,SAAiB/B,GAC9B,IAAI1rB,EAAY0rB,EAAK1rB,UACnBigC,EAAwBvU,EAAKwU,mBAC7BA,OAA+C,IAA1BD,EAAmC,OAASA,EACjE/B,EAAMxS,EAAKwS,IACXiC,EAAkBzU,EAAK0U,WACvBA,OAAiC,IAApBD,EAA6B,CAAC,EAAIA,EAM/CE,GAL2B1D,GAAkBuB,EAAIG,eAAgBr+B,IAI7B,CAAC,GACjBC,MACpBqgC,OAAiC,IAAhBD,EAAyB,GAAKA,EAG7CE,EAAY,GAAK,CACnBhE,eAAgB,iBACZ6D,EAAW7B,YAAc,IAAIl+B,OAAO+/B,EAAW7B,aAAe,IACpE,OAAO+B,EAAermB,QAAQ,IAAIsU,OAAOsP,GAAiC,KAAM,IAAIx9B,OAAO6/B,EAAoB,YAAa7/B,OAAOkgC,EAAW,OAAQtmB,QAAQ,IAAIsU,OAAOsP,GAAkC,KAAM,KAAKx9B,OAAO6/B,EAAoB,KACnP,CIcsB,CAAS,GAAc,GAAc,CAAC,EAD/Bp0B,KAAK4T,MAAM7Q,IACwC,CAAC,EAAG,CAC1EqvB,IAAKjjC,QAIT,CAFE,MAAOwB,GACP,MAAM,IAAIG,MAAM,mHAClB,CACF,EACA8jC,eAAgB,SAAwB7xB,EAAS4e,GAC/C,IAEE,OAAOA,EH5CA,SAAwB/B,GACrC,IAAI1rB,EAAY0rB,EAAK1rB,UACnBigC,EAAwBvU,EAAKwU,mBAC7BA,OAA+C,IAA1BD,EAAmC,OAASA,EACjE/B,EAAMxS,EAAKwS,IACXiC,EAAkBzU,EAAK0U,WACvBA,OAAiC,IAApBD,EAA6B,CAAC,EAAIA,EAM/CE,GAL2B1D,GAAkBuB,EAAIG,eAAgBr+B,IAI7B,CAAC,GACjBC,MACpBqgC,OAAiC,IAAhBD,EAAyB,GAAKA,EAG7CE,EAAY,GAAK,CACnBhE,eAAgB,iBACZ6D,EAAW7B,YAAc,IAAIl+B,OAAO+/B,EAAW7B,aAAe,IAEpE,OAD8BE,GAAuBQ,GAAwBC,GAAoBoB,KAClErmB,QAAQ,IAAIsU,OAAOsP,GAAiC,KAAM,IAAIx9B,OAAO6/B,EAAoB,YAAa7/B,OAAOkgC,EAAW,OAAQtmB,QAAQ,IAAIsU,OAAOsP,GAAkC,KAAM,KAAKx9B,OAAO6/B,EAAoB,KAC5P,CGuBsB,CAAgB,GAAc,GAAc,CAAC,EAD/Bp0B,KAAK4T,MAAM7Q,IAC+C,CAAC,EAAG,CACxFqvB,IAAKjjC,QAIT,CAFE,MAAOwB,GACP,MAAM,IAAIG,MAAM,8HAClB,CACF,EACA+jC,SAAU,SAAkB9xB,EAAS4e,GACnC,IACE,IAAImT,EAAc90B,KAAK4T,MAAM7Q,GAC3ByT,EAASse,EAAYte,OACrByP,EAAU6O,EAAY7O,QACxB,OAAOtE,EAAO,GAAUnL,EAAQ,GAAc,CAC5Cue,UAAW,CAAC5lC,KAAK6lC,WAChB/O,IAGL,CAFE,MAAOt1B,GACP,MAAM,IAAIG,MAAM,2IAClB,CACF,EAEJ,CEnEA,IAAImkC,GAAgB1rB,QAAQC,UACrB,SAAS0rB,GAAMpP,GACpB,IAAIqP,EAAW,KACXC,GAAY,EACZhiC,EAAK,WACP,IAAK,IAAI6sB,EAAOpvB,UAAUD,OAAQJ,EAAO,IAAIU,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC/E3vB,EAAK2vB,GAAQtvB,UAAUsvB,GAER,OAAbgV,IAGJA,EAAWF,GAAcjsB,MAAK,WAC5BmsB,EAAW,KACPC,EACFA,GAAY,EAGdtP,EAAS10B,WAAM,EAAQZ,EACzB,IACF,EAaA,OAZA4C,EAAGiiC,KAAO,WACR,GAAiB,OAAbF,EACF,MAAM,IAAIrkC,MAAM,kEAElB,OAAOqkC,CACT,EACA/hC,EAAGkiC,OAAS,WACO,OAAbH,IAGJC,GAAY,EACd,EACOhiC,CACT,CC/BO,SAASmiC,GAAoBC,EAAczY,GAChD,IAAI2C,EAAmB8V,EAAazY,EAAYQ,eAAiB,CAAC,EAOlER,EAAYC,YAAYpR,SAASmR,EAAYqI,0BAA0BrI,EAAYC,YAAY9c,MAAO,CACpGif,QAASO,KAEX3C,EAAY0G,aAAaluB,OAAOo2B,IAAep0B,SAAQ,SAAUspB,GAC/D,OAAO0U,GAAoBC,EAAc3U,EAC3C,GACF,CChBA,SAAS,GAAQnR,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CAEzf,SAAS,GAAkBA,EAAQ4T,GAAS,IAAK,IAAIxyB,EAAI,EAAGA,EAAIwyB,EAAMryB,OAAQH,IAAK,CAAE,IAAI62B,EAAarE,EAAMxyB,GAAI62B,EAAWxY,WAAawY,EAAWxY,aAAc,EAAOwY,EAAWtY,cAAe,EAAU,UAAWsY,IAAYA,EAAWvY,UAAW,GAAM9Z,OAAO2d,eAAevD,EAAQ,GAAeiY,EAAWh1B,KAAMg1B,EAAa,CAAE,CAG5U,SAASmO,GAAgB1iB,EAAG2C,GAA6I,OAAxI+f,GAAkBxgC,OAAOygC,eAAiBzgC,OAAOygC,eAAe3oB,OAAS,SAAyBgG,EAAG2C,GAAsB,OAAjB3C,EAAE4iB,UAAYjgB,EAAU3C,CAAG,EAAU0iB,GAAgB1iB,EAAG2C,EAAI,CACvM,SAASkgB,GAAaC,GAAW,IAAIC,EAGrC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhF1vB,QAAQ3W,UAAUsmC,QAAQllC,KAAK8kC,QAAQC,UAAUxvB,QAAS,IAAI,WAAa,MAAY,CAAkC,CAA1B,MAAO2C,GAAK,OAAO,CAAO,CAAE,CAHvQitB,GAA6B,OAAO,WAAkC,IAAsChzB,EAAlCizB,EAAQC,GAAgBT,GAAkB,GAAIC,EAA2B,CAAE,IAAIS,EAAYD,GAAgBnnC,MAAMkK,YAAa+J,EAAS2yB,QAAQC,UAAUK,EAAOxlC,UAAW0lC,EAAY,MAASnzB,EAASizB,EAAMjlC,MAAMjC,KAAM0B,WAAc,OAAO2lC,GAA2BrnC,KAAMiU,EAAS,CAAG,CACxa,SAASozB,GAA2Bl/B,EAAMrG,GAAQ,GAAIA,IAA2B,WAAlB,GAAQA,IAAsC,mBAATA,GAAwB,OAAOA,EAAa,QAAa,IAATA,EAAmB,MAAM,IAAIf,UAAU,4DAA+D,OAAOumC,GAAuBn/B,EAAO,CAC/R,SAASm/B,GAAuBn/B,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAIo/B,eAAe,6DAAgE,OAAOp/B,CAAM,CAErK,SAASg/B,GAAgBvjB,GAA+J,OAA1JujB,GAAkBrhC,OAAOygC,eAAiBzgC,OAAOu8B,eAAezkB,OAAS,SAAyBgG,GAAK,OAAOA,EAAE4iB,WAAa1gC,OAAOu8B,eAAeze,EAAI,EAAUujB,GAAgBvjB,EAAI,CACnN,SAAS,GAAgBrD,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAAM,GAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAC3O,SAAS,GAAelgB,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAU5H,IAAI,GAAYouB,EAAoC,CAClD5nB,KAAM,kBAER,SAAS69B,KACP,MAAO,GACT,CAUA,IAAIC,GAA6B,SAAUC,IAjC3C,SAAmBC,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAI7mC,UAAU,sDAAyD4mC,EAASjnC,UAAYoF,OAAO4Z,OAAOkoB,GAAcA,EAAWlnC,UAAW,CAAEwJ,YAAa,CAAElF,MAAO2iC,EAAU/nB,UAAU,EAAMC,cAAc,KAAW/Z,OAAO2d,eAAekkB,EAAU,YAAa,CAAE/nB,UAAU,IAAcgoB,GAAYtB,GAAgBqB,EAAUC,EAAa,CAkCjcC,CAAUJ,EAAeC,GACzB,IApCoB5O,EAAaS,EAAYC,EAoCzCsO,EAASrB,GAAagB,GAC1B,SAASA,EAAc7zB,GACrB,IAAI2kB,GAxCR,SAAyBjvB,EAAUwvB,GAAe,KAAMxvB,aAAoBwvB,GAAgB,MAAM,IAAI/3B,UAAU,oCAAwC,CAyCpJ,CAAgBf,KAAMynC,GAItB,GAAgBH,GAHhB/O,EAAQuP,EAAOhmC,KAAK9B,OAG2B,cAAU,GACzD,GAAgBsnC,GAAuB/O,GAAQ,iBAAa,GAC5D,GAAgB+O,GAAuB/O,GAAQ,sBAAkB,GACjE,GAAgB+O,GAAuB/O,GAAQ,gBAAiB,MAChE,GAAgB+O,GAAuB/O,GAAQ,cAAU,GACzD,GAAgB+O,GAAuB/O,GAAQ,kBAAc,GAC7D,GAAgB+O,GAAuB/O,GAAQ,iBAAa,GAC5D,GAAgB+O,GAAuB/O,GAAQ,eAAW,GAC1D,GAAgB+O,GAAuB/O,GAAQ,uBAAmB,GAClE,GAAgB+O,GAAuB/O,GAAQ,cAAe,CAAC,GAC/D,GAAgB+O,GAAuB/O,GAAQ,2BAAuB,GACtE,GAAgB+O,GAAuB/O,GAAQ,2BAAuB,GACtE,GAAgB+O,GAAuB/O,GAAQ,uBAAmB,GAClE,GAAgB+O,GAAuB/O,GAAQ,uBAAmB,GAClE,GAAgB+O,GAAuB/O,GAAQ,kBAAc,GAC7D,GAAgB+O,GAAuB/O,GAAQ,uBAAmB,GAClE,GAAgB+O,GAAuB/O,GAAQ,yBAAqB,GACpE,GAAgB+O,GAAuB/O,GAAQ,aAAc,IAC7D,GAAgB+O,GAAuB/O,GAAQ,2BAAuB,GACtE,GAAgB+O,GAAuB/O,GAAQ,SAAU,QACzD,GAAgB+O,GAAuB/O,GAAQ,aAASp4B,GACxD,GAAgBmnC,GAAuB/O,GAAQ,iBAAkBwN,IAAM,WACjExN,EAAMR,SACRQ,EAAMv0B,WAAWkV,QAErB,KACA,GAAgBouB,GAAuB/O,GAAQ,iBAAkBwN,IAAM,WACrE,IAAIgC,EACAC,IAAoBtmC,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,KAAmBA,UAAU,GACvC,QAAzCqmC,EAAmBxP,EAAMv0B,kBAA6C,IAArB+jC,GAA+BA,EAAiBppB,uBACtGyM,aAAamN,EAAM0P,qBACnB1P,EAAM0P,oBAAsB,KACxBD,IACFzP,EAAM9R,OAAS,OACf8R,EAAM/2B,WAAQrB,IAGlBo4B,EAAMxB,UAAUvE,OAAO,CACrBF,sBAAuBgV,GAAuB/O,KAEhDA,EAAMv3B,KAAK,SACb,KACA,GAAgBsmC,GAAuB/O,GAAQ,wBAAyBwN,IAAM,WAC5E,IAAI1V,EAAckI,EAAMxB,UAAUf,iBAAiB,CAAC,GACpDuC,EAAM2P,WAAW9/B,SAAQ,SAAUqoB,GAClBA,EAAKnnB,SACXouB,cAAc,CACrB1H,QAASK,GAEb,GACF,KACAkI,EAAM33B,gBAAgB,KACtB,IAAIunC,EAAqBv0B,EAAQyH,UAC/BA,OAAmC,IAAvB8sB,EAAgC,KAAOA,EACnDvD,EAAehxB,EAAQgxB,aACvBwD,EAAwBx0B,EAAQkrB,eAChCA,OAA2C,IAA1BsJ,EAAmC,CAAC,EAAIA,EACzDC,EAAmBz0B,EAAQ00B,QAC3BA,OAA+B,IAArBD,EAA8B,KAAOA,EAC/CE,EAAiB30B,EAAQ20B,eACzBC,EAAwB50B,EAAQ60B,mBAChCA,OAA+C,IAA1BD,EAAmC,IAAMA,EAC9DE,EAAwB90B,EAAQ+0B,aAChCA,OAAyC,IAA1BD,EAAmC,KAAOA,EACzDE,EAAwBh1B,EAAQi1B,eAChCA,OAA2C,IAA1BD,EAAmC,KAAOA,EAC3DE,EAAwBl1B,EAAQ8jB,cAChCA,OAA0C,IAA1BoR,EAAmC,KAAOA,EAC5D,GAAkB,OAAdztB,EACF,MAAM,IAAI1Z,MAAM,GAAU,wCAE5B,GAAqB,OAAjBgnC,EACF,MAAM,IAAIhnC,MAAM,GAAU,2CAE5B,GAAmC,mBAAxBgnC,EAAazvB,OACtB,MAAM,IAAIvX,MAAM,sLAMlB,GAJ4C,mBAAjCgnC,EAAanwB,iBACtBmwB,EAAanwB,gBAAgB,qBAAqBpT,OC9HxD,SD8HwE,MAGhEyjC,GAA4C,mBAAnBA,EAC3B,MAAM,IAAIlnC,MAAM,GAAU,sDA+B5B,GA1BA42B,EAAM50B,OAASglC,EACfpQ,EAAMsQ,eAAiBA,EACvBtQ,EAAMld,UAAYA,EAClBkd,EAAMhb,OAAS,KACfgb,EAAMv0B,WAAa,KACnBu0B,EAAMxB,UAAY,GAAM,CACtB1b,UAAWA,IAEbkd,EAAMb,cAAgBA,EACtBa,EAAMR,SAAU,EAChBQ,EAAMnC,gBAAkB,CACtB2S,QAAS,GAAc,CACrBnE,aAAcA,IAEhBoE,eAAgB,CAAC,GAEnBzQ,EAAM0Q,oBAAsBR,EAC5BlQ,EAAM0P,oBAAsB,KAC5B1P,EAAMU,WAAauO,GACnBjP,EAAMvB,gBAAkB8H,EACxBvG,EAAMmI,gBAAkB,KACpB6H,IAEFhQ,EAAM2Q,gBAAkBX,GAE1BhQ,EAAM4Q,oBAAsBxX,EACxB2W,EAAS,CACX,IAAIc,EAAmC,kBAAZd,OAAwBnoC,EAAYmoC,EAC/D/P,EAAM1H,I1B1JwB,WAClC,IAAIiD,EAAQpyB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC7E2nC,EAAgBvV,EAAMwV,OACxBA,OAA2B,IAAlBD,EAA2BxO,KAAkBwO,EACtDE,EAAsBzV,EAAM0V,aAC5BA,OAAuC,IAAxBD,EAAiCvN,KAAuBuN,EACzE,OAAO,SAAU9Y,GACf,IAAI6B,EAAwB7B,EAAK6B,sBAWjCA,EAAsB2G,WAVtB,SAA2BiH,GACzB,IAAIlQ,EAAUlqB,OAAOC,KAAKm6B,GAAWl6B,QAAO,SAAU2J,EAAKwe,GACzD,OAAO,GAAc,GAAc,CAAC,EAAGxe,GAAM,CAAC,EAAG,GAAgB,CAAC,EAAGwe,EAAS+R,EAAU/R,IAC1F,GAAGmE,EAAsByE,UAAUf,iBAAiB,CAAC,IACjDyT,EAAQD,EAAavN,aAAajM,GACtC,OAAOsZ,EAAOjT,UAAUoT,EAC1B,EAKA,IAAIC,OAAiBvpC,EACjB2+B,EAAiBxM,EAAsB0E,gBAC3C,MAAO,CACLU,cAAe,SAAuBN,GACpC,IAAIpH,EAAUoH,EAAMpH,QAChB2J,EAAa6P,EAAavN,aAAajM,QACpB7vB,IAAnBupC,GAAiCtN,GAAQsN,EAAgB/P,KAC3D2P,EAAOvf,MAAM4P,GACb+P,EAAiB/P,EAErB,EACAhC,UAAW,WACTrF,EAAsB0E,gBAAkB,GAAc,GAAc,CAAC,EAAG8H,GAAiB0K,EAAatN,aAAaoN,EAAO3f,SAC1H2f,EAAOK,UAAS,SAAUF,GACxBnX,EAAsBnC,WAAWqZ,EAAatN,aAAauN,GAC7D,GACF,EACA1R,QAAS,WACP,IAAI6R,EAC+B,QAAlCA,EAAgBN,EAAOzQ,aAAqC,IAAlB+Q,GAAoCA,EAAc9nC,KAAKwnC,EACpG,EACAtR,YAAa,WACXsR,EAAO5W,SACT,EAEJ,CACF,C0B6GgBmX,CAAuBT,GACnC,CAIA,O9B5IK1S,IAAmB,SAAUjG,GAClC,IAAIqZ,EAAmBC,EAEvB,OAAmD,QAA1CD,EADIrZ,EAAKjM,OACkBwlB,iBAA6C,IAAtBF,GAAkG,QAAzDC,EAAwBD,EAAkBviB,iBAAiD,IAA1BwiB,OAA3E,EAAuHA,EAAsBvjC,QAAQ,qBAAuB,CACxQ,GAAG,CACDowB,SAAU,WACR,OAAO,CACT,K8BmIE2B,EAAM1H,IAAIsG,MAELoB,CACT,CAwYA,OA5iBoBO,EAyKP2O,EAzKoBlO,EAyKL,CAAC,CAC3Bp2B,IAAK,mBACLwhB,IAaA,WAEE,MAAuB,YAAhB3kB,KAAKymB,MACd,GACC,CACDtjB,IAAK,MACL6B,MAAO,WAEL,IADA,IAAI40B,EAAS55B,KACJ8wB,EAAOpvB,UAAUD,OAAQymC,EAAa,IAAInmC,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACrFkX,EAAWlX,GAAQtvB,UAAUsvB,GAE/B,IAAIiZ,EAAoB/B,EAAWn/B,KAAI,SAAU9E,GAC/C,IAAIimC,EAAgB,GAAc,CAChCvS,UAAWhG,EACXoG,QAASpG,EACTqG,YAAarG,EACb+F,cAAe/F,GACd1tB,EAAG,CACJquB,sBAAuBsH,KAMzB,OAJAA,EAAOsO,WAAW5lC,KAAK,CACrB6nC,QAASlmC,EACTqF,SAAU4gC,IAELA,CACT,IAUA,OANIlqC,KAAK+3B,SACPkS,EAAkB7hC,SAAQ,SAAUhG,GAClCA,EAAEu1B,YACFv1B,EAAE21B,SACJ,IAEK/3B,IACT,GAKC,CACDmD,IAAK,QACL6B,MAAO,WACL,IAAK,IAAIolC,EAAQ1oC,UAAUD,OAAQ4oC,EAAoB,IAAItoC,MAAMqoC,GAAQE,EAAQ,EAAGA,EAAQF,EAAOE,IACjGD,EAAkBC,GAAS5oC,UAAU4oC,GAUvC,OARAtqC,KAAKkoC,WAAW9hC,QAAO,SAAUhE,GAC/B,OAAOioC,EAAkB9V,SAASnyB,EAAE+nC,QACtC,IAAG/hC,SAAQ,SAAUhG,GACnB,OAAOA,EAAEkH,SAAS0uB,aACpB,IACAh4B,KAAKkoC,WAAaloC,KAAKkoC,WAAW9hC,QAAO,SAAUhE,GACjD,OAAQioC,EAAkB9V,SAASnyB,EAAE+nC,QACvC,IACOnqC,IACT,GAGC,CACDmD,IAAK,mBACL6B,MAAO,WAEL,OAAOhF,KAAK6wB,IAAI5uB,MAAMjC,KAAM0B,UAC9B,GASC,CACDyB,IAAK,YACL6B,MAAO,SAAmB0sB,GAExB,OAAO1xB,KAAK40B,WAAW,CAAClD,GAC1B,GAOC,CACDvuB,IAAK,aACL6B,MAAO,SAAoBwsB,GACzB,IAAKzvB,MAAMmF,QAAQsqB,GACjB,MAAM,IAAI7vB,MAAM,GAAU,iFAE5B,GAAI6vB,EAAQ1P,MAAK,SAAU4P,GACzB,MAA8B,mBAAhBA,EAAOU,MAAgD,mBAAlBV,EAAOc,MAC5D,IACE,MAAM,IAAI7wB,MAAM,GAAU,sEAG5B,OADA3B,KAAK+2B,UAAUnC,WAAWpD,GACnBxxB,IACT,GASC,CACDmD,IAAK,eACL6B,MAAO,SAAsB0sB,GAE3B,OAAO1xB,KAAK20B,cAAc,CAACjD,GAC7B,GAQC,CACDvuB,IAAK,gBACL6B,MAAO,SAAuBwsB,GAC5B,IAAKzvB,MAAMmF,QAAQsqB,GACjB,MAAM,IAAI7vB,MAAM,GAAU,uFAE5B,GAAI6vB,EAAQ1P,MAAK,SAAU4P,GACzB,MAAiC,mBAAnBA,EAAOgB,OACvB,IACE,MAAM,IAAI/wB,MAAM,GAAU,sDAG5B,OADA3B,KAAK+2B,UAAUpC,cAAcnD,GACtBxxB,IACT,GAQC,CACDmD,IAAK,QACL6B,MAAO,WACL,IAAIi1B,EAASj6B,KACb,GAAIA,KAAK+3B,QACP,MAAM,IAAIp2B,MAAM,GAAU,qDAQ5B,IAAIqC,EAAahE,KAAKgE,YAAc,EAAoBhE,KAAK2D,OAAQ3D,KAAKqb,WAW1E,GAVArX,EAAWkV,OAAS,WAQlB,OAPA+gB,EAAOxT,OAAS,UAChBwT,EAAO2G,gBAAe,GAMf58B,EAAWqV,8BACpB,EACIrZ,KAAKkpC,gBAAiB,CAGxB,IAAIqB,EAAa,CACfrxB,OAAQ,WACN,OAAO,IAAIkB,QAAQuX,EACrB,GAEF3xB,KAAKwqC,kBAAoBxmC,EAAWkV,OAAO0E,KAAK5Z,GAChDA,EAAWkV,OAAS,WAClB,IAAIuxB,EAAkBxQ,EAAOlD,UAAUlJ,YACnC6c,EAAuB,EAAoBH,EAAYE,EAAgB15B,MAAMnN,MAAO6mC,EAAgB15B,OAYxG,OAXA25B,EAAqB/nC,KAAK,UAAU,SAAUy0B,GAC5C,IAAIrmB,EAAQqmB,EAAMrmB,MAClB05B,EAAgB9tB,0CAA0C5L,GAC1DkpB,EAAOuQ,mBACT,IAEAE,EAAqBhoC,GAAG,UAAU,SAAUm3B,GAC1C,IAAI9oB,EAAQ8oB,EAAM9oB,MAClB05B,EAAgBhuB,SAAS1L,EAC3B,IACAkpB,EAAOiP,gBAAgBwB,GAChB1mC,CACT,CACF,CAsCA,GAlCAA,EAAWtB,GAAG,SAAS,SAAUy3B,GAC/B,IAAI34B,EAAQ24B,EAAM34B,MAClB,KAAMA,aAAiBG,OAAQ,CAE7B,IAAIC,EAAMJ,EACVA,EAAQsE,OAAOC,KAAKnE,GAAKoE,QAAO,SAAU2J,EAAKxM,GAE7C,OADAwM,EAAIxM,GAAOvB,EAAIuB,GACRwM,CACT,GAAG,IAAIhO,MAAMC,EAAI6lB,SACnB,CAOAjmB,EAAMA,MAAQA,EACdy4B,EAAOz4B,MAAQA,EACfy4B,EAAOxT,OAAS,QAChBwT,EAAO2G,gBAAe,GAGtB3G,EAAOj5B,KAAK,QAASQ,EACvB,IACAxB,KAAKgE,WAAaA,EAClBhE,KAAKkoC,WAAW9/B,SAAQ,SAAUmyB,GACjBA,EAAMjxB,SACZquB,WACX,IACA33B,KAAK+2B,UAAU3E,KAAK,CAClBE,sBAAuBtyB,KACvB6R,OAAQ,KACRme,QAAShwB,KAAKg3B,kBAEZh3B,KAAK0gC,gBAAiB,CACxB,IAAIiK,EAAyB3qC,KAAKqgC,eAIlCrgC,KAAKqgC,eAAiB0F,GAAMpU,GAM5BoU,IAAM,WACJ9L,EAAOoG,eAAiBsK,CAC1B,GAFA5E,EAGF,MASS/lC,KAAK+2B,UAAUzC,aAAa7yB,OAAS,GAC5CzB,KAAKqgC,iBAKPrgC,KAAKud,OAASvd,KAAK+2B,UAAUlJ,YAI7B7tB,KAAK+3B,SAAU,EACf/3B,KAAKkoC,WAAW9/B,SAAQ,SAAUsyB,GACjBA,EAAMpxB,SACZyuB,SACX,GACF,GAQC,CACD50B,IAAK,UACL6B,MAAO,WACL,IAAI4lC,EACJ5qC,KAAKqgC,eAAe8F,SACpBnmC,KAAK4gC,eAAeuF,SACpB/a,aAAaprB,KAAKioC,qBAClBjoC,KAAK20B,cAAc30B,KAAK+2B,UAAUzC,cAClCt0B,KAAK+2B,UAAUrE,UAKf1yB,KAAK+3B,SAAU,EAIf/3B,KAAKkD,qBACqC,QAAzC0nC,EAAoB5qC,KAAKgE,kBAA8C,IAAtB4mC,GAAwCA,EAAkB1nC,qBAC5GlD,KAAKgE,WAAa,KAClBhE,KAAKud,OAAS,KACdvd,KAAKkoC,WAAW9/B,SAAQ,SAAU0yB,GACjBA,EAAMxxB,SACZ0uB,aACX,GACF,GACC,CACD70B,IAAK,wBACL6B,MAAO,WACL,IAAIq1B,EAASr6B,KACRA,KAAKioC,sBACRjoC,KAAKioC,oBAAsBld,YAAW,WACpCsP,EAAO5T,OAAS,UAChB4T,EAAOuG,gBACT,GAAG5gC,KAAKipC,qBAEZ,GAOC,CACD9lC,IAAK,aACL6B,MAAO,SAAoBgrB,GACzB,IAAIyK,EAASz6B,KACT6qC,IAAoBnpC,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,KAAmBA,UAAU,GACvF,IAAK1B,KAAKgE,WACR,MAAM,IAAIrC,MAAM,GAAU,+DAK5B3B,KAAK+2B,UAAUmK,iBACf,IAAI7Q,EAAiC,mBAAZL,EAAyBA,EAAQhwB,KAAK+2B,UAAUf,iBAAiB,CAAC,IAAMhG,EAC7FhwB,KAAK03B,eAAiBmT,EACxB7qC,KAAK03B,cAAc,CACjB1H,QAASK,EACTF,WAAY,SAAoBkW,GAC9BD,GAA4C,mBAAjBC,EAA8BA,EAAahW,GAAegW,EAAc5L,EAAO1D,WAC1G0D,EAAO4F,iBACP5F,EAAOoG,uBACT,KAGFuF,GAAoB/V,EAAarwB,KAAK+2B,WACtC/2B,KAAKqgC,iBACLrgC,KAAK6gC,wBAET,GACC,CACD19B,IAAK,aACL6B,MAAO,WAKL,OAJIhF,KAAK+3B,SAEP/3B,KAAK+2B,UAAUmK,iBAEVlhC,KAAK+2B,UAAUf,iBAAiB,CAAC,EAC1C,GACC,CACD7yB,IAAK,YACL6B,MAAO,WACL,IAAIk7B,EAAYx+B,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EACrF,IAAK1B,KAAK+3B,QACR,MAAM,IAAIp2B,MAAM,GAAU,8DAE5B,OAAO3B,KAAKi5B,WAAWiH,EACzB,GACC,CACD/8B,IAAK,UACL6B,MAAO,WACL,IAAKhF,KAAKgE,WACR,MAAM,IAAIrC,MAAM,GAAU,4DAE5B3B,KAAKgE,WAAWsa,aAAapF,QAC/B,IA1iB8DqgB,GAAY,GAAkBT,EAAYp4B,UAAW64B,GAAiBC,GAAa,GAAkBV,EAAaU,GAAc1zB,OAAO2d,eAAeqV,EAAa,YAAa,CAAElZ,UAAU,IA4iBrP6nB,CACT,CA3gBiC,CA2gB/B,IACF,iBEljBWqD,IAAuC,IAAA/e,eAAc,MCDhE,gBCAA,SAAS,GAAeyC,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,GAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,GAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,GAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CCKlL,IAAIgrB,GAAoB,CAAC,UAAU3lC,OAAO,UAAc,KAAM,wBAAwBA,OAAO,GAAS,KAAM,8BAA8BA,OAAO,GAAS,MACtJ4lC,GAAkB,+BAA+B5lC,OAAO,GAAS,KAC9D,SAAS6lC,GAAoBnX,GAClC,IAAIoX,EDKa,IAHC,IAAAC,aAAW,SAAU1iB,GACnC,OAAOA,EAAI,CACb,GAAG,GACwC,GAChB,GCLzB2M,EAAgB5B,IAChB4X,GCVG,IAAAnf,YAAW6e,IDWdO,EAAiBD,aAAiD,EAASA,EAAYC,eACvFrX,GAAe,IAAAC,QAAOH,GACtBwX,GAAY,IAAArX,QAAO,MAOvB,GAHImX,IACFE,EAAYF,EAAYG,cAEA,OAAtBD,EAAUpX,QAAkB,CAI9B,IAAIhb,EAAS,IAAI,GAAc4a,IAC3BsB,GAAiBiW,KAOnBnyB,EAAOwnB,gBAAkB2K,GAAkB,CAAC,GAE9CG,GAAiB1X,EAAM6U,aAAc,GAAGvjC,OAAO2lC,GAAmB,CAAC3V,GAAiB4V,OAKhF5V,GAAiBiW,IACnBnyB,EAAO2f,QAELzD,GAGFA,EAAcqW,aAAa,CACzBvyB,OAAQA,IAGG4a,EAAMwU,QACrBgD,EAAUpX,QAAUhb,CACtB,CAEE,IAuBMwyB,EAvBFvyB,EAAUmyB,EAAUpX,QACpByX,EAAY3X,EAAaE,SACzByX,EAAUtwB,YAAcyY,EAAMzY,YAChClC,EAAQoE,OAAOhT,SAASupB,EAAMzY,WAAWnC,SACzC8a,EAAaE,QAAUJ,GAErB6X,EAAUhD,eAAiB7U,EAAM6U,eACnC6C,GAAiB1X,EAAM6U,aAAc,GAAGvjC,OAAO2lC,GAAmB,CAAC3V,GAAiB4V,MACpF7xB,EAAQnV,WAAWyU,UAAUqb,EAAM6U,cAAczvB,SACjD8a,EAAaE,QAAUJ,GAErB6X,EAAUjU,gBAAkB5D,EAAM4D,gBACpCve,EAAQue,cAAgB5D,EAAM4D,cAC9B1D,EAAaE,QAAUJ,GAErB6X,EAAUpD,iBAAmBzU,EAAMyU,iBAIrCpvB,EAAQ+vB,gBAAkBpV,EAAMyU,eAChCvU,EAAaE,QAAUJ,GAErB6X,EAAUlD,qBAAuB3U,EAAM2U,sBAIzCtvB,EAAQ8vB,oBAA6E,QAAtDyC,EAAwB5X,EAAM2U,0BAA0D,IAA1BiD,EAAmCA,EAAwB,IACxJ1X,EAAaE,QAAUJ,GAY3B,IAAIM,GAAkB,IAAAH,QAAO,MACzB2X,GAAQ,KAAAC,uBAAqB,IAAAzb,cAAY,WAC3C,IAAIlX,EAASoyB,EAAUpX,QAiBvB,OAdgC,OAA5BE,EAAgBF,QAEbhb,EAAO6e,UACV7e,EAAO2f,QACPqS,MAOF9f,aAAagJ,EAAgBF,SAC7Bhb,EAAOwb,uBAAwB,GAE1B,WAWLN,EAAgBF,QAAUnJ,YAV1B,WACE7R,EAAOwZ,SACT,IAaAxZ,EAAOwb,uBAAwB,CACjC,CACF,GAAG,CAACwW,KAAe,WACjB,OAAOI,EAAUpX,OACnB,IAAG,WACD,OAAOoX,EAAUpX,OACnB,IACA,OAAO0X,CACT,CACA,SAASJ,GAAiB7C,EAAcmD,GACM,mBAAjCnD,EAAanwB,iBAGxBszB,EAAW1lC,OAAOiR,SAASjP,SAAQ,SAAUmf,GAC3CohB,EAAanwB,gBAAgB+O,EAC/B,GACF,CElJA,IAAI,GAAY,CAAC,YACjB,SAAS,GAAyBzI,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAMpe,SAAS,GAAcuQ,GAC5B,IAAIla,EAAWka,EAAKla,SAEhB2C,EAAS+xB,GADH,GAAyBxa,EAAM,KAEzC,OAAKvX,EAAO6e,QAGQ,gBAAoBjM,EAAqBigB,SAAU,CACrE/mC,MAAOkU,GACO,gBAAoBmV,EAAa0d,SAAU,CACzD/mC,MAAOkU,EAAO6d,WACbxgB,IANM,IAOX,CCnBA,SAAS,GAAQgK,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAI3O,IAAI,GAAYgR,EAAoC,CAClD5nB,KAAM,aACN2nB,WAAW,IAET0a,GAAmB,SAA0BthC,EAAOuhC,GACtD,OAAOA,EAAKvhC,EACd,EAgFA,GAxEuB,SAA0BsnB,GAC/C,IAAIC,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAEpF,OADAC,EAAeI,EAAU,MAClB,SAAUE,GACf,IAGIga,EACAC,EAHFC,GADSla,GAAgB,CAAC,GACJma,UACtBA,OAA+B,IAAnBD,EAA4BJ,GAAmBI,EAG7D,MAAO,CACLja,OAAQ,gBACRC,KAAM,SAAcC,GAClB,IAAIC,EAAwBD,EAAYC,sBACxCN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBA,KACrB,EACN,EACAE,OAAQ,SAAgBC,GACtB,IAAIH,EAAwBG,EAAcH,sBAC1CN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBE,IAAiB,CAAC,EAAG,CACtFH,sBAAuBA,KACrB,EACN,EACAI,QAAS,SAAiB0E,GACxB,IAAIrmB,EAAQqmB,EAAMrmB,MAElB,OADAkhB,IACOlhB,EAAMxB,kBAAkB,aAASpP,EAC1C,EACAwyB,eAAgB,SAAwBC,EAAaH,GACnD,OAAO,GAAc,GAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvD0Z,UAAWtsC,KAAKuyB,qBAAqBE,IAEzC,EACAF,qBAAsB,SAA8BsH,GAClD,IAAItc,EAASsc,EAAMtc,OACjB+Y,EAAiBuD,EAAMvD,eACvBvlB,EAAQ8oB,EAAM9oB,MAWhB,OAVKm7B,IACHA,EAAU,SAAiBxhC,GACzB2hC,EAAU3hC,GAAO,SAAU8Q,GACzB,OAAO+B,EAAO/S,SAASgR,GAAGtC,QAC5B,GACF,EACAizB,EAAS,WACP5uB,EAAO/S,SAAS,IAAI0O,QACtB,GAEK,CACLxO,MAAOqG,EAAMrG,OAAS,GACtB6hC,OAAQL,EACRjnB,MAAOknB,EACPja,aAAcA,EACdqE,gBAAiBD,EAAeC,gBAEpC,EACAP,iBAAkB,SAA0BhG,EAASmK,GACnD,IACIzvB,EADmByvB,EAAMgG,iBACAz1B,OAAS,GACtC,MAAc,KAAVA,GAAgBslB,GAAWA,EAAQtlB,QAAUA,EACxCslB,EAEF,GAAc,GAAc,CAAC,EAAGA,GAAU,CAAC,EAAG,CACnDtlB,MAAOA,GAEX,EACAurB,0BAA2B,SAAmCkK,EAAkB5F,GAC9E,IAAIvK,EAAUuK,EAAMvK,QACpB,OAAOmQ,EAAiB5wB,kBAAkB,QAASygB,EAAQtlB,OAAS,GACtE,EAEJ,CACF,EC5FO,SAAS8hC,KACd,IAAK,IAAI1b,EAAOpvB,UAAUD,OAAQgrC,EAAa,IAAI1qC,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACrFyb,EAAWzb,GAAQtvB,UAAUsvB,GAE/B,OAAOyb,EAAWrmC,OAAOiR,SAASuK,KAAK,IACzC,CCLA,IAAI,GAAY,CAAC,UAAW,WAAY,kBAAmB,WAAY,UAAW,WAAY,cAAe,QAAS,YAAa,qBAAsB,sBAAuB,uBAAwB,aAAc,gBACtN,SAAS,KAAiS,OAApR,GAAW9b,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAI3e,IAAIkX,GAAqB,gBAAoB,OAAQ,CACnDtR,EAAG,qZAEL,SAAS4mB,GAAkBjc,GACzB,IAAIgc,EAAahc,EAAKgc,WACtB,OAAoB,gBAAoB,MAAO,CAC7CnH,UAAWkH,GAAG,2BAA4BC,EAAWE,YACrDC,MAAO,KACPC,OAAQ,KACRC,QAAS,YACT,cAAe,QACd1V,GACL,CACA,IAAI+C,GAAqB,gBAAoB,OAAQ,CACnDrU,EAAG,2MAEL,SAASinB,GAAiBlT,GACxB,IAAI4S,EAAa5S,EAAM4S,WACvB,OAAoB,gBAAoB,MAAO,CAC7CnH,UAAWkH,GAAG,0BAA2BC,EAAWO,WACpDF,QAAS,YACTF,MAAO,KACPC,OAAQ,KACR,cAAe,QACd1S,GACL,CACA,IAAIO,GAAqB,gBAAoB,IAAK,CAChDuS,KAAM,OACNC,SAAU,WACI,gBAAoB,IAAK,CACvCC,UAAW,iBACXC,YAAa,KACC,gBAAoB,SAAU,CAC5CC,cAAe,KACfb,GAAI,KACJc,GAAI,KACJnwB,EAAG,OACY,gBAAoB,OAAQ,CAC3C2I,EAAG,+BACW,gBAAoB,mBAAoB,CACtDlP,cAAe,YACf3V,KAAM,SACNqjB,KAAM,UACNipB,GAAI,YACJC,IAAK,KACLC,YAAa,kBAEf,SAASC,GAAmBnT,GAC1B,IAAIkS,EAAalS,EAAMkS,WACvB,OAAoB,gBAAoB,MAAO,CAC7CG,MAAO,KACPC,OAAQ,KACRC,QAAS,YACTa,OAAQ,OACRrI,UAAWkH,GAAG,4BAA6BC,EAAWmB,aACtD,cAAe,QACdlT,GACL,CACO,SAASmT,GAAU/S,GACxB,IAAIgT,EAAUhT,EAAMgT,QAClBC,EAAWjT,EAAMiT,SACjBxX,EAAkBuE,EAAMvE,gBACxByX,EAAWlT,EAAMkT,SACjBC,EAAUnT,EAAMmT,QAChBC,EAAWpT,EAAMoT,SACjBC,EAAcrT,EAAMqT,YACpBnpC,EAAQ81B,EAAM91B,MACdopC,EAAYtT,EAAMsT,UAClBC,EAAwBvT,EAAMwT,mBAC9BC,OAAsC,IAA1BF,EAAmCtB,GAAmBsB,EAClEG,EAAwB1T,EAAM2T,oBAC9BC,OAAuC,IAA1BF,EAAmC9B,GAAoB8B,EACpEG,EAAwB7T,EAAM8T,qBAC9BC,OAAwC,IAA1BF,EAAmCjB,GAAqBiB,EACtEG,EAAmBhU,EAAM2R,WACzBA,OAAkC,IAArBqC,EAA8B,CAAC,EAAIA,EAChDC,EAAejU,EAAMiU,aACrBjb,EAAQ,GAAyBgH,EAAO,IAmB1C,OAAoB,gBAAoB,MAAO,GAAS,CAAC,EAAGhH,EAAO,CACjEwR,UAAWkH,GAAG,gBAAiBC,EAAWn3B,KAAMwe,EAAMwR,aACvC,gBAAoB,OAAQ,CAC3C0J,IAAKlB,EACLmB,OAAQ,GACR3J,UAAWkH,GAAG,qBAAsBC,EAAWyC,MAC/CC,YAAY,EACZjB,SAzBF,SAAsB7vB,GACpBA,EAAM+wB,iBACN/wB,EAAMgxB,kBACFnB,GACFA,EAAS7vB,GAEP0vB,EAAS7Z,SACX6Z,EAAS7Z,QAAQob,MAErB,EAiBErB,QAhBF,SAAqB5vB,GACnBA,EAAM+wB,iBACN/wB,EAAMgxB,kBACNpB,EAAQ5vB,GACJ0vB,EAAS7Z,SACX6Z,EAAS7Z,QAAQqb,OAErB,GAUgB,gBAAoB,QAAS,CAC3CP,IAAKjB,EACLzI,UAAWkH,GAAG,sBAAuBC,EAAWrf,OAChDoiB,aAAc,MACdC,YAAa,MACbC,eAAgB,MAChBvB,YAAaA,EACbwB,YAAY,EACZC,UAAW,IACX3uC,KAAM,SACN+D,MAAOA,EACPgpC,SAAUA,EACVI,UAAWA,IACI,gBAAoB,SAAU,CAC7C9I,UAAWkH,GAAG,uBAAwBC,EAAWoD,QACjD5uC,KAAM,SACNo3B,MAAO0W,EAAae,mBACN,gBAAoBpB,EAAY,CAC9CjC,WAAYA,KACI,gBAAoB,SAAU,CAC9CnH,UAAWkH,GAAG,sBAAuBC,EAAWsD,OAChD9uC,KAAM,QACNo3B,MAAO0W,EAAaiB,iBACpBC,OAAyB,IAAjBjrC,EAAMvD,QAAgB80B,GAChB,gBAAoBgY,EAAW,CAC7C9B,WAAYA,KACI,gBAAoB,OAAQ,CAC5CnH,UAAWkH,GAAG,iCAAkCC,EAAWyD,kBAG3DD,QAAS1Z,GACK,gBAAoBsY,EAAa,CAC/CpC,WAAYA,MAEhB,CCjJA,SAAS,GAAQlsB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,YAAa,kBAAmB,gBACjD,SAAS,KAAiS,OAApR,GAAWza,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAQ2f,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAeiO,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,GAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,GAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,GAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAGlL,SAAS,GAAyBjB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAKpe,SAAS,GAAUuQ,GACxB,IAAI4b,EAAY5b,EAAK4b,UACnB8D,EAAuB1f,EAAK2f,gBAC5BA,OAA2C,IAAzBD,GAAyCA,EAC3DpB,EAAete,EAAKse,aACpBjb,EAAQ,GAAyBrD,EAAM,IACrC4f,ECvBC,SAAsBvc,EAAOqB,GAClC,OAAOD,GAAa,GAAkBpB,EAAOqB,EAC/C,CDqBsBmb,CAAa,CAC7BjE,UAAWA,GACV,CACDnV,aAAc,kBAEhBxsB,EAAQ2lC,EAAc3lC,MACtB6hC,EAAS8D,EAAc9D,OACvBhW,EAAkB8Z,EAAc9Z,gBAEhC9G,EAAa,IADC,IAAAC,UAAShlB,GACgB,GACvC6lC,EAAa9gB,EAAW,GACxB+gB,EAAgB/gB,EAAW,GACzBse,GAAW,IAAA9Z,QAAO,MACtB,SAASzpB,EAASC,GAChB+lC,EAAc/lC,GACV2lC,GACF7D,EAAO9hC,EAEX,CAuBIC,IAAU6lC,GAAcjZ,SAASmZ,gBAAkB1C,EAAS7Z,SAC9Dsc,EAAc9lC,GAEhB,IAAIgmC,EAAU,CACZ3C,SAAUA,EACVxX,gBAAiBA,EACjByX,SAtBF,SAAkB3vB,GAChB7T,EAAS6T,EAAMsyB,cAAc3rC,MAC/B,EAqBEipC,QA7BF,WACEzjC,EAAS,IACJ4lC,GACH7D,EAAO,GAEX,EAyBE2B,SArBF,SAAkB7vB,GACX+xB,GACH7D,EAAOgE,GAELzc,EAAMoa,UACRpa,EAAMoa,SAAS7vB,EAEnB,EAeErZ,MAAOurC,EACPxB,aAAc,GAAc,CAC1Be,kBAAmB,0BACnBE,iBAAkB,0BACjBjB,IAEL,OAAoB,gBAAoBlB,GAAsB,GAAS,CAAC,EAAG/Z,EAAO4c,GACpF,CElFO,SAASpiC,GAAeiP,EAAQhU,EAAOvE,GAC5C,OAAIuY,EAAOxM,MAAMtE,oBAAoBlD,GAC5BgU,EAAOxM,MAAM5C,2BAA2B5E,EAAOvE,GAC7CuY,EAAOxM,MAAMvF,mBAAmBjC,GAClCgU,EAAOxM,MAAMzC,eAAe/E,EAAOvE,GAEnCuY,EAAOxM,MAAMvC,0BAA0BjF,EAAOvE,EAEzD,CCRA,SAAS,GAAQub,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAExU,SAASqwB,GAAwBngB,GACtC,IAAI6B,EAAwB7B,EAAK6B,sBAC/B/U,EAASkT,EAAKlT,OACdszB,EAAOpgB,EAAK1rB,UACZkyB,EAAaxG,EAAKwG,WA+BpB,OA9BwB,WACtB,IAAK,IAAInG,EAAOpvB,UAAUD,OAAQJ,EAAO,IAAIU,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC/E3vB,EAAK2vB,GAAQtvB,UAAUsvB,GAEzB,IAAI8f,EAAYzvC,EAAK,GACnB6Q,EAAa7Q,EAAK,GAClB0vC,EAAS1vC,EAAK,GACd2vC,OAAuB,IAAXD,EAAoB,iBAAmBA,EACjDhsC,EAA4B,iBAAT8rC,EAAoBA,EAAOA,EAAK3+B,GACnC,IAAhB7Q,EAAKI,QAAqC,WAArB,GAAQJ,EAAK,IACpCixB,EAAsB6W,oBAAoB9nC,EAAK,IACxB,UAAdyvC,GAA0C,IAAhBzvC,EAAKI,QAAgC,IAAhBJ,EAAKI,QACxD6M,GAAeiP,EAAQxY,EAAWmN,IAErCogB,EAAsB6W,oBAAoB,CACxC8H,eAAgB,iBAChBha,WAAYA,EACZ6Z,UAAWA,EACXha,QAAS,CACPka,UAAWA,EACXptC,MAAO2Z,EAAOP,WACdk0B,QAAS,CAAC,GAAG9rC,OAAOL,EAAW,KAAKK,OAAO8M,KAE7CnN,UAAWA,GAMnB,CAEF,CCtCA,SAAS,GAAQwb,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,OAAQ,gBACvB,GAAa,CAAC,eAAgB,SAChC,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAyBzB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAG3e,IAAI,GAAYqR,EAAoC,CAClD5nB,KAAM,kBACN2nB,WAAW,IAETva,GAAe,CAAC,YAAa,aAAc,YA2P/C,GA9O4B,SAA+Bib,GACzD,IAAIC,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAEpF,OADAC,EAAeI,EAAU,MAClB,SAAUE,GACf,IAAIzB,EAAOyB,GAAgB,CAAC,EAC1BntB,EAAY0rB,EAAK1rB,UACjBosC,EAAgB1gB,EAAKvnB,SACrBA,OAA6B,IAAlBioC,EAA2B,KAAOA,EAC7CC,EAAa3gB,EAAK4gB,MAClBA,OAAuB,IAAfD,EAAwB,GAAKA,EACrCE,EAAgB7gB,EAAK8gB,SACrBA,OAA6B,IAAlBD,GAAmCA,EAC9CE,EAAqB/gB,EAAKghB,cAC1BA,OAAuC,IAAvBD,EAAgC,GAAKA,EACrDE,EAAcjhB,EAAKvgB,OACnBA,OAAyB,IAAhBwhC,EAAyB36B,GAAe26B,EACjDC,EAAwBlhB,EAAKmhB,kBAC7BA,OAA8C,IAA1BD,GAA0CA,EAC9DE,EAAsBphB,EAAKqhB,eAC3BA,OAAyC,IAAxBD,EAAiC,SAAUE,GAC1D,OAAOA,CACT,EAAIF,EACN,IAAK9sC,EACH,MAAM,IAAIpD,MAAM,GAAU,wCAE5B,IAAK,aAAa6hB,KAAKta,GACrB,MAAM,IAAIvH,MAAM,GAAU,qDAA0DyD,OAAO8D,EAAU,SAEvG,IAAiB,IAAbqoC,GAAqBE,GAAiBJ,EACxC,MAAM,IAAI1vC,MAAM,GAAU,oDAE5B,IAUIqwC,EAGAC,EACAC,EAdAC,EAAc,SAAqB/a,GACrC,IAAIgb,EAAQhb,EAAMztB,KAChB3E,EAAQoyB,EAAM3kB,aAEhB,OAAO,GAAc,GAAc,CAAC,EAD3B,GAAyB2kB,EAAO,KACK,CAAC,EAAG,CAChDpyB,MAAOA,EACPotC,MAAOA,EACP9O,YAAa8O,GAEjB,EAEIC,EAA0B,GAC1BC,GAAqB,EAGrBC,GAAgB,EAGhBC,EAAiB,WAA2B,EAChD,SAASC,IACPD,GACF,CAOA,SAASE,IACP,OAAOH,EAAgBd,EAAgBJ,CACzC,CACA,IAAIz2B,EAAuB,WACzB,OAAO,WAAa,CACtB,EAiDA,MAAO,CACLuX,OAAQ,qBACRC,KAAM,SAAcC,GAClBL,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBD,EAAYC,yBACjC,EACN,EACAE,OAAQ,SAAgBC,GACtBT,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBE,IAAiB,CAAC,EAAG,CACtFH,sBAAuBG,EAAcH,yBACnC,EACN,EACAK,eAAgB,SAAwBC,EAAaH,GACnD,OAAO,GAAc,GAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvD9tB,eAAgB,GAAc,GAAc,CAAC,EAAG8tB,EAAY9tB,gBAAiB,CAAC,EAAG,GAAgB,CAAC,EAAGC,EAAW/E,KAAKuyB,qBAAqBE,MAE9I,EACAF,qBAAsB,SAA8BE,GAClD,IAAI1f,EAAU0f,EAAc1f,QAC1BhC,EAAQ0hB,EAAc1hB,MACtBkoB,EAAaxG,EAAc4D,UAC3B/D,EAAwBG,EAAcH,sBACtC/U,EAASkV,EAAclV,OACrBw0B,EAAQ,GACR96B,EAAc,GAclB,GAbKi7B,GAAcD,GAAkBr3B,IACnCs3B,EAAYtB,GAAwB,CAClCte,sBAAuBA,EACvB/U,OAAQA,EACRxY,UAAWA,EACXkyB,WAAYj3B,KAAKmyB,SAEnB8f,EAAgB,SAAuB//B,GACrCggC,EAAU,QAAShgC,GACnBqL,EAAO9P,sBAAsB1I,EAAWmN,GAAYgH,QACtD,EACA0B,EApF2B,SAAoC2C,EAAQmU,GAC3E,OAAO,SAAUe,GACf,OAAO,SAAU/nB,GACf,IAAI4nB,EAAwBG,EAAcH,sBACxC3C,EAAgB8C,EAAc1f,QAChC,GAAc,KAAVrI,GAAgB2nC,EAElBrgB,EAAS,GAAc,GAAc,CAAC,EAAGN,EAAOa,qBAAqB,GAAc,GAAc,CAAC,EAAGE,GAAgB,CAAC,EAAG,CACvH1f,QAASi/B,MACL,CAAC,EAAG,CACR1f,sBAAuBA,KACrB,OACC,CACL,IAAIqgB,EAAO,CACTjQ,gBAAiBkP,EAAoBnP,GAAgBC,gBAAkBE,GACvED,iBAAkBiP,EAAoBnP,GAAgBE,iBAAmBC,IAE3ErlB,EAAO3C,qBAAqB7V,EAAW2F,EAIvC6a,KAAKqtB,IAAIF,IAAY,KAAMC,GAAM94B,MAAK,SAAU9G,GAC9C,IAAIkE,EAAc26B,EAAoBvO,GAAatwB,EAAQwI,WAAaxI,EAAQwI,UAC5Es3B,EAAwBf,EAAe76B,EAAYlO,KAAI,SAAU8wB,GACnE,IAAIpnB,EAAeonB,EAAMpnB,aACvBzN,EAAQ60B,EAAM70B,MAEhB,OAAO,GAAc,GAAc,CAAC,EAD3B,GAAyB60B,EAAO,KACK,CAAC,EAAG,CAChD70B,MAAOyN,EACP2/B,MAAOptC,GAEX,IAAI,CACF+N,QAAS4c,IAEXqC,EAAS,GAAc,GAAc,CAAC,EAAGN,EAAOa,qBAAqB,GAAc,GAAc,CAAC,EAAGE,GAAgB,CAAC,EAAG,CACvH1f,QAASi/B,MACL,CAAC,EAAG,CACRD,MAAOc,EACPC,mBAAmB,EACnBC,WAAW,EACXC,cAAc,EACd1gB,sBAAuBA,KACrB,EACN,GACF,CACF,CACF,CACF,CAqC6B2gB,CAA2B11B,EAAQvd,OAExD+S,EAAS,CACX,IAAI7M,EAAS6M,EAAQiE,eAAejS,EAAW,CAC7CmL,OAAQA,EACRgH,cAAehH,IAAW6G,KAE5BE,EAAc/Q,GAAUnE,MAAMmF,QAAQhB,GAAUA,EAAS,GACzD6rC,EAAQD,EAAe76B,EAAYjV,MAAM,EAAG0wC,KAAY3pC,IAAIopC,GAAc,CACxEp/B,QAASA,IAEX,IAAImgC,EAA0BniC,EAAMoiC,kBAChCC,EAAeV,IAOnBJ,EAAqBY,EAA0BE,EAAen8B,EAAYxV,QAAU2xC,EAAen8B,EAAYxV,OAAS2xC,EACxHpB,EAA4Bj/B,EAC5Bs/B,EAA0BN,EACtBtf,EAAc1f,UAChBy/B,EAvHR,SAA8B/f,EAAef,GAC3C,OAAO,WACL6gB,GAAiBA,EACjB7gB,EAAOc,OAAOC,EAChB,CACF,CAkHyB4gB,CAAqB5gB,EAAezyB,MAEzD,CAIA,IAAIszC,EAAoB14B,GAAwBA,EAAqB6X,GAGjEqgB,EAFcP,GAAiBF,EAAwB5wC,OAAS4vC,GAClDE,IAAae,EAE/B,MAAO,CACLjc,UAAW,SAAmBnkB,GAC5B,OAAO+mB,EAAWloB,EAAMf,YAAYvC,sBAAsB1I,EAAWmN,GACvE,EACA6/B,MAAOA,EACPxF,OAAQ0F,EACRsB,eAAgBD,EAChBN,cAAc,EACdD,UAAWhB,EAAMtwC,OAAS,EAC1BywB,aAAcA,EACdqgB,cAAeA,EACfO,kBAAmBA,EACnBN,eAAgBC,EAChBP,UAAWA,EACXI,mBAAoBA,EAExB,EACA5f,QAAS,SAAiByH,GACxB,IAAIppB,EAAQopB,EAAMppB,MAClBkhB,IACA,IAAIuhB,EAA2BziC,EAAMxB,kBAAkB,yBAAqBpP,GAC5E,MAAiB,QAAb+I,EACKsqC,EAAyBvmC,YAAYlI,GAEvCyuC,EAAyBtmC,uBAAuBnI,EACzD,EACAixB,iBAAkB,SAA0BhG,EAASuK,GACnD,IAAI4F,EAAmB5F,EAAM4F,iBACzBj6B,EAAsB,OAAbgD,EAAoBi3B,EAAiB10B,0BAA0B1G,GAAao7B,EAAiB70B,0BAA0BvG,GACpI,OAAKmB,EAAOzE,OAGL,GAAc,GAAc,CAAC,EAAGuuB,GAAU,CAAC,EAAG,CACnDlrB,eAAgB,GAAc,GAAc,CAAC,EAAGkrB,EAAQlrB,gBAAiB,CAAC,EAAG,GAAgB,CAAC,EAAGC,EAAWmB,MAHrG8pB,CAKX,EACAiG,0BAA2B,SAAmCkK,EAAkBzF,GAC9E,IAAI1K,EAAU0K,EAAM1K,QAChB/U,EAA6B,OAAb/R,EAChBhD,EAAS8pB,EAAQlrB,gBAAkBkrB,EAAQlrB,eAAeC,GAC1D0uC,EAAqBtT,EAAiBv2B,iBAAiB7E,GACvD2uC,EAAyBz4B,EAAgBw4B,EAAmBnnC,oBAAoBvH,GAAa0uC,EAAmBpnC,SAAStH,GACzH4uC,EAA2BD,EAAuBP,mBAAqB,EACvES,EAAwBruB,KAAKsuB,IAAIF,EAA0BpC,EAAWE,EAAgBJ,GACtFyC,EAAwBJ,EAAuBnkC,kBAAkB,oBAAqBqkC,GAC1F,IAAK1tC,EAAQ,CACX,IAAI/C,EAAM8X,EAAgB,+BAAiC,oBAC3D,OAAO64B,EAAsBzpC,mBAAmB,GAAgB,CAAC,EAAGlH,EAAK,GAAc,GAAc,CAAC,EAAG2wC,EAAsB3wC,IAAO,CAAC,EAAG,GAAgB,CAAC,EAAG4B,EAAW,MAC3K,CACA,OAAOmB,EAAOF,QAAO,SAAUxB,EAAYQ,GACzC,OAAOiW,EAAgBzW,EAAWoI,8BAA8B7H,EAAWC,GAASR,EAAWkI,mBAAmB3H,EAAWC,EAC/H,GAAG8uC,EACL,EAEJ,CACF,ECzQA,IAAI,GAAY,CAAC,QAAS,qBAAsB,wBAAyB,YAAa,YAAa,cACnG,SAAS,KAAiS,OAApR,GAAWhuC,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAI3e,SAAS6zB,GAActjB,GACrB,IAAIgc,EAAahc,EAAKgc,WACpBl2B,EAAWka,EAAKla,SAChB0uB,EAAqBxU,EAAKwU,mBAC1BxB,EAAgBhT,EAAKgT,cACrBuQ,EAAwBvjB,EAAKujB,sBAC3BC,EAAUxQ,EAAgBwB,EAAqB+O,EACnD,OAAoB,gBAAoBC,EAAS,CAC/C3O,UAAW7B,EAAgBgJ,EAAWnJ,YAAcmJ,EAAWyH,gBAC9D39B,EACL,CACO,SAAS49B,GAAkB/c,GAChC,IAAI5kB,EAAQ4kB,EAAM5kB,MAChB4hC,EAAwBhd,EAAM6N,mBAC9BA,OAA+C,IAA1BmP,EAAmC,OAASA,EACjEC,EAAwBjd,EAAM4c,sBAC9BA,OAAkD,IAA1BK,EAAmC,OAASA,EACpEC,EAAkBld,EAAMvpB,UACxBA,OAAgC,IAApBymC,EAA6B,KAAOA,EAChDhP,EAAYlO,EAAMkO,UAClBmH,EAAarV,EAAMqV,WACnB3Y,EAAQ,GAAyBsD,EAAO,IAC1C,OAAoB,gBAAoB,OAAQ,GAAS,CAAC,EAAGtD,EAAO,CAClEwR,UAAWkH,GAAGC,EAAWn3B,KAAMgwB,KAC7B9yB,EAAMzJ,KAAI,SAAU2H,EAAM6jC,GAC5B,IAAIC,EAAaD,IAAc/hC,EAAM/Q,OAAS,EAC9C,OAAoB,gBAAoB,EAAAgzC,SAAU,CAChDtxC,IAAKoxC,GACJ7jC,EAAK3H,KAAI,SAAU2rC,EAASC,GAC7B,OAAoB,gBAAoBZ,GAAe,CACrD5wC,IAAKwxC,EACLlI,WAAYA,EACZxH,mBAAoBA,EACpB+O,sBAAuBA,EACvBvQ,cAAeiR,EAAQjR,eACtBiR,EAAQ1vC,MACb,KAAKwvC,GAA2B,gBAAoB,OAAQ,CAC1DlP,UAAWmH,EAAW5+B,WACrBA,GACL,IACF,CC9CA,IAAI,GAAY,CAAC,cACjB,SAAS,KAAiS,OAApR,GAAW/H,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAKpe,SAAS00B,GAAUnkB,GACxB,IAAIokB,EAAkBpkB,EAAKgc,WACzBA,OAAiC,IAApBoI,EAA6B,CAAC,EAAIA,EAC/C/gB,EAAQ,GAAyBrD,EAAM,IACzC,OAAoB,gBAAoB0jB,GAAmB,GAAS,CAClE1H,WAAY,CACVn3B,KAAMk3B,GAAG,gBAAiBC,EAAWn3B,MACrCguB,YAAakJ,GAAG,4BAA6BC,EAAWnJ,aACxD4Q,eAAgB1H,GAAG,+BAAgCC,EAAWyH,gBAC9DrmC,UAAW2+B,GAAG,0BAA2BC,EAAW5+B,aAErDimB,GACL,CCnBA,IAAI,GAAY,CAAC,gBAAiB,gBAClC,SAAS,GAAyBhV,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAGpe,SAAS40B,GAAerkB,GAC7B,IAAI8hB,EAAgB9hB,EAAK8hB,cACvBxD,EAAete,EAAKse,aACpBjb,EAAQ,GAAyBrD,EAAM,IACzC,OAAoB,gBAAoB,SAAUqD,EAAOib,EAAagG,mBAAmB,CACvFxC,cAAeA,IAEnB,CCXA,IAAI,GAAY,CAAC,YAAa,QAAS,WAAY,QAAS,YAAa,YAAa,WAAY,oBAAqB,mBAAoB,gBAAiB,YAAa,aAAc,gBACvL,SAAS,KAAiS,OAApR,GAAWzsC,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAOpe,SAASpZ,GAAe2pB,GAC7B,IAAIsiB,EAAYtiB,EAAKsiB,UACnBhB,EAAQthB,EAAKshB,MACbiD,EAAWvkB,EAAKukB,SAChBtqC,EAAQ+lB,EAAK/lB,MACb4hC,EAAY7b,EAAK6b,UACjB2I,EAAYxkB,EAAKwkB,UACjB1D,EAAW9gB,EAAK8gB,SAChBuB,EAAoBriB,EAAKqiB,kBACzBoC,EAAmBzkB,EAAKykB,iBACxB3C,EAAgB9hB,EAAK8hB,cACrBjN,EAAY7U,EAAK6U,UACjBuP,EAAkBpkB,EAAKgc,WACvBA,OAAiC,IAApBoI,EAA6B,CAAC,EAAIA,EAC/C9F,EAAete,EAAKse,aACpBjb,EAAQ,GAAyBrD,EAAM,IACzC,OAAoB,gBAAoB,MAAO,GAAS,CAAC,EAAGqD,EAAO,CACjEwR,UAAWkH,GAAG,qBAAsBC,EAAWn3B,MAAOy9B,GAAavG,GAAG,mCAAoCC,EAAW0I,kBAAmB7P,KACtIgH,GAA0B,gBAAoB,MAAO,CACvDhH,UAAWkH,GAAG,+BAAgCC,EAAWH,YACxDA,GAAY2I,EAAyB,gBAAoB,MAAO,CACjE3P,UAAWkH,GAAG,+BAAgCC,EAAWwI,YACxDA,GAA0B,gBAAoB,KAAM,CACrD3P,UAAWkH,GAAG,0BAA2BC,EAAW1pC,OACnDgvC,EAAMhpC,KAAI,SAAUiN,GACrB,OAAoB,gBAAoB,KAAM,CAC5C7S,IAAK6S,EAAKhR,MACVsgC,UAAWkH,GAAG,0BAA2BC,EAAWz2B,KAAMA,EAAK/Q,WAAaunC,GAAG,oCAAqCC,EAAW2I,gBACjH,gBAAoB,QAAS,CAC3C9P,UAAWkH,GAAG,2BAA4BC,EAAW2F,QACvC,gBAAoB,QAAS,CAC3CiD,QAASr/B,EAAK/Q,UACdqgC,UAAWkH,GAAG,8BAA+BC,EAAW6I,UACxDr0C,KAAM,WACN+D,MAAOgR,EAAKhR,MACZgpC,SAAU,WACRgH,EAASh/B,EACX,IACe,gBAAoB,OAAQ,CAC3CsvB,UAAWkH,GAAG,+BAAgCC,EAAW8I,YACxD7qC,EAAMjJ,OAAS,EAAiB,gBAAoBmzC,GAAW,CAChEpiC,MAAO,CAACyxB,GAAoB,GAASjuB,EAAKstB,aAAe,QACtDttB,EAAKo8B,OAAqB,gBAAoB,OAAQ,CACzD9M,UAAWkH,GAAG,2BAA4BC,EAAW95B,QACpDqD,EAAKrD,QACV,KAAK4+B,GAAyB,gBAAoBuD,GAAgB,CAChExP,UAAWkH,GAAG,8BAA+BC,EAAW8E,UAAWuB,GAAqBtG,GAAG,wCAAyCC,EAAW+I,mBAC/IC,UAAW3C,EACX4C,QAASR,EACT3C,cAAeA,EACfxD,aAAcA,IAElB,CC7DA,SAAS,GAAQxuB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,aAAc,wBAAyB,YAAa,WAAY,QAAS,WAAY,gBAAiB,SAAU,oBAAqB,iBAAkB,gBACxK,SAAS,KAAiS,OAApR,GAAWza,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAQ2f,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CAEpV,SAAS,GAAgBwa,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAeiO,EAAKltB,GAAK,OAKlC,SAAyBktB,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAOA,CAAK,CAL3B,CAAgBA,IAIzD,SAA+BA,EAAKltB,GAAK,IAAIotB,EAAK,MAAQF,EAAM,KAAO,oBAAsBxK,QAAUwK,EAAIxK,OAAOC,WAAauK,EAAI,cAAe,GAAI,MAAQE,EAAI,CAAE,IAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAO,GAAIC,GAAK,EAAIC,GAAK,EAAI,IAAM,GAAIJ,GAAMH,EAAKA,EAAG5sB,KAAK0sB,IAAMrK,KAAM,IAAM7iB,EAAG,CAAE,GAAIwE,OAAO4oB,KAAQA,EAAI,OAAQM,GAAK,CAAI,MAAO,OAASA,GAAML,EAAKE,EAAG/sB,KAAK4sB,IAAKtK,QAAU2K,EAAKzsB,KAAKqsB,EAAG3pB,OAAQ+pB,EAAKttB,SAAWH,GAAI0tB,GAAK,GAAyK,CAAlK,MAAOptB,GAAOqtB,GAAK,EAAIL,EAAKhtB,CAAK,CAAE,QAAU,IAAM,IAAKotB,GAAM,MAAQN,EAAGrK,SAAWyK,EAAKJ,EAAGrK,SAAUve,OAAOgpB,KAAQA,GAAK,MAAsC,CAA5B,QAAU,GAAIG,EAAI,MAAML,CAAI,CAAE,CAAE,OAAOG,CAAM,CAAE,CAJ1gB,CAAsBP,EAAKltB,IAE5F,SAAqCsiB,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,GAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,GAAkB+iB,EAAGuL,EAAS,CAF7T,CAA4BX,EAAKltB,IACnI,WAA8B,MAAM,IAAIP,UAAU,4IAA8I,CADvD,EAAoB,CAG7J,SAAS,GAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAGlL,SAAS,GAAyBjB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAMpe,SAAS,GAAeuQ,GAC7B,IAAIklB,EAAallB,EAAKklB,WACpBC,EAAwBnlB,EAAKmlB,sBAC7B7wC,EAAY0rB,EAAK1rB,UACjBmE,EAAWunB,EAAKvnB,SAChBmoC,EAAQ5gB,EAAK4gB,MACbE,EAAW9gB,EAAK8gB,SAChBE,EAAgBhhB,EAAKghB,cACrBvhC,EAASugB,EAAKvgB,OACd0hC,EAAoBnhB,EAAKmhB,kBACzBE,EAAiBrhB,EAAKqhB,eACtB/C,EAAete,EAAKse,aACpBjb,EAAQ,GAAyBrD,EAAM,IACrColB,EC/BC,SAA2B/hB,EAAOqB,GACvC,OAAOD,GAAa,GAAuBpB,EAAOqB,EACpD,CD6B2B2gB,CAAkB,CACvC/wC,UAAWA,EACXmE,SAAUA,EACVmoC,MAAOA,EACPE,SAAUA,EACVE,cAAeA,EACfvhC,OAAQA,EACR0hC,kBAAmBA,EACnBE,eAAgBA,GACf,CACD5a,aAAc,uBAEhB6b,EAAY8C,EAAmB9C,UAC/BD,EAAoB+C,EAAmB/C,kBACvCE,EAAe6C,EAAmB7C,aAClCT,EAAgBsD,EAAmBtD,cACnCR,EAAQ8D,EAAmB9D,MAC3BxF,EAASsJ,EAAmBtJ,OAC5BgH,EAAiBsC,EAAmBtC,eACpCf,EAAiBqD,EAAmBrD,eAEpC/iB,EAAa,IADC,IAAAC,UAAS,IACgB,GACvC6gB,EAAa9gB,EAAW,GACxB+gB,EAAgB/gB,EAAW,GACzBse,GAAW,IAAA9Z,QAAO,MACtB,SAASzpB,EAASC,GAChB+lC,EAAc/lC,GACd8oC,EAAe9oC,EACjB,CAiBA,IAAIsrC,EA1EN,SAAuB71B,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CA0E9d,CAAc,CACrC8vB,iBAAkB,yBAClBF,kBAAmB,0BACnBkG,cAAe,cACfjB,mBAAoB,SAA4BnhC,GAC9C,OAAOA,EAAQ2+B,cAAgB,YAAc,WAC/C,GACCxD,GACC2B,EAAU,CACZqB,MAAOA,EACPgB,UAAWA,EACXiC,SA3BF,SAAkBh/B,GAChBu2B,EAAOv2B,EAAKhR,OACZwF,EAAS,GACX,EAyBEE,MAAO6lC,EACPjE,UAAWqJ,GAA2B,gBAAoB9H,GAAsB,CAC9EE,SAAUA,EACVI,YAAayH,EACbrf,iBAAiB,EACjBvxB,MAAOurC,EACPvC,SA9BJ,SAAkB3vB,GAChB7T,EAAS6T,EAAMsyB,cAAc3rC,MAC/B,EA6BIipC,QA5BJ,WACEzjC,EAAS,GACX,EA2BI0jC,SA1BJ,WACM6D,EAAMtwC,OAAS,IACjB8qC,EAAOwF,EAAM,GAAG/sC,OAChBwF,EAAS,IAEb,EAsBIukC,aAAc,CACZe,kBAAmBiG,EAAmBjG,kBACtCE,iBAAkB+F,EAAmB/F,oBAGzCiF,UAAWU,GAAc3C,GAAiC,IAAjBjB,EAAMtwC,QAAgBs0C,EAAmBC,cAClFlD,kBAAmBA,EACnBoC,iBAAkB1C,EAClBD,cAAeA,EACfxD,aAAc,CACZgG,mBAAoBgB,EAAmBhB,qBAG3C,OAAoB,gBAAoBjuC,GAA2B,GAAS,CAAC,EAAGgtB,EAAO4c,EAAS,CAC9Fa,SAAUA,IAEd,CEnHA,SAAS,GAAQhxB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAU/U,IAAI01B,GAAgB,SAAuBxlB,GACzC,IAAI7sB,EAAQ6sB,EAAK7sB,MACfqzB,EAAaxG,EAAKwG,WAElB51B,GADaovB,EAAKylB,WACXzlB,EAAKpvB,MACZixB,EAAwB7B,EAAK6B,sBAE/B,GAAoB,IAAhBjxB,EAAKI,QAAqC,WAArB,GAAQJ,EAAK,IACpC,MAAO,CAACA,EAAK,IAEf,IAAIyvC,EAAYzvC,EAAK,GACjBorB,EAAOprB,EAAK,GACZ2vC,EAAY3vC,EAAK,GACrB,IAAKorB,EAID,MAAO,GAGX,IAAmB,UAAdqkB,GAAuC,eAAdA,KAAgCE,EAI1D,MAAO,GAGX,IAAImF,EAAYp0C,MAAMmF,QAAQulB,GAAQA,EAAO,CAACA,GAC9C,GAAyB,IAArB0pB,EAAU10C,OACZ,MAAO,GAET,IAAI20C,EAAUD,EAAU,GAAGE,UACvBC,EAxCN,SAAe9nB,GAGb,IAFA,IAAI+nB,EAAY70C,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAK,GAChF80C,EAAS,GACJl1C,EAAI,EAAGA,EAAIikB,KAAKkxB,KAAKjoB,EAAI/sB,OAAS80C,GAAYj1C,IACrDk1C,EAAOl0C,KAAKksB,EAAIxsB,MAAMV,EAAIi1C,GAAYj1C,EAAI,GAAKi1C,IAEjD,OAAOC,CACT,CAiCmBE,CAAMP,GACnBQ,EAAmBL,EAAWvtC,KAAI,SAAU6tC,GAC9C,OAAOA,EAAM7tC,KAAI,SAAUk6B,GACzB,OAAOA,EAAI4C,QACb,GACF,IACIgR,EAAmBP,EAAWvtC,KAAI,SAAU6tC,GAC9C,OAAOA,EAAM7tC,KAAI,SAAUk6B,GACzB,OAAOA,EAAI6T,UACb,GACF,IACA,MAAkB,SAAdhG,EACmC,SAAjCxe,EAAsB7L,OACjB,GAEF6vB,EAAWvtC,KAAI,SAAU6tC,EAAOt1C,GACrC,MAAO,CACL2vC,eAAgB,kBAChBha,WAAYA,EACZ6Z,UAAWA,EACXha,QAAS,CACPka,UAAWA,GAAa,cACxBptC,MAAOA,EACPgiC,UAAW+Q,EAAiBr1C,IAE9BmrB,KAAMmqB,EAEV,IACuB,UAAd9F,EACFwF,EAAWvtC,KAAI,SAAU6tC,EAAOt1C,GACrC,MAAO,CACL2vC,eAAgB,8BAChBha,WAAYA,EACZ6Z,UAAWA,EACXha,QAAS,CACPka,UAAWA,EACXptC,MAAOA,EACPwyC,QAASA,EACTxQ,UAAW+Q,EAAiBr1C,GAC5By1C,UAAWF,EAAiBv1C,IAE9BmrB,KAAMmqB,EAEV,IACuB,eAAd9F,EACFwF,EAAWvtC,KAAI,SAAU6tC,EAAOt1C,GACrC,MAAO,CACL2vC,eAAgB,gCAChBha,WAAYA,EACZ6Z,UAAWA,EACXha,QAAS,CACPka,UAAWA,EACXptC,MAAOA,EACPwyC,QAASA,EACTxQ,UAAW+Q,EAAiBr1C,IAE9BmrB,KAAMmqB,EAEV,IAIO,EAEX,EACO,SAASI,GAAuB5f,GACrC,IAAI9E,EAAwB8E,EAAM9E,sBAChC1uB,EAAQwzB,EAAMxzB,MACdqzB,EAAaG,EAAMH,WAgBrB,OAfuB,WACrB,IAAK,IAAInG,EAAOpvB,UAAUD,OAAQJ,EAAO,IAAIU,MAAM+uB,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC/E3vB,EAAK2vB,GAAQtvB,UAAUsvB,GAEzB,IAAIimB,EAAWhB,GAAc,CAC3Bhf,WAAYA,EACZrzB,MAAOA,EACPsyC,WAAY,YACZ70C,KAAMA,EACNixB,sBAAuBA,IAEzB2kB,EAAS7uC,SAAQ,SAAU0uB,GACzB,OAAOxE,EAAsB6W,oBAAoBrS,EACnD,GACF,CAEF,CACO,SAASogB,GAAuBrd,GACrC,IAAIj2B,EAAQi2B,EAAMj2B,MAChBqzB,EAAa4C,EAAM5C,WACnB3E,EAAwBuH,EAAMvH,sBAchC,OAbuB,WACrB,IAAK,IAAI8X,EAAQ1oC,UAAUD,OAAQJ,EAAO,IAAIU,MAAMqoC,GAAQE,EAAQ,EAAGA,EAAQF,EAAOE,IACpFjpC,EAAKipC,GAAS5oC,UAAU4oC,GAE1B,IAAI2M,EAAWhB,GAAc,CAC3Bhf,WAAYA,EACZrzB,MAAOA,EACPsyC,WAAY,YACZ70C,KAAMA,EACNixB,sBAAuBA,IAEzB,OAAO2kB,EAASx1C,OAAS,uBAAuB2D,OAAOm/B,GAAiB0S,IAAa,EACvF,CAEF,CClJA,SAAS,GAAQ12B,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAGpO,SAAS42B,GAAoB1qB,EAAM5hB,EAAMI,GAC9C,OAAOwhB,EAAK1jB,KAAI,SAAUk6B,EAAK1vB,GAC7B,OAAO,GAAc,GAAc,CAAC,EAAG0vB,GAAM,CAAC,EAAG,CAC/C6T,WAAY7rC,EAAcJ,EAAO0I,EAAM,GAE3C,GACF,CCZA,SAAS,GAAQgN,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAGpO,SAAS62B,GAAW3qB,EAAM2pB,GAC/B,OAAKA,EAGE3pB,EAAK1jB,KAAI,SAAUk6B,GACxB,OAAO,GAAc,GAAc,CAAC,EAAGA,GAAM,CAAC,EAAG,CAC/CoT,UAAWD,GAEf,IANS3pB,CAOX,CCfA,SAAS,GAAQlM,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAI3O,IAAI,GAAYgR,EAAoC,CAClD5nB,KAAM,OACN2nB,WAAW,IAgGb,GA9FkB,SAAqBU,GACrC,IAAIC,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAEpF,OADAC,EAAeI,EAAU,MAClB,SAAUE,GACf,IAOIggB,EACAmF,EARA5mB,EAAOyB,GAAgB,CAAC,EAC1BolB,EAAkB7mB,EAAK8mB,WACvBA,OAAiC,IAApBD,GAAoCA,EACjDzF,EAAsBphB,EAAKqhB,eAC3BA,OAAyC,IAAxBD,EAAiC,SAAUE,GAC1D,OAAOA,CACT,EAAIF,EAGN,MAAO,CACL1f,OAAQ,WACRC,KAAM,SAAcC,GAClBL,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBD,EAAYC,yBACjC,EACN,EACAE,OAAQ,SAAgBC,GACtB,IAAIG,EAAc5yB,KAAKuyB,qBAAqBE,GAC5CT,EAAS,GAAc,GAAc,CAAC,EAAGY,GAAc,CAAC,EAAG,CACzDN,sBAAuBG,EAAcH,yBACnC,GACJM,EAAYsf,UAAU,OAAQtf,EAAYnG,KAC5C,EACAkG,eAAgB,SAAwBC,EAAaH,GACnD,OAAO,GAAc,GAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvDnG,KAAMzsB,KAAKuyB,qBAAqBE,IAEpC,EACAF,qBAAsB,SAA8B6E,GAClD,IAAIrkB,EAAUqkB,EAAMrkB,QAClBwK,EAAS6Z,EAAM7Z,OACf+U,EAAwB8E,EAAM9E,sBAehC,GAdK4f,IACHA,EAAY8E,GAAuB,CACjC1kB,sBAAuBA,EACvB1uB,MAAO2Z,EAAOP,WACdia,WAAYj3B,KAAKmyB,UAGhBklB,IACHA,EAAYH,GAAuB,CACjCtzC,MAAO2Z,EAAOP,WACdia,WAAYj3B,KAAKmyB,OACjBG,sBAAuBA,MAGtBvf,EACH,MAAO,CACL0Z,KAAM,GACN1Z,aAAS5S,EACT+xC,UAAWA,EACXmF,UAAWA,EACXnlB,aAAcA,GAGdqlB,GAAcxkC,EAAQ0Z,KAAKhrB,OAAS,IACtCsR,EAAQ0Z,KAAOsW,GAAWhwB,EAAQ0Z,OAEpC,IACI+qB,EAAqCJ,GADVD,GAAoBpkC,EAAQ0Z,KAAM1Z,EAAQlI,KAAMkI,EAAQ9H,aACT8H,EAAQqjC,SAItF,MAAO,CACL3pB,KAJoBqlB,EAAe0F,EAAoC,CACvEzkC,QAASA,IAITA,QAASA,EACTm/B,UAAWA,EACXmF,UAAWA,EACXnlB,aAAcA,EAElB,EACAQ,QAAS,SAAiBmH,GACxB,IAAI9oB,EAAQ8oB,EAAM9oB,MAElB,OADAkhB,IACKslB,EAGExmC,EAAM1G,mBAAmBvE,OAAOC,KAAK08B,IAAiBz8B,QAAO,SAAU2J,EAAKxM,GACjF,OAAO,GAAc,GAAc,CAAC,EAAGwM,GAAM,CAAC,EAAG,GAAgB,CAAC,EAAGxM,OAAKhD,GAC5E,GAAG,CAAC,IAJK4Q,CAKX,EACAklB,0BAA2B,SAAmCllB,GAC5D,OAAKwmC,EAGExmC,EAAM1G,mBAAmBo4B,IAFvB1xB,CAGX,EAEJ,CACF,ECxGA,IAAI,GAAY,CAAC,OAAQ,YAAa,eAAgB,cACtD,SAAS,KAAiS,OAApR,GAAWjL,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAI3e,SAASu3B,GAAoBhnB,GAC3B,IAAIwS,EAAMxS,EAAKwS,IACf,OAAoB,gBAAoB,MAAO,CAC7CyU,MAAO,CACLC,UAAW,cAEZ9mC,KAAKC,UAAUmyB,GAAKjhC,MAAM,EAAG,KAAM,IACxC,CACO,SAAS41C,GAAKxgB,GACnB,IAAI3K,EAAO2K,EAAM3K,KACfylB,EAAY9a,EAAM8a,UAClB2F,EAAqBzgB,EAAM0gB,aAC3BC,OAAsC,IAAvBF,EAAgCJ,GAAsBI,EACrEG,EAAmB5gB,EAAMqV,WACzBA,OAAkC,IAArBuL,EAA8B,CAAC,EAAIA,EAChDlkB,EAAQ,GAAyBsD,EAAO,IAC1C,OAAoB,gBAAoB,MAAO,GAAS,CAAC,EAAGtD,EAAO,CACjEwR,UAAWkH,GAAG,WAAYC,EAAWn3B,KAAsB,IAAhBmX,EAAKhrB,QAAgB+qC,GAAG,kBAAmBC,EAAWwL,WAAYnkB,EAAMwR,aACpG,gBAAoB,KAAM,CACzCA,UAAWkH,GAAG,gBAAiBC,EAAW1pC,OACzC0pB,EAAK1jB,KAAI,SAAUk6B,GACpB,OAAoB,gBAAoB,KAAM,CAC5C9/B,IAAK8/B,EAAI4C,SACTP,UAAWkH,GAAG,gBAAiBC,EAAWz2B,OAC5B,gBAAoB+hC,EAAc,CAChD9U,IAAKA,EACLiP,UAAWA,IAEf,KACF,CCnCA,IAAI,GAAY,CAAC,aAAc,kBAC/B,SAAS,KAAiS,OAApR,GAAWpsC,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAKpe,SAAS,GAAKuQ,GACnB,IAAI8mB,EAAa9mB,EAAK8mB,WACpBzF,EAAiBrhB,EAAKqhB,eACtBhe,EAAQ,GAAyBrD,EAAM,IACrCynB,ECTC,SAAiBpkB,EAAOqB,GAC7B,OAAOD,GAAa,GAAapB,EAAOqB,EAC1C,CDOiBgjB,CAAQ,CACnBZ,WAAYA,EACZzF,eAAgBA,GACf,CACD5a,aAAc,aAIdwZ,EAAU,CACZjkB,KAHOyrB,EAASzrB,KAIhBylB,UAHYgG,EAAShG,WAKvB,OAAoB,gBAAoB0F,GAAiB,GAAS,CAAC,EAAG9jB,EAAO4c,GAC/E,CExBA,SAAS,GAAQnwB,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAK3O,IAAI,GAAYgR,EAAoC,CAClD5nB,KAAM,YACN2nB,WAAW,IAEb,SAAS8mB,GAA2BrnC,EAAOmhB,GAIzC,OAAOnhB,EAAM1G,mBAAmBvE,OAAOC,KAAKmsB,EAAaiO,kBAAkBn6B,QAAO,SAAU2J,EAAKxM,GAC/F,OAAO,GAAc,GAAc,CAAC,EAAGwM,GAAM,CAAC,EAAG,GAAgB,CAAC,EAAGxM,OAAKhD,GAC5E,GAAG,CAAC,GACN,CACA,IAyEA,GAzEuB,WACrB,IAAI6xB,EAAWtwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAC/EM,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EACpF,OAAO,SAAUO,GACf,IAAKA,IAAiBgQ,GAAchQ,EAAaiO,kBAC/C,MAAM,IAAIx+B,MAAM,GAAU,qDAE5B,IAAI+zB,EAAiB,CAAC,EActB,MAAO,CACLvD,OAAQ,gBACRC,KAAM,SAAcC,GAClB,IAAIC,EAAwBD,EAAYC,sBACxCN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBA,KACrB,EACN,EACAE,OAAQ,SAAgBC,GACtB,IAAIH,EAAwBG,EAAcH,sBAC1CN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBE,IAAiB,CAAC,EAAG,CACtFH,sBAAuBA,KACrB,EACN,EACAI,QAAS,SAAiBjC,GACxB,IAAI1f,EAAQ0f,EAAK1f,MAEjB,OADAkhB,IACOmmB,GAA2BrnC,EAAOmhB,EAC3C,EACAS,eAAgB,SAAwBC,EAAaH,GACnD,IAAI4lB,EACAC,EAAoBt4C,KAAKuyB,qBAAqBE,GAClD,OAAO,GAAc,GAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvDmJ,UAAW,GAAc,GAAc,CAAC,EAAGuc,GAAoB,CAAC,EAAG,CACjEpmB,aAAc,GAAc,GAAc,CAAC,EAAGomB,EAAkBpmB,cAAe,CAAC,EAAG,CACjFiO,iBAAkBzC,GAAsB,IAAI,mBAAyF,QAAnD2a,EAAwBzlB,EAAYmJ,iBAAiD,IAA1Bsc,OAAmC,EAASA,EAAsBnmB,aAAaiO,kBAAmB,IAAI,mBAAqCmY,EAAkBpmB,aAAaiO,mBAAmB9wB,sBAIlV,EACAkjB,qBAAsB,SAA8B6E,GAClD,IAAI7Z,EAAS6Z,EAAM7Z,OAInB,OAHKmY,EAAe6W,SAClB7W,EAAe6W,OA9CrB,SAAgBhvB,GACd,OAAO,SAAU4iB,GAEf,IAAIoY,EAAcH,GAA2B76B,EAAOxM,MAAOmhB,GACvDsmB,EAAuB9a,GAAsB6a,EAAa,IAAI,mBAAqCpY,IAGvGjO,EAAaiO,iBAAmBA,EAGhC5iB,EAAOd,SAAS+7B,GAAsBt/B,QACxC,CACF,CAkC8BqzB,CAAOhvB,IAE1B,CACLgvB,OAAQ7W,EAAe6W,OACvBra,aAAcA,EAElB,EACA+D,0BAA2B,SAAmCllB,EAAO8oB,GACnE,IAAI7J,EAAU6J,EAAM7J,QACpB,OAAO0N,GAAsB3sB,EAAO,IAAI,mBAAqC,GAAc,GAAc,CAAC,EAAGif,EAAQ+L,WAAY7J,EAAaiO,mBAChJ,EACAnK,iBAAkB,SAA0BhG,GAC1C,OAAO,GAAc,GAAc,CAAC,EAAGA,GAAU,CAAC,EAAG,CACnD+L,UAAW,GAAc,GAAc,CAAC,EAAG/L,EAAQ+L,WAAY7J,EAAaiO,mBAEhF,EAEJ,CACF,EC3FO,SAASsY,GAAU3kB,GAIxB,OCHK,SAAsBA,EAAOqB,GAC3BD,GAAa,GAAkB,CACpCiL,iBAAkBrM,GACjBqB,EACL,CDJEujB,CAAa5kB,EAAO,CAClBoD,aAAc,kBAET,IACT,CENA,SAAS,GAAmB1I,GAAO,OAInC,SAA4BA,GAAO,GAAIzsB,MAAMmF,QAAQsnB,GAAM,OAAO,GAAkBA,EAAM,CAJhD,CAAmBA,IAG7D,SAA0B+P,GAAQ,GAAsB,oBAAXva,QAAmD,MAAzBua,EAAKva,OAAOC,WAA2C,MAAtBsa,EAAK,cAAuB,OAAOx8B,MAAMuiB,KAAKia,EAAO,CAHxF,CAAiB/P,IAEtF,SAAqC5K,EAAGuL,GAAU,IAAKvL,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAO,GAAkBA,EAAGuL,GAAS,IAAItuB,EAAIiF,OAAOpF,UAAUkQ,SAAS9O,KAAK8hB,GAAG5hB,MAAM,GAAI,GAAc,WAANnB,GAAkB+iB,EAAE1Z,cAAarJ,EAAI+iB,EAAE1Z,YAAYP,MAAM,GAAU,QAAN9I,GAAqB,QAANA,EAAa,OAAOkB,MAAMuiB,KAAKV,GAAI,GAAU,cAAN/iB,GAAqB,2CAA2C2iB,KAAK3iB,GAAI,OAAO,GAAkB+iB,EAAGuL,EAAS,CAFjU,CAA4BX,IAC1H,WAAgC,MAAM,IAAIztB,UAAU,uIAAyI,CAD3D,EAAsB,CAKxJ,SAAS,GAAkBytB,EAAKptB,IAAkB,MAAPA,GAAeA,EAAMotB,EAAI/sB,UAAQL,EAAMotB,EAAI/sB,QAAQ,IAAK,IAAIH,EAAI,EAAGye,EAAO,IAAIhe,MAAMX,GAAME,EAAIF,EAAKE,IAAKye,EAAKze,GAAKktB,EAAIltB,GAAI,OAAOye,CAAM,CAC3K,SAAS44B,GAAMloB,GACpB,IAAImoB,EAAanoB,EAAKoI,MACpBA,OAAuB,IAAf+f,EAAwB,EAAIA,EACpCC,EAAMpoB,EAAKooB,IACXC,EAAYroB,EAAKsoB,KACjBA,OAAqB,IAAdD,EAAuB,EAAIA,EAEhCE,EAAqB,IAATD,EAAa,EAAIA,EAO7BE,EAAc1zB,KAAK2zB,OAAOL,EAAMhgB,GAASmgB,GAC7C,OAAO,GAAmBj3C,MAAMk3C,IAAclwC,KAAI,SAAUg0B,EAAG7I,GAC7D,OAAO2E,EAAQ3E,EAAU8kB,CAC3B,GACF,CCxBA,SAAS,GAAQz4B,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAE/U,SAAS,GAAkBL,EAAQ4T,GAAS,IAAK,IAAIxyB,EAAI,EAAGA,EAAIwyB,EAAMryB,OAAQH,IAAK,CAAE,IAAI62B,EAAarE,EAAMxyB,GAAI62B,EAAWxY,WAAawY,EAAWxY,aAAc,EAAOwY,EAAWtY,cAAe,EAAU,UAAWsY,IAAYA,EAAWvY,UAAW,GAAM9Z,OAAO2d,eAAevD,EAAQ,GAAeiY,EAAWh1B,KAAMg1B,EAAa,CAAE,CAE5U,SAAS,GAAgB5X,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAAM,GAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAC3O,SAAS,GAAelgB,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAG5H,IA6DA,GA7D6B,WAC3B,SAASg2C,EAAU7xC,IARrB,SAAyBgC,EAAUwvB,GAAe,KAAMxvB,aAAoBwvB,GAAgB,MAAM,IAAI/3B,UAAU,oCAAwC,CASpJ,CAAgBf,KAAMm5C,GACtB,GAAgBn5C,KAAM,mBAAe,GACrC,GAAgBA,KAAM,aAAS,GAC/B,GAAgBA,KAAM,eAAW,GACjCA,KAAKo5C,YAAc9xC,EAAO8xC,YAC1Bp5C,KAAKq5C,MAAQ/xC,EAAO+xC,MACpBr5C,KAAKs5C,QAAUhyC,EAAOgyC,OACxB,CAdF,IAAsBxgB,EAAaS,EAAYC,EAgE7C,OAhEoBV,EAePqgB,GAfoB5f,EAeT,CAAC,CACvBp2B,IAAK,QACL6B,MAAO,WACL,IAAIq0C,EAAQr5C,KAAKq5C,MACfD,EAAcp5C,KAAKo5C,YACnBE,EAAUt5C,KAAKs5C,QACjB,GAAc,IAAVD,EAAa,MAAO,CAAC,GACzB,IAAIE,EAAsBv5C,KAAKw5C,iBAAiBF,EAASD,GACzD,GAAIE,IAAwBF,EAC1B,OAAOV,GAAM,CACXE,IAAKQ,IAGT,IAAII,EAAcz5C,KAAK05C,qBAAqBN,EAAaE,EAASD,EAAOE,GAIzE,OAAOZ,GAAM,CACX9f,MAHUugB,EAAcK,EAIxBZ,IAHSO,GAFQG,EAAsBE,IAO3C,GACC,CACDt2C,IAAK,mBACL6B,MAAO,SAA0Bs0C,EAASD,GACxC,OAAO9zB,KAAKqtB,IAAI,EAAI0G,EAAU,EAAGD,EACnC,GACC,CACDl2C,IAAK,uBACL6B,MAAO,SAA8BkvB,EAASolB,EAASD,EAAOE,GAC5D,OAAIrlB,GAAWolB,EACNplB,EAELA,GAAWmlB,EAAQC,EACdC,GAAuBF,EAAQnlB,GAEjColB,CACT,GACC,CACDn2C,IAAK,aACL6B,MAAO,WACL,OAAOhF,KAAKo5C,cAAgBp5C,KAAKq5C,MAAQ,GAAoB,IAAfr5C,KAAKq5C,KACrD,GACC,CACDl2C,IAAK,cACL6B,MAAO,WACL,OAA4B,IAArBhF,KAAKo5C,WACd,MA9D0E,GAAkBtgB,EAAYp4B,UAAW64B,GAAiBC,GAAa,GAAkBV,EAAaU,GAAc1zB,OAAO2d,eAAeqV,EAAa,YAAa,CAAElZ,UAAU,IAgErPu5B,CACT,CA5D6B,GCR7B,SAAS,GAAQ54B,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,SAAS,GAAQc,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAK3O,IAAI,GAAYgR,EAAoC,CAClD5nB,KAAM,aACN2nB,WAAW,IA0Gb,GAjGwB,SAA2BU,GACjD,IAAIC,EAAYvwB,UAAUD,OAAS,QAAsBtB,IAAjBuB,UAAU,GAAmBA,UAAU,GAAKiwB,EAEpF,OADAC,EAAeI,EAAU,MAClB,SAAUE,GACf,IAAIzB,EAAOyB,GAAgB,CAAC,EAC1BynB,EAAalpB,EAAKkpB,WAClBC,EAAenpB,EAAK6oB,QAElBO,EAAQ,IAAI,GAAU,CACxBT,YAAa,EACbC,MAAO,EACPC,aAJ2B,IAAjBM,EAA0B,EAAIA,IAMtClkB,EAAiB,CAAC,EAKtB,MAAO,CACLvD,OAAQ,iBACRC,KAAM,SAAcC,GAClB,IAAIC,EAAwBD,EAAYC,sBACxCN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBF,IAAe,CAAC,EAAG,CACpFC,sBAAuBA,KACrB,EACN,EACAE,OAAQ,SAAgBC,GACtB,IAAIH,EAAwBG,EAAcH,sBAC1CN,EAAS,GAAc,GAAc,CAAC,EAAGhyB,KAAKuyB,qBAAqBE,IAAiB,CAAC,EAAG,CACtFH,sBAAuBA,KACrB,EACN,EACAI,QAAS,SAAiBmH,GACxB,IAAI9oB,EAAQ8oB,EAAM9oB,MAElB,OADAkhB,IACOlhB,EAAMxB,kBAAkB,YAAQpP,EACzC,EACA61B,iBAAkB,SAA0BhG,EAASmK,GACnD,IACItvB,EADmBsvB,EAAMgG,iBACDt1B,MAAQ,EACpC,OAAKA,EAGE,GAAc,GAAc,CAAC,EAAGmlB,GAAU,CAAC,EAAG,CACnDnlB,KAAMA,EAAO,IAHNmlB,CAKX,EACAiG,0BAA2B,SAAmCkK,EAAkB5F,GAC9E,IAAIvK,EAAUuK,EAAMvK,QAChBnlB,EAAOmlB,EAAQnlB,KAAOmlB,EAAQnlB,KAAO,EAAI,EAC7C,OAAOs1B,EAAiB5wB,kBAAkB,OAAQ1E,EACpD,EACA0nB,qBAAsB,SAA8BmI,GAClD,IAAI3nB,EAAU2nB,EAAM3nB,QAClBwK,EAASmd,EAAMnd,OACfxM,EAAQ2pB,EAAM3pB,MACdslB,EAAYqE,EAAMrE,UACfX,EAAe6W,SAClB7W,EAAe6W,OAAS,SAAU1hC,GAChC0S,EAAO5S,QAAQE,GACf0S,EAAOrE,QACT,GAEGwc,EAAeW,YAClBX,EAAeW,UAAY,SAAUyjB,GACnC,OAAO,SAAUjvC,GACf,OAAOwrB,EAAUyjB,EAAYnvC,QAAQE,GACvC,CACF,GAEF,IAAIA,EAAOkG,EAAMlG,MAAQ,EACrB6hB,EAzDR,SAAoB0K,GAClB,IAAI1K,EAAU0K,EAAM1K,QACpB,YAAsBvsB,IAAfw5C,EAA2Bp0B,KAAKqtB,IAAI+G,EAAYjtB,GAAWA,CACpE,CAsDkBqtB,CAAWhnC,GAAW,CAClC2Z,QAAS,IAIX,OAFAmtB,EAAMT,YAAcvuC,EACpBgvC,EAAMR,MAAQ3sB,EACP,CACL2J,UAAWX,EAAeW,UAAUtlB,GACpCw7B,OAAQ7W,EAAe6W,OACvBwG,UAAWrmB,EAAU,EACrBjjB,kBAAmBoB,EACnB2P,QAASzH,aAAyC,EAASA,EAAQyH,SAAW,EAC9EkS,QAASA,EACTstB,MAAOjnC,EAAU8mC,EAAMG,QAAU,GACjCC,YAAaJ,EAAMI,cACnBC,WAAYL,EAAMK,aAClBhoB,aAAcA,EAElB,EACAS,eAAgB,SAAwBC,EAAaH,GACnD,OAAO,GAAc,GAAc,CAAC,EAAGG,GAAc,CAAC,EAAG,CACvDunB,WAAYn6C,KAAKuyB,qBAAqBE,IAE1C,EAEJ,CACF,ECnHA,IAAI,GAAY,CAAC,QAAS,cAAe,UAAW,cAAe,aAAc,YAAa,eAAgB,WAAY,WAAY,YAAa,aAAc,eAAgB,cAC/K,GAAa,CAAC,aAAc,YAAa,aAAc,OAAQ,WACjE,SAAS,KAAiS,OAApR,GAAW3sB,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAyBod,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAKpe,SAASk6B,GAAW3pB,GACzB,IAAIupB,EAAQvpB,EAAKupB,MACfZ,EAAc3oB,EAAK2oB,YACnB1sB,EAAU+D,EAAK/D,QACfutB,EAAcxpB,EAAKwpB,YACnBC,EAAazpB,EAAKypB,WAClBG,EAAiB5pB,EAAK6pB,UACtBA,OAA+B,IAAnBD,GAAmCA,EAC/CE,EAAoB9pB,EAAK+pB,aACzBA,OAAqC,IAAtBD,GAAsCA,EACrDE,EAAgBhqB,EAAKiqB,SACrBA,OAA6B,IAAlBD,GAAkCA,EAC7CE,EAAgBlqB,EAAKmqB,SACrBA,OAA6B,IAAlBD,GAAkCA,EAC7CtkB,EAAY5F,EAAK4F,UACjBwkB,EAAapqB,EAAKoqB,WAClB9L,EAAete,EAAKse,aACpB8F,EAAkBpkB,EAAKgc,WACvBA,OAAiC,IAApBoI,EAA6B,CAAC,EAAIA,EAC/C/gB,EAAQ,GAAyBrD,EAAM,IAErCqqB,EAAoB1B,EAAc,EAClC2B,EAAgB3B,EAAc,EAC9B4B,EAAgBtuB,EAAU,EAC9B,OAAoB,gBAAoB,MAAO,GAAS,CAAC,EAAGoH,EAAO,CACjEwR,UAAWkH,GAAG,iBAAkBC,EAAWn3B,KAAMoX,GAAW,GAAK8f,GAAG,+BAAgCC,EAAW0I,kBAAmBrhB,EAAMwR,aACzH,gBAAoB,KAAM,CACzCA,UAAWkH,GAAG,sBAAuBC,EAAW1pC,OAC/Cu3C,GAA0B,gBAAoBW,GAAgB,CAC/DC,WAAYjB,EACZ3U,UAAWkH,GAAG,iCAAkCC,EAAW0O,eAC3D1O,WAAYA,EACZ,aAAcsC,EAAaqM,uBAC3BxgB,KAAMvE,EAba,GAcnBqf,QAAS,WACP,OAAOmF,EAfU,EAgBnB,GACC9L,EAAasM,mBAAoBb,GAA6B,gBAAoBS,GAAgB,CACnGC,WAAYjB,EACZ3U,UAAWkH,GAAG,oCAAqCC,EAAW6O,kBAC9D7O,WAAYA,EACZ,aAAcsC,EAAawM,0BAC3B3gB,KAAMvE,EAAUykB,GAChBpF,QAAS,WACP,OAAOmF,EAAWC,EACpB,GACC/L,EAAayM,sBAAuBxB,EAAMjxC,KAAI,SAAU8B,GACzD,OAAoB,gBAAoBowC,GAAgB,CACtD93C,IAAK0H,EACLqwC,YAAY,EACZ5V,UAAWkH,GAAG,4BAA6BC,EAAWgP,SAAU5wC,IAASuuC,GAAe5M,GAAG,gCAAiCC,EAAW2I,eACvI3I,WAAYA,EACZ,aAAcsC,EAAa2M,kBAAkB,CAC3CtC,YAAavuC,EAAO,EACpB6hB,QAASA,IAEXkO,KAAMvE,EAAUxrB,GAChB6qC,QAAS,WACP,OAAOmF,EAAWhwC,EACpB,GACCkkC,EAAa4M,aAAa,CAC3BvC,YAAavuC,EAAO,EACpB6hB,QAASA,IAEb,IAAIguB,GAAyB,gBAAoBO,GAAgB,CAC/DC,WAAYhB,EACZ5U,UAAWkH,GAAG,gCAAiCC,EAAWmP,cAC1DnP,WAAYA,EACZ,aAAcsC,EAAa8M,sBAC3BjhB,KAAMvE,EAAU0kB,GAChBrF,QAAS,WACP,OAAOmF,EAAWE,EACpB,GACChM,EAAa+M,kBAAmBlB,GAAyB,gBAAoBK,GAAgB,CAC9FC,WAAYhB,EACZ5U,UAAWkH,GAAG,gCAAiCC,EAAWsP,cAC1DtP,WAAYA,EACZ,aAAcsC,EAAaiN,sBAC3BphB,KAAMvE,EAAU2kB,GAChBtF,QAAS,WACP,OAAOmF,EAAWG,EACpB,GACCjM,EAAakN,mBAClB,CACA,SAAShB,GAAe7jB,GACtB,IAAI8jB,EAAa9jB,EAAM8jB,WACrB5V,EAAYlO,EAAMkO,UAClBmH,EAAarV,EAAMqV,WACnB7R,EAAOxD,EAAMwD,KACbshB,EAAW9kB,EAAMse,QACjB5hB,EAAQ,GAAyBsD,EAAO,IAC1C,OAAI8jB,EACkB,gBAAoB,KAAM,CAC5C5V,UAAWkH,GAAG,sBAAuBC,EAAWz2B,KAAM,gCAAiCy2B,EAAW0P,aAAc7W,IAClG,gBAAoB,OAAQ,GAAS,CACnDA,UAAWkH,GAAG,sBAAuBC,EAAW2P,OAC/CtoB,KAEe,gBAAoB,KAAM,CAC5CwR,UAAWkH,GAAG,sBAAuBC,EAAWz2B,KAAMsvB,IACxC,gBAAoB,IAAK,GAAS,CAChDA,UAAWkH,GAAG,sBAAuBC,EAAW2P,MAChDxhB,KAAMA,EACN8a,QAAS,SAAiBr3B,IC/GvB,SAAyBA,GAC9B,IAAIg+B,EAAiC,IAAjBh+B,EAAMi+B,OAC1B,OAAOjlC,QAAQglC,GAAiBh+B,EAAMk+B,QAAUl+B,EAAMm+B,SAAWn+B,EAAMo+B,SAAWp+B,EAAMq+B,SAC1F,ED6GUC,CAAgBt+B,KAGpBA,EAAM+wB,iBACN8M,EAAS79B,GACX,GACCyV,IACL,CEvHA,SAAS,GAAQvT,GAAkC,OAAO,GAAU,mBAAqByD,QAAU,iBAAmBA,OAAOC,SAAW,SAAU1D,GAAO,cAAcA,CAAK,EAAI,SAAUA,GAAO,OAAOA,GAAO,mBAAqByD,QAAUzD,EAAIrW,cAAgB8Z,QAAUzD,IAAQyD,OAAOtjB,UAAY,gBAAkB6f,CAAK,EAAG,GAAQA,EAAM,CAC/U,IAAI,GAAY,CAAC,YAAa,eAAgB,WAAY,WAAY,UAAW,aAAc,gBAC/F,SAAS,KAAiS,OAApR,GAAWza,OAAO08B,OAAS18B,OAAO08B,OAAO5kB,OAAS,SAAUsC,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAASpd,UAAUJ,GAAI,IAAK,IAAI6B,KAAO2b,EAAchZ,OAAOpF,UAAUyf,eAAere,KAAKgd,EAAQ3b,KAAQ+c,EAAO/c,GAAO2b,EAAO3b,GAAU,CAAE,OAAO+c,CAAQ,EAAU,GAASje,MAAMjC,KAAM0B,UAAY,CAClV,SAAS,GAAQ2f,EAAQ0L,GAAkB,IAAIhnB,EAAOD,OAAOC,KAAKsb,GAAS,GAAIvb,OAAO4d,sBAAuB,CAAE,IAAIsJ,EAAUlnB,OAAO4d,sBAAsBrC,GAAS0L,IAAmBC,EAAUA,EAAQ5mB,QAAO,SAAU6mB,GAAO,OAAOnnB,OAAO6d,yBAAyBtC,EAAQ4L,GAAKtN,UAAY,KAAK5Z,EAAKzD,KAAKL,MAAM8D,EAAMinB,EAAU,CAAE,OAAOjnB,CAAM,CACpV,SAAS,GAAcma,GAAU,IAAK,IAAI5e,EAAI,EAAGA,EAAII,UAAUD,OAAQH,IAAK,CAAE,IAAIwd,EAAS,MAAQpd,UAAUJ,GAAKI,UAAUJ,GAAK,CAAC,EAAGA,EAAI,EAAI,GAAQwE,OAAOgZ,IAAS,GAAI1W,SAAQ,SAAUjF,GAAO,GAAgB+c,EAAQ/c,EAAK2b,EAAO3b,GAAO,IAAK2C,OAAO+d,0BAA4B/d,OAAOge,iBAAiB5D,EAAQpa,OAAO+d,0BAA0B/E,IAAW,GAAQhZ,OAAOgZ,IAAS1W,SAAQ,SAAUjF,GAAO2C,OAAO2d,eAAevD,EAAQ/c,EAAK2C,OAAO6d,yBAAyB7E,EAAQ3b,GAAO,GAAI,CAAE,OAAO+c,CAAQ,CACzf,SAAS,GAAgBK,EAAKpd,EAAK6B,GAA4L,OAAnL7B,EAC5C,SAAwB9C,GAAO,IAAI8C,EACnC,SAAsBiqB,EAAOC,GAAQ,GAAuB,WAAnB,GAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMpJ,OAAOuJ,aAAc,QAAaptB,IAATmtB,EAAoB,CAAE,IAAIrV,EAAMqV,EAAKxrB,KAAKsrB,EAAOC,GAAQ,WAAY,GAAqB,WAAjB,GAAQpV,GAAmB,OAAOA,EAAK,MAAM,IAAIlX,UAAU,+CAAiD,CAAE,OAAiB,WAATssB,EAAoBtO,OAASyO,QAAQJ,EAAQ,CADnV,CAAa/sB,EAAK,UAAW,MAAwB,WAAjB,GAAQ8C,GAAoBA,EAAM4b,OAAO5b,EAAM,CAD1E,CAAeA,MAAiBod,EAAOza,OAAO2d,eAAelD,EAAKpd,EAAK,CAAE6B,MAAOA,EAAO2a,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkBW,EAAIpd,GAAO6B,EAAgBub,CAAK,CAG3O,SAAS,GAAyBzB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAAkE3b,EAAK7B,EAAnE4e,EACzF,SAAuCpB,EAAQ0B,GAAY,GAAc,MAAV1B,EAAgB,MAAO,CAAC,EAAG,IAA2D3b,EAAK7B,EAA5D4e,EAAS,CAAC,EAAOO,EAAa3a,OAAOC,KAAK+Y,GAAqB,IAAKxd,EAAI,EAAGA,EAAImf,EAAWhf,OAAQH,IAAO6B,EAAMsd,EAAWnf,GAAQkf,EAASha,QAAQrD,IAAQ,IAAa+c,EAAO/c,GAAO2b,EAAO3b,IAAQ,OAAO+c,CAAQ,CADhN,CAA8BpB,EAAQ0B,GAAuB,GAAI1a,OAAO4d,sBAAuB,CAAE,IAAIuR,EAAmBnvB,OAAO4d,sBAAsB5E,GAAS,IAAKxd,EAAI,EAAGA,EAAI2zB,EAAiBxzB,OAAQH,IAAO6B,EAAM8xB,EAAiB3zB,GAAQkf,EAASha,QAAQrD,IAAQ,GAAkB2C,OAAOpF,UAAUqjB,qBAAqBjiB,KAAKgd,EAAQ3b,KAAgB+c,EAAO/c,GAAO2b,EAAO3b,GAAQ,CAAE,OAAO+c,CAAQ,CAKpe,SAAS,GAAWuQ,GACzB,IAAI6pB,EAAY7pB,EAAK6pB,UACnBE,EAAe/pB,EAAK+pB,aACpBE,EAAWjqB,EAAKiqB,SAChBE,EAAWnqB,EAAKmqB,SAChBtB,EAAU7oB,EAAK6oB,QACfK,EAAalpB,EAAKkpB,WAClB5K,EAAete,EAAKse,aACpBjb,EAAQ,GAAyBrD,EAAM,IACrCmsB,ECpBC,SAAuB9oB,EAAOqB,GACnC,OAAOD,GAAa,GAAmBpB,EAAOqB,EAChD,CDkBuB0nB,CAAc,CAC/BvD,QAASA,EACTK,WAAYA,GACX,CACDziB,aAAc,mBASdwZ,EAAU,CACZsJ,MARQ4C,EAAe5C,MASvBZ,YARoBwD,EAAenzC,kBASnCwwC,YARc2C,EAAe3C,YAS7BC,WARa0C,EAAe1C,WAS5BxtB,QARUkwB,EAAelwB,QASzB2J,UARYumB,EAAevmB,UAS3BwkB,WARS+B,EAAerQ,OASxBwC,aAAc,GAAc,CAC1BsM,kBAAmB,KACnBG,qBAAsB,IACtBM,iBAAkB,IAClBG,iBAAkB,KAClBN,aAAc,SAAsBvkB,GAClC,IAAIgiB,EAAchiB,EAAMgiB,YACxB,OAAOr6B,OAAOq6B,EAChB,EACAgC,uBAAwB,QACxBG,0BAA2B,WAC3BM,sBAAuB,OACvBG,sBAAuB,OACvBN,kBAAmB,SAA2B7hB,GAC5C,IAAIuf,EAAcvf,EAAMuf,YACxB,MAAO,QAAQh0C,OAAOg0C,EACxB,GACCrK,IAEL,OAAoB,gBAAoBqL,GAAuB,GAAS,CAAC,EAAGtmB,EAAO4c,EAAS,CAC1F4J,UAAWA,EACXE,aAAcA,EACdE,SAAUA,EACVE,SAAUA,IAEd,4DEuHA,OApLY,IAAc,IAAb,IAAE3X,GAAK,EAClB,MAAM,UACJ6Z,EAAS,MACTzkB,EAAK,SACL0kB,EAAQ,KACRC,EAAI,QACJC,EAAO,iBACPC,EAAgB,KAChBC,EAAI,eACJC,EAAc,SACdp6C,EAAQ,KACRq6C,EAAI,aACJC,GACEra,EAEJ,OACE,gBAAC,MAAI,CAACsa,aAAa,GAChBH,GACC,uBAAK9X,UAAU,sBACO,aAAnB8X,GACC,gCACE,qBAAG9X,UAAU,gCAA+B,WAC5C,uBAAKA,UAAU,yBACb,gBAAC,GAAAkY,KAAI,CACHjQ,GAAE,aAAe4P,EACjB7X,UAAU,iCAEV,gBAAC,GAAAmY,EAAW,CACVC,MAAOZ,EAAUa,gBACjBC,IAAKd,EAAUe,YACfvY,UAAU,yBAGd,uBAAKA,UAAU,oBACb,2BACE,gBAAC,GAAAkY,KAAI,CAACjQ,GAAE,aAAe4P,GACrB,qBAAG7X,UAAU,uBAAuBjN,IAEtC,uBAAKiN,UAAU,sBACZyX,EAASh0C,KAAI,CAAC9H,EAAM2C,IACnB,gBAAC,GAAA45C,KAAI,CACHzsC,MAAO,CAAE+sC,WAAY78C,GACrBkC,IAAKS,EACL0hC,UAAU,eACViI,GAAG,aAEFtsC,KAGiB,cAArBi8C,EACC,gBAAC,GAAAM,KAAI,CACHlY,UAAU,eACViI,GAAG,YACHx8B,MAAO,CAAEgtC,aAAc,CAACb,KAEvBA,GAGH,gBAAC,GAAAM,KAAI,CACHlY,UAAU,eACViI,GAAG,YACHx8B,MAAO,CAAEisC,KAAMA,EAAMC,QAASA,IAE7BD,GAAWA,EAAI,IAAI,IAAEC,KAK9B,gBAAC,GAAAO,KAAI,CAACjQ,GAAE,aAAe4P,EAAQ7X,UAAU,qBACvC,gBAAC,OAAa,MAAiB,kBAKtC,IACiB,SAAnB8X,GACC,gCACE,qBAAG9X,UAAU,gCAA+B,QAC5C,uBAAKA,UAAU,yBACZgY,EACC,gCACE,qBACE1iB,KAAM0iB,EACNp9B,OAAO,SACP89B,IAAI,aACJ1Y,UAAU,iCAEV,gBAAC,GAAAmY,EAAW,CACVC,MAAOZ,EAAUa,gBACjBC,IAAKd,EAAUe,YACfvY,UAAU,yBAGd,uBAAKA,UAAU,oBACb,qBAAG1K,KAAM0iB,EAAcp9B,OAAO,SAAS89B,IAAI,cACzC,qBAAG1Y,UAAU,uBAAuBjN,GACpC,qBAAGiN,UAAU,SACV,IAAI2Y,KAAKC,eAAe,QAAS,CAChCC,MAAO,OACPC,IAAK,UACLC,KAAM,YACLzrC,OAAO,IAAI+T,KAAK02B,MAGvB,qBACEziB,KAAM0iB,EACNp9B,OAAO,SACP89B,IAAI,aACJ1Y,UAAU,qBAEV,gBAAC,MAAc,MAAkB,iBAKvC,gCACE,gBAAC,GAAAkY,KAAI,CACHjQ,GAAE,SAAW4P,EACb7X,UAAU,iCAEV,gBAAC,GAAAmY,EAAW,CACVC,MAAOZ,EAAUa,gBACjBC,IAAKd,EAAUe,YACfvY,UAAU,yBAGd,uBAAKA,UAAU,oBACb,gBAAC,GAAAkY,KAAI,CAACjQ,GAAE,SAAW4P,GACjB,qBAAG7X,UAAU,uBAAuBjN,GACpC,qBAAGiN,UAAU,SACV,IAAI2Y,KAAKC,eAAe,QAAS,CAChCC,MAAO,OACPC,IAAK,UACLC,KAAM,YACLzrC,OAAO,IAAI+T,KAAK02B,MAGvB,gBAAC,GAAAG,KAAI,CAACjQ,GAAE,SAAW4P,EAAQ7X,UAAU,qBACnC,gBAAC,OAAa,MAAiB,mBAQzB,WAAnB8X,GACC,gCACE,qBAAG9X,UAAU,gCAA+B,UAC5C,uBAAKA,UAAU,yBACb,gBAAC,GAAAkY,KAAI,CACHjQ,GAAE,SAAW4P,EACb7X,UAAU,iCAETwX,GACC,gBAAC,GAAAW,EAAW,CACVC,MAAOZ,EAAUa,gBACjBC,IAAKd,EAAUe,YACfvY,UAAU,uCAIhB,uBAAKA,UAAU,oBACb,gBAAC,GAAAkY,KAAI,CAACjQ,GAAE,SAAW4P,GACjB,qBAAG7X,UAAU,uBAAuBjN,GACpC,qBAAGiN,UAAU,SAAStiC,IAExB,gBAAC,GAAAw6C,KAAI,CAACjQ,GAAE,SAAW4P,EAAQ7X,UAAU,qBACnC,gBAAC,OAAa,MAAiB,mBAQxC,mCCpKX,SAASgZ,GAAkB,GAAyB,IAAzB,SAAE/nC,EAAQ,SAAEqgB,GAAU,EAC/C,MAAM,QAAE7jB,GAAYyd,IAIpB,OAAKzd,EAAQ6Z,gBAAqC,IAAnB7Z,EAAQyH,OAShCjE,EAPH,gCACGqgB,EACD,uBAAKqZ,QAAM,GAAE15B,GAMrB,CAEA,SAASgoC,KACP,MAAM,aAAEruB,GAAiBM,IAEzB,OACE,2BACE,yBAAG,kBACc,yBAAIN,EAAaxlB,OAAU,KAIlD,CAEA,SAAS8zC,GAAmB,GAAyB,IAAzB,SAAEjoC,EAAQ,SAAEqgB,GAAU,EAChD,MAAM,aAAE1G,GAAiBM,IAEzB,OAAKN,EAAaxlB,MAIX6L,EAHEqgB,CAIX,CAEA,SAAS6nB,KACP,MAAM,OAAEjkC,GCxDD0a,GAAa,EAAcpB,EAAOqB,GADpC,IAAkBrB,EAAOqB,ED2D9B,OAAO,4BAAM,gBAAkB3a,EAAOsqB,iBAAiB,IACzD,CAEA,MAmIa4Z,GAAO,IAAM,gBAAC,KAAG,CAACrmB,MAAM,WAErC,OArIe,KACb,MAAMsQ,GAAelT,EAAAA,EAAAA,UACnB,IACEkpB,IACEC,aACAA,qCAEJ,KAEI,EAACC,EAAW,EAACC,IAAiBpvB,EAAAA,EAAAA,WAAS,IACvC,EAACqvB,EAAS,EAACC,IAAetvB,EAAAA,EAAAA,UAAS,QACnC,EAAC7X,EAAK,EAAConC,IAAWvvB,EAAAA,EAAAA,UAAS,aAEjC,OACE,gBAAC,IAAM,KACL,uBAAK4V,UAAU,eACb,gBAAC,GAAa,CACZqD,aAAcA,EACdttB,UAAU,QACVitB,SAAS,GAET,gBAAC,GAAS,CACR6F,YAAY,SACZ+Q,GAAG,aACH9O,iBAAiB,EACjB3D,WAAY,CACVn3B,KAAM,aACN45B,KAAM,kBACN9hB,MAAO,mBACP2iB,MAAO,mBACPF,OAAQ,oBACRlD,WAAY,kBACZK,UAAW,qBAGf,gBAACwR,GAAkB,CAAC5nB,SAAU,MAC5B,gBAAC0nB,GAAiB,CAAC1nB,SAAU,gBAAC2nB,GAAS,OACrC,gBAACE,GAAW,MACZ,uBAAKnZ,UAAU,sBACZuZ,EACC,0BACEvZ,UAAU,6BACVoQ,QAAS,IAAMoJ,GAAeD,IAE9B,gBAAC,OAAW,CAACvZ,UAAU,gBAA4B,UAIrD,0BACEA,UAAU,6BACVoQ,QAAS,IAAMoJ,GAAeD,IAE9B,gBAAC,OAAY,CAACvZ,UAAU,gBAA6B,UAIxDuZ,GACC,gBAAC,MAAI,CAACtB,aAAa,GACjB,uBAAKjY,UAAU,sBACb,uBAAKA,UAAU,iBACb,qBAAGA,UAAU,SAAQ,QACrB,gBAAC,GAAc,CAACvgC,UAAU,iBAC1B0nC,WAAY,CAAC,KAEf,uBAAKnH,UAAU,iBACb,qBAAGA,UAAU,SAAQ,QACrB,0BAAQA,UAAU,0BAChB,uBAAKA,UAAU,cAAkB,qBAEnC,0BAAQA,UAAU,0BAChB,uBAAKA,UAAU,cAAkB,qBAEnC,0BAAQA,UAAU,0BAChB,uBAAKA,UAAU,cAAkB,uBAEnC,0BAAQA,UAAU,0BAChB,uBAAKA,UAAU,cAAkB,2BAQ7C,gBAAC,GAAI,CACHwS,aAAcqH,GACd1S,WAAY,CAAEn3B,KAAM,oBAEtB,gBAACmjC,GAAS,CAACxtC,YAAa,KACxB,gBAAC,GAAU,CACTquC,QAAS,EACTgB,WAAW,EACXE,cAAc,EACdE,UAAU,EACVE,UAAU,EACV7L,aAAc,CACZyM,qBACE,0BACElW,UAAU,cACVoQ,QAAS,IAAMlxB,OAAO46B,SAAS,EAAG,IAElC,gBAAC,OAAW,MAAe,kBAG/BtD,iBACE,0BACEpG,QAAS,IAAMlxB,OAAO46B,SAAS,EAAG,GAClC9Z,UAAU,eACX,aACW,gBAAC,OAAY,OAG3BiW,0BAA2B,sBAC3BM,sBAAuB,mBAEzBpP,WAAY,CACVn3B,KAAM,kBACNvS,KAAM,kBACN04C,SAAU,kBACVU,aAAc,sBACd/G,aAAc,6BAOnB,iCE7Lb,IAAIp2B,EAAUD,OAAOre,UAAUse,QAC3BqgC,EAAkB,OAElBC,EACS,UADTA,EAES,UAGb9+C,EAAOC,QAAU,CACb,QAAW6+C,EACXC,WAAY,CACRC,QAAS,SAAUx6C,GACf,OAAOga,EAAQld,KAAKkD,EAAOq6C,EAAiB,IAChD,EACAI,QAAS,SAAUz6C,GACf,OAAO+Z,OAAO/Z,EAClB,GAEJw6C,QAASF,EACTG,QAASH,sCCnBb,IAAIxuC,EAAY,EAAQ,MACpB2T,EAAQ,EAAQ,MAChBi7B,EAAU,EAAQ,MAEtBl/C,EAAOC,QAAU,CACbi/C,QAASA,EACTj7B,MAAOA,EACP3T,UAAWA,sCCPf,IAAI6uC,EAAQ,EAAQ,MAEhB3sB,EAAMltB,OAAOpF,UAAUyf,eACvBjZ,EAAUnF,MAAMmF,QAEhBgY,EAAW,CACX0gC,WAAW,EACXC,iBAAiB,EACjBnkB,WAAY,GACZokB,QAAS,QACTC,iBAAiB,EACjBC,OAAO,EACPC,QAASN,EAAMO,OACfC,UAAW,IACXlqC,MAAO,EACPmqC,mBAAmB,EACnBC,0BAA0B,EAC1BC,eAAgB,IAChBC,aAAa,EACbC,cAAc,EACdC,oBAAoB,GAGpBJ,EAA2B,SAAUK,GACrC,OAAOA,EAAI1hC,QAAQ,aAAa,SAAU2hC,EAAIC,GAC1C,OAAO7hC,OAAO8hC,aAAaC,SAASF,EAAW,IACnD,GACJ,EAEIG,EAAkB,SAAUh1C,EAAK6H,GACjC,OAAI7H,GAAsB,iBAARA,GAAoB6H,EAAQosC,OAASj0C,EAAIvF,QAAQ,MAAQ,EAChEuF,EAAI0E,MAAM,KAGd1E,CACX,EA+GIi1C,EAAY,SAA8BC,EAAUl1C,EAAK6H,EAASstC,GAClE,GAAKD,EAAL,CAKA,IAAI99C,EAAMyQ,EAAQgsC,UAAYqB,EAASjiC,QAAQ,cAAe,QAAUiiC,EAKpE/qC,EAAQ,gBAIRyL,EAAU/N,EAAQqC,MAAQ,GALf,eAK6BkrC,KAAKh+C,GAC7C0O,EAAS8P,EAAUxe,EAAInB,MAAM,EAAG2f,EAAQ/d,OAAST,EAIjD4C,EAAO,GACX,GAAI8L,EAAQ,CAER,IAAK+B,EAAQ4sC,cAAgBxtB,EAAIlxB,KAAKgE,OAAOpF,UAAWmR,KAC/C+B,EAAQisC,gBACT,OAIR95C,EAAKzD,KAAKuP,EACd,CAKA,IADA,IAAIvQ,EAAI,EACDsS,EAAQqC,MAAQ,GAAqC,QAA/B0L,EAAUzL,EAAMirC,KAAKh+C,KAAkB7B,EAAIsS,EAAQqC,OAAO,CAEnF,GADA3U,GAAK,GACAsS,EAAQ4sC,cAAgBxtB,EAAIlxB,KAAKgE,OAAOpF,UAAWihB,EAAQ,GAAG3f,MAAM,GAAI,MACpE4R,EAAQisC,gBACT,OAGR95C,EAAKzD,KAAKqf,EAAQ,GACtB,CAQA,OAJIA,GACA5b,EAAKzD,KAAK,IAAMa,EAAInB,MAAM2f,EAAQ/d,OAAS,KAnFjC,SAAUw9C,EAAOr1C,EAAK6H,EAASstC,GAG7C,IAFA,IAAIG,EAAOH,EAAen1C,EAAMg1C,EAAgBh1C,EAAK6H,GAE5CtS,EAAI8/C,EAAM3/C,OAAS,EAAGH,GAAK,IAAKA,EAAG,CACxC,IAAIif,EACAjL,EAAO8rC,EAAM9/C,GAEjB,GAAa,OAATgU,GAAiB1B,EAAQ2sC,YACzBhgC,EAAM,GAAGnb,OAAOi8C,OACb,CACH9gC,EAAM3M,EAAQ4sC,aAAe16C,OAAO4Z,OAAO,MAAQ,CAAC,EACpD,IAAI4hC,EAA+B,MAAnBhsC,EAAK4T,OAAO,IAA+C,MAAjC5T,EAAK4T,OAAO5T,EAAK7T,OAAS,GAAa6T,EAAKtT,MAAM,GAAI,GAAKsT,EACjG1R,EAAQk9C,SAASQ,EAAW,IAC3B1tC,EAAQ2sC,aAA6B,KAAde,GAGvBxgD,MAAM8C,IACJ0R,IAASgsC,GACTviC,OAAOnb,KAAW09C,GAClB19C,GAAS,GACRgQ,EAAQ2sC,aAAe38C,GAASgQ,EAAQ8nB,YAE5Cnb,EAAM,IACF3c,GAASy9C,EACQ,cAAdC,IACP/gC,EAAI+gC,GAAaD,GAXjB9gC,EAAM,CAAE,EAAG8gC,EAanB,CAEAA,EAAO9gC,CACX,CAEA,OAAO8gC,CACX,CAqDWE,CAAYx7C,EAAMgG,EAAK6H,EAASstC,EAhDvC,CAiDJ,EAoCA1gD,EAAOC,QAAU,SAAUigD,EAAK78C,GAC5B,IAAI+P,EAnCoB,SAA+B/P,GACvD,IAAKA,EACD,OAAOqb,EAGX,GAAqB,OAAjBrb,EAAKo8C,cAAqC9/C,IAAjB0D,EAAKo8C,SAAiD,mBAAjBp8C,EAAKo8C,QACnE,MAAM,IAAIl/C,UAAU,iCAGxB,QAA4B,IAAjB8C,EAAKi8C,SAA4C,UAAjBj8C,EAAKi8C,SAAwC,eAAjBj8C,EAAKi8C,QACxE,MAAM,IAAI/+C,UAAU,qEAExB,IAAI++C,OAAkC,IAAjBj8C,EAAKi8C,QAA0B5gC,EAAS4gC,QAAUj8C,EAAKi8C,QAE5E,MAAO,CACHF,eAAqC,IAAnB/7C,EAAK+7C,UAA4B1gC,EAAS0gC,YAAc/7C,EAAK+7C,UAC/EC,gBAAiD,kBAAzBh8C,EAAKg8C,gBAAgCh8C,EAAKg8C,gBAAkB3gC,EAAS2gC,gBAC7FnkB,WAAuC,iBAApB73B,EAAK63B,WAA0B73B,EAAK63B,WAAaxc,EAASwc,WAC7EokB,QAASA,EACTC,gBAAiD,kBAAzBl8C,EAAKk8C,gBAAgCl8C,EAAKk8C,gBAAkB7gC,EAAS6gC,gBAC7FC,MAA6B,kBAAfn8C,EAAKm8C,MAAsBn8C,EAAKm8C,MAAQ9gC,EAAS8gC,MAC/DC,QAAiC,mBAAjBp8C,EAAKo8C,QAAyBp8C,EAAKo8C,QAAU/gC,EAAS+gC,QACtEE,UAAqC,iBAAnBt8C,EAAKs8C,WAA0BR,EAAM6B,SAAS39C,EAAKs8C,WAAat8C,EAAKs8C,UAAYjhC,EAASihC,UAE5GlqC,MAA8B,iBAAfpS,EAAKoS,QAAqC,IAAfpS,EAAKoS,OAAoBpS,EAAKoS,MAAQiJ,EAASjJ,MACzFmqC,mBAA8C,IAA3Bv8C,EAAKu8C,kBACxBC,yBAAmE,kBAAlCx8C,EAAKw8C,yBAAyCx8C,EAAKw8C,yBAA2BnhC,EAASmhC,yBACxHC,eAA+C,iBAAxBz8C,EAAKy8C,eAA8Bz8C,EAAKy8C,eAAiBphC,EAASohC,eACzFC,aAAkC,IAArB18C,EAAK08C,YAClBC,aAA2C,kBAAtB38C,EAAK28C,aAA6B38C,EAAK28C,aAAethC,EAASshC,aACpFC,mBAAuD,kBAA5B58C,EAAK48C,mBAAmC58C,EAAK48C,mBAAqBvhC,EAASuhC,mBAE9G,CAGkBgB,CAAsB59C,GAEpC,GAAY,KAAR68C,SAAcA,EACd,OAAO9sC,EAAQ4sC,aAAe16C,OAAO4Z,OAAO,MAAQ,CAAC,EASzD,IANA,IAAIgiC,EAAyB,iBAARhB,EAlMP,SAAgCA,EAAK9sC,GACnD,IAKItS,EALAif,EAAM,CAAC,EACPohC,EAAW/tC,EAAQwsC,kBAAoBM,EAAI1hC,QAAQ,MAAO,IAAM0hC,EAChErP,EAAQz9B,EAAQ0sC,iBAAmBsB,SAAWzhD,EAAYyT,EAAQ0sC,eAClE9tC,EAAQmvC,EAASlxC,MAAMmD,EAAQusC,UAAW9O,GAC1CwQ,GAAa,EAGb/B,EAAUlsC,EAAQksC,QACtB,GAAIlsC,EAAQmsC,gBACR,IAAKz+C,EAAI,EAAGA,EAAIkR,EAAM/Q,SAAUH,EACM,IAA9BkR,EAAMlR,GAAGkF,QAAQ,WAbX,mBAcFgM,EAAMlR,GACNw+C,EAAU,QAlBZ,wBAmBSttC,EAAMlR,KACbw+C,EAAU,cAEd+B,EAAYvgD,EACZA,EAAIkR,EAAM/Q,QAKtB,IAAKH,EAAI,EAAGA,EAAIkR,EAAM/Q,SAAUH,EAC5B,GAAIA,IAAMugD,EAAV,CAGA,IAKI1+C,EAAK4I,EALL2E,EAAO8B,EAAMlR,GAEbwgD,EAAmBpxC,EAAKlK,QAAQ,MAChCkY,GAA4B,IAAtBojC,EAA0BpxC,EAAKlK,QAAQ,KAAOs7C,EAAmB,GAG9D,IAATpjC,GACAvb,EAAMyQ,EAAQqsC,QAAQvvC,EAAMwO,EAAS+gC,QAASH,EAAS,OACvD/zC,EAAM6H,EAAQ6sC,mBAAqB,KAAO,KAE1Ct9C,EAAMyQ,EAAQqsC,QAAQvvC,EAAK1O,MAAM,EAAG0c,GAAMQ,EAAS+gC,QAASH,EAAS,OACrE/zC,EAAM4zC,EAAMoC,SACRhB,EAAgBrwC,EAAK1O,MAAM0c,EAAM,GAAI9K,IACrC,SAAUouC,GACN,OAAOpuC,EAAQqsC,QAAQ+B,EAAY9iC,EAAS+gC,QAASH,EAAS,QAClE,KAIJ/zC,GAAO6H,EAAQysC,0BAAwC,eAAZP,IAC3C/zC,EAAMs0C,EAAyBt0C,IAG/B2E,EAAKlK,QAAQ,QAAU,IACvBuF,EAAM7E,EAAQ6E,GAAO,CAACA,GAAOA,GAG7BinB,EAAIlxB,KAAKye,EAAKpd,GACdod,EAAIpd,GAAOw8C,EAAMsC,QAAQ1hC,EAAIpd,GAAM4I,GAEnCwU,EAAIpd,GAAO4I,CA/Bf,CAmCJ,OAAOwU,CACX,CAoI4C2hC,CAAYxB,EAAK9sC,GAAW8sC,EAChEngC,EAAM3M,EAAQ4sC,aAAe16C,OAAO4Z,OAAO,MAAQ,CAAC,EAIpD3Z,EAAOD,OAAOC,KAAK27C,GACdpgD,EAAI,EAAGA,EAAIyE,EAAKtE,SAAUH,EAAG,CAClC,IAAI6B,EAAM4C,EAAKzE,GACX6gD,EAASnB,EAAU79C,EAAKu+C,EAAQv+C,GAAMyQ,EAAwB,iBAAR8sC,GAC1DngC,EAAMo/B,EAAMl5C,MAAM8Z,EAAK4hC,EAAQvuC,EACnC,CAEA,OAAO+rC,EAAM1sC,QAAQsN,EACzB,qCC9PA,IAAIo/B,EAAQ,EAAQ,MAChBD,EAAU,EAAQ,MAClB1sB,EAAMltB,OAAOpF,UAAUyf,eAEvBiiC,EAAwB,CACxBC,SAAU,SAAkBC,GACxB,OAAOA,EAAS,IACpB,EACAtC,MAAO,QACP1sC,QAAS,SAAiBgvC,EAAQn/C,GAC9B,OAAOm/C,EAAS,IAAMn/C,EAAM,GAChC,EACAo/C,OAAQ,SAAgBD,GACpB,OAAOA,CACX,GAGAp7C,EAAUnF,MAAMmF,QAChBuJ,EAAQsO,OAAOre,UAAU+P,MACzBnO,EAAOP,MAAMrB,UAAU4B,KACvBkgD,EAAc,SAAUh0B,EAAKi0B,GAC7BngD,EAAKL,MAAMusB,EAAKtnB,EAAQu7C,GAAgBA,EAAe,CAACA,GAC5D,EAEIC,EAAQ/7B,KAAKjmB,UAAUiiD,YAEvBC,EAAgBlD,EAAiB,QACjCxgC,EAAW,CACX2jC,gBAAgB,EAChBjD,WAAW,EACXE,QAAS,QACTC,iBAAiB,EACjBI,UAAW,IACX2C,QAAQ,EACRC,QAASpD,EAAMmD,OACfE,kBAAkB,EAClBpwC,OAAQgwC,EACRK,UAAWvD,EAAQH,WAAWqD,GAE9BtvC,SAAS,EACT4vC,cAAe,SAAuB7F,GAClC,OAAOqF,EAAM5gD,KAAKu7C,EACtB,EACA8F,WAAW,EACX1C,oBAAoB,GAWpB3vC,EAAY,SAASA,EACrBuQ,EACAihC,EACAc,EACA3C,EACA0C,EACAJ,EACA38C,EACAyR,EACA+nC,EACAsD,EACAtwC,EACAqwC,EACAD,EACAlD,GAEA,IAxBuDt6C,EAwBnD+a,EAAMc,EAcV,GAbsB,mBAAXjb,EACPma,EAAMna,EAAOk8C,EAAQ/hC,GACdA,aAAeoG,KACtBpG,EAAM2iC,EAAc3iC,GACW,UAAxB6iC,GAAmCl8C,EAAQqZ,KAClDA,EAAMo/B,EAAMoC,SAASxhC,GAAK,SAAUvb,GAChC,OAAIA,aAAiB2hB,KACVu8B,EAAcl+C,GAElBA,CACX,KAGQ,OAARub,EAAc,CACd,GAAIkgC,EACA,OAAOsC,IAAYC,EAAmBD,EAAQT,EAAQpjC,EAAS6jC,QAASjD,EAAS,MAAOltC,GAAU0vC,EAGtG/hC,EAAM,EACV,CAEA,GA7CoB,iBADmC/a,EA8C7B+a,IA5CN,iBAAN/a,GACM,kBAANA,GACM,iBAANA,GACM,iBAANA,GAyCoBm6C,EAAM0D,SAAS9iC,GAAM,CACnD,GAAIwiC,EAAS,CACT,IAAIO,EAAWN,EAAmBV,EAASS,EAAQT,EAAQpjC,EAAS6jC,QAASjD,EAAS,MAAOltC,GAC7F,GAA4B,UAAxBwwC,GAAmCJ,EAAkB,CAGrD,IAFA,IAAIO,EAAc9yC,EAAM3O,KAAKid,OAAOwB,GAAM,KACtCijC,EAAe,GACVliD,EAAI,EAAGA,EAAIiiD,EAAY9hD,SAAUH,EACtCkiD,IAAuB,IAANliD,EAAU,GAAK,KAAO2hD,EAAUF,EAAQQ,EAAYjiD,GAAI4d,EAAS6jC,QAASjD,EAAS,QAASltC,IAEjH,MAAO,CAACqwC,EAAUK,GAAY,IAAME,EACxC,CACA,MAAO,CAACP,EAAUK,GAAY,IAAML,EAAUF,EAAQxiC,EAAKrB,EAAS6jC,QAASjD,EAAS,QAASltC,IACnG,CACA,MAAO,CAACqwC,EAAUX,GAAU,IAAMW,EAAUlkC,OAAOwB,IACvD,CAEA,IAMIkjC,EANAv9C,EAAS,GAEb,QAAmB,IAARqa,EACP,OAAOra,EAIX,GAA4B,UAAxBk9C,GAAmCl8C,EAAQqZ,GAE3CkjC,EAAU,CAAC,CAAEz+C,MAAOub,EAAI9e,OAAS,EAAI8e,EAAIqB,KAAK,MAAQ,UAAO,SAC1D,GAAI1a,EAAQd,GACfq9C,EAAUr9C,MACP,CACH,IAAIL,EAAOD,OAAOC,KAAKwa,GACvBkjC,EAAU5rC,EAAO9R,EAAK8R,KAAKA,GAAQ9R,CACvC,CAEA,IAAK,IAAIgjB,EAAI,EAAGA,EAAI06B,EAAQhiD,SAAUsnB,EAAG,CACrC,IAAI5lB,EAAMsgD,EAAQ16B,GACd/jB,EAAuB,iBAAR7B,QAAyC,IAAdA,EAAI6B,MAAwB7B,EAAI6B,MAAQub,EAAIpd,GAE1F,IAAIggD,GAAuB,OAAVn+C,EAAjB,CAIA,IAAI0+C,EAAYx8C,EAAQqZ,GACa,mBAAxB6iC,EAAqCA,EAAoBd,EAAQn/C,GAAOm/C,EAC/EA,GAAU1C,EAAY,IAAMz8C,EAAM,IAAMA,EAAM,KAEpDq/C,EAAYt8C,EAAQ4K,EAChB9L,EACA0+C,EACAN,EACA3C,EACA0C,EACAJ,EACA38C,EACAyR,EACA+nC,EACAsD,EACAtwC,EACAqwC,EACAD,EACAlD,GApBJ,CAsBJ,CAEA,OAAO55C,CACX,EAiDA1F,EAAOC,QAAU,SAAU4gB,EAAQxd,GAC/B,IAGI4/C,EAHAljC,EAAMc,EACNzN,EAjDwB,SAAmC/P,GAC/D,IAAKA,EACD,OAAOqb,EAGX,GAAqB,OAAjBrb,EAAKk/C,cAA4C,IAAjBl/C,EAAKk/C,SAAmD,mBAAjBl/C,EAAKk/C,QAC5E,MAAM,IAAIhiD,UAAU,iCAGxB,IAAI++C,EAAUj8C,EAAKi8C,SAAW5gC,EAAS4gC,QACvC,QAA4B,IAAjBj8C,EAAKi8C,SAA4C,UAAjBj8C,EAAKi8C,SAAwC,eAAjBj8C,EAAKi8C,QACxE,MAAM,IAAI/+C,UAAU,qEAGxB,IAAI6R,EAAS8sC,EAAiB,QAC9B,QAA2B,IAAhB77C,EAAK+O,OAAwB,CACpC,IAAKogB,EAAIlxB,KAAK49C,EAAQH,WAAY17C,EAAK+O,QACnC,MAAM,IAAI7R,UAAU,mCAExB6R,EAAS/O,EAAK+O,MAClB,CACA,IAAIqwC,EAAYvD,EAAQH,WAAW3sC,GAE/BxM,EAAS8Y,EAAS9Y,OAKtB,OAJ2B,mBAAhBvC,EAAKuC,QAAyBc,EAAQrD,EAAKuC,WAClDA,EAASvC,EAAKuC,QAGX,CACHy8C,eAA+C,kBAAxBh/C,EAAKg/C,eAA+Bh/C,EAAKg/C,eAAiB3jC,EAAS2jC,eAC1FjD,eAAqC,IAAnB/7C,EAAK+7C,UAA4B1gC,EAAS0gC,YAAc/7C,EAAK+7C,UAC/EE,QAASA,EACTC,gBAAiD,kBAAzBl8C,EAAKk8C,gBAAgCl8C,EAAKk8C,gBAAkB7gC,EAAS6gC,gBAC7FI,eAAqC,IAAnBt8C,EAAKs8C,UAA4BjhC,EAASihC,UAAYt8C,EAAKs8C,UAC7E2C,OAA+B,kBAAhBj/C,EAAKi/C,OAAuBj/C,EAAKi/C,OAAS5jC,EAAS4jC,OAClEC,QAAiC,mBAAjBl/C,EAAKk/C,QAAyBl/C,EAAKk/C,QAAU7jC,EAAS6jC,QACtEC,iBAAmD,kBAA1Bn/C,EAAKm/C,iBAAiCn/C,EAAKm/C,iBAAmB9jC,EAAS8jC,iBAChG58C,OAAQA,EACRwM,OAAQA,EACRqwC,UAAWA,EACXC,cAA6C,mBAAvBr/C,EAAKq/C,cAA+Br/C,EAAKq/C,cAAgBhkC,EAASgkC,cACxFC,UAAqC,kBAAnBt/C,EAAKs/C,UAA0Bt/C,EAAKs/C,UAAYjkC,EAASikC,UAC3EtrC,KAA2B,mBAAdhU,EAAKgU,KAAsBhU,EAAKgU,KAAO,KACpD4oC,mBAAuD,kBAA5B58C,EAAK48C,mBAAmC58C,EAAK48C,mBAAqBvhC,EAASuhC,mBAE9G,CAIkBkD,CAA0B9/C,GAKV,mBAAnB+P,EAAQxN,OAEfma,GADAna,EAASwN,EAAQxN,QACJ,GAAIma,GACVrZ,EAAQ0M,EAAQxN,UAEvBq9C,EADS7vC,EAAQxN,QAIrB,IAMIw9C,EANA79C,EAAO,GAEX,GAAmB,iBAARwa,GAA4B,OAARA,EAC3B,MAAO,GAKPqjC,EADA//C,GAAQA,EAAK+/C,eAAexB,EACdv+C,EAAK+/C,YACZ//C,GAAQ,YAAaA,EACdA,EAAKyP,QAAU,UAAY,SAE3B,UAGlB,IAAI8vC,EAAsBhB,EAAsBwB,GAE3CH,IACDA,EAAU39C,OAAOC,KAAKwa,IAGtB3M,EAAQiE,MACR4rC,EAAQ5rC,KAAKjE,EAAQiE,MAGzB,IAAK,IAAIvW,EAAI,EAAGA,EAAImiD,EAAQhiD,SAAUH,EAAG,CACrC,IAAI6B,EAAMsgD,EAAQniD,GAEdsS,EAAQuvC,WAA0B,OAAb5iC,EAAIpd,IAG7Bq/C,EAAYz8C,EAAM+K,EACdyP,EAAIpd,GACJA,EACAigD,EACAxvC,EAAQ6sC,mBACR7sC,EAAQuvC,UACRvvC,EAAQkvC,OAASlvC,EAAQmvC,QAAU,KACnCnvC,EAAQxN,OACRwN,EAAQiE,KACRjE,EAAQgsC,UACRhsC,EAAQsvC,cACRtvC,EAAQhB,OACRgB,EAAQqvC,UACRrvC,EAAQovC,iBACRpvC,EAAQksC,SAEhB,CAEA,IAAI+D,EAAS99C,EAAK6b,KAAKhO,EAAQusC,WAC3BmC,GAAoC,IAA3B1uC,EAAQivC,eAA0B,IAAM,GAYrD,OAVIjvC,EAAQmsC,kBACgB,eAApBnsC,EAAQksC,QAERwC,GAAU,uBAGVA,GAAU,mBAIXuB,EAAOpiD,OAAS,EAAI6gD,EAASuB,EAAS,EACjD,qCC5RA,IAAInE,EAAU,EAAQ,MAElB1sB,EAAMltB,OAAOpF,UAAUyf,eACvBjZ,EAAUnF,MAAMmF,QAEhB48C,EAAY,WAEZ,IADA,IAAIn1C,EAAQ,GACHrN,EAAI,EAAGA,EAAI,MAAOA,EACvBqN,EAAMrM,KAAK,MAAQhB,EAAI,GAAK,IAAM,IAAMA,EAAEsP,SAAS,KAAKmzC,eAG5D,OAAOp1C,CACX,CAPe,GA4BXq1C,EAAgB,SAAuBllC,EAAQlL,GAE/C,IADA,IAAI2M,EAAM3M,GAAWA,EAAQ4sC,aAAe16C,OAAO4Z,OAAO,MAAQ,CAAC,EAC1Dpe,EAAI,EAAGA,EAAIwd,EAAOrd,SAAUH,OACR,IAAdwd,EAAOxd,KACdif,EAAIjf,GAAKwd,EAAOxd,IAIxB,OAAOif,CACX,EAoMA/f,EAAOC,QAAU,CACbujD,cAAeA,EACfxhB,OA3IS,SAA4BtiB,EAAQpB,GAC7C,OAAOhZ,OAAOC,KAAK+Y,GAAQ9Y,QAAO,SAAU2J,EAAKxM,GAE7C,OADAwM,EAAIxM,GAAO2b,EAAO3b,GACXwM,CACX,GAAGuQ,EACP,EAuII+hC,QAlBU,SAAiBj7C,EAAGC,GAC9B,MAAO,GAAG7B,OAAO4B,EAAGC,EACxB,EAiBIgM,QAvDU,SAAiBjO,GAI3B,IAHA,IAAIi/C,EAAQ,CAAC,CAAE1jC,IAAK,CAAEqD,EAAG5e,GAASk/C,KAAM,MACpCC,EAAO,GAEF7iD,EAAI,EAAGA,EAAI2iD,EAAMxiD,SAAUH,EAKhC,IAJA,IAAI0U,EAAOiuC,EAAM3iD,GACbif,EAAMvK,EAAKuK,IAAIvK,EAAKkuC,MAEpBn+C,EAAOD,OAAOC,KAAKwa,GACdwI,EAAI,EAAGA,EAAIhjB,EAAKtE,SAAUsnB,EAAG,CAClC,IAAI5lB,EAAM4C,EAAKgjB,GACXhd,EAAMwU,EAAIpd,GACK,iBAAR4I,GAA4B,OAARA,IAAuC,IAAvBo4C,EAAK39C,QAAQuF,KACxDk4C,EAAM3hD,KAAK,CAAEie,IAAKA,EAAK2jC,KAAM/gD,IAC7BghD,EAAK7hD,KAAKyJ,GAElB,CAKJ,OAlMe,SAAsBk4C,GACrC,KAAOA,EAAMxiD,OAAS,GAAG,CACrB,IAAIuU,EAAOiuC,EAAMz8B,MACbjH,EAAMvK,EAAKuK,IAAIvK,EAAKkuC,MAExB,GAAIh9C,EAAQqZ,GAAM,CAGd,IAFA,IAAI6jC,EAAY,GAEPr7B,EAAI,EAAGA,EAAIxI,EAAI9e,SAAUsnB,OACR,IAAXxI,EAAIwI,IACXq7B,EAAU9hD,KAAKie,EAAIwI,IAI3B/S,EAAKuK,IAAIvK,EAAKkuC,MAAQE,CAC1B,CACJ,CACJ,CA+KIC,CAAaJ,GAENj/C,CACX,EAkCIk7C,OAvIS,SAAUQ,EAAKT,EAASH,GACjC,IAAIwE,EAAiB5D,EAAI1hC,QAAQ,MAAO,KACxC,GAAgB,eAAZ8gC,EAEA,OAAOwE,EAAetlC,QAAQ,iBAAkBulC,UAGpD,IACI,OAAOC,mBAAmBF,EAG9B,CAFE,MAAOtqC,GACL,OAAOsqC,CACX,CACJ,EA4HIxB,OA1HS,SAAgBpC,EAAK+D,EAAgB3E,EAAS4E,EAAM9xC,GAG7D,GAAmB,IAAf8tC,EAAIj/C,OACJ,OAAOi/C,EAGX,IAAIiE,EAASjE,EAOb,GANmB,iBAARA,EACPiE,EAAS3gC,OAAOtjB,UAAUkQ,SAAS9O,KAAK4+C,GAClB,iBAARA,IACdiE,EAAS5lC,OAAO2hC,IAGJ,eAAZZ,EACA,OAAO8E,OAAOD,GAAQ3lC,QAAQ,mBAAmB,SAAU2hC,GACvD,MAAO,SAAWG,SAASH,EAAG3+C,MAAM,GAAI,IAAM,KAClD,IAIJ,IADA,IAAIod,EAAM,GACD9d,EAAI,EAAGA,EAAIqjD,EAAOljD,SAAUH,EAAG,CACpC,IAAIgkB,EAAIq/B,EAAOE,WAAWvjD,GAGhB,KAANgkB,GACS,KAANA,GACM,KAANA,GACM,MAANA,GACCA,GAAK,IAAQA,GAAK,IAClBA,GAAK,IAAQA,GAAK,IAClBA,GAAK,IAAQA,GAAK,KAClB1S,IAAW8sC,EAAQF,UAAkB,KAANl6B,GAAoB,KAANA,GAEjDlG,GAAOulC,EAAOz7B,OAAO5nB,GAIrBgkB,EAAI,IACJlG,GAAY0kC,EAASx+B,GAIrBA,EAAI,KACJlG,GAAa0kC,EAAS,IAAQx+B,GAAK,GAAMw+B,EAAS,IAAY,GAAJx+B,GAI1DA,EAAI,OAAUA,GAAK,MACnBlG,GAAa0kC,EAAS,IAAQx+B,GAAK,IAAOw+B,EAAS,IAASx+B,GAAK,EAAK,IAASw+B,EAAS,IAAY,GAAJx+B,IAIpGhkB,GAAK,EACLgkB,EAAI,QAAiB,KAAJA,IAAc,GAA8B,KAAvBq/B,EAAOE,WAAWvjD,IAExD8d,GAAO0kC,EAAS,IAAQx+B,GAAK,IACvBw+B,EAAS,IAASx+B,GAAK,GAAM,IAC7Bw+B,EAAS,IAASx+B,GAAK,EAAK,IAC5Bw+B,EAAS,IAAY,GAAJx+B,GAC3B,CAEA,OAAOlG,CACX,EA4DIikC,SA9BW,SAAkB9iC,GAC7B,SAAKA,GAAsB,iBAARA,OAITA,EAAIrW,aAAeqW,EAAIrW,YAAYm5C,UAAY9iC,EAAIrW,YAAYm5C,SAAS9iC,GACtF,EAyBIihC,SAnCW,SAAkBjhC,GAC7B,MAA+C,oBAAxCza,OAAOpF,UAAUkQ,SAAS9O,KAAKye,EAC1C,EAkCIwhC,SApBW,SAAkBh2C,EAAK9H,GAClC,GAAIiD,EAAQ6E,GAAM,CAEd,IADA,IAAI+4C,EAAS,GACJxjD,EAAI,EAAGA,EAAIyK,EAAItK,OAAQH,GAAK,EACjCwjD,EAAOxiD,KAAK2B,EAAG8H,EAAIzK,KAEvB,OAAOwjD,CACX,CACA,OAAO7gD,EAAG8H,EACd,EAYItF,MA5MQ,SAASA,EAAMyZ,EAAQpB,EAAQlL,GAEvC,IAAKkL,EACD,OAAOoB,EAGX,GAAsB,iBAAXpB,EAAqB,CAC5B,GAAI5X,EAAQgZ,GACRA,EAAO5d,KAAKwc,OACT,KAAIoB,GAA4B,iBAAXA,EAKxB,MAAO,CAACA,EAAQpB,IAJXlL,IAAYA,EAAQ4sC,cAAgB5sC,EAAQisC,mBAAsB7sB,EAAIlxB,KAAKgE,OAAOpF,UAAWoe,MAC9FoB,EAAOpB,IAAU,EAIzB,CAEA,OAAOoB,CACX,CAEA,IAAKA,GAA4B,iBAAXA,EAClB,MAAO,CAACA,GAAQ9a,OAAO0Z,GAG3B,IAAIimC,EAAc7kC,EAKlB,OAJIhZ,EAAQgZ,KAAYhZ,EAAQ4X,KAC5BimC,EAAcf,EAAc9jC,EAAQtM,IAGpC1M,EAAQgZ,IAAWhZ,EAAQ4X,IAC3BA,EAAO1W,SAAQ,SAAU4N,EAAM1U,GAC3B,GAAI0xB,EAAIlxB,KAAKoe,EAAQ5e,GAAI,CACrB,IAAI0jD,EAAa9kC,EAAO5e,GACpB0jD,GAAoC,iBAAfA,GAA2BhvC,GAAwB,iBAATA,EAC/DkK,EAAO5e,GAAKmF,EAAMu+C,EAAYhvC,EAAMpC,GAEpCsM,EAAO5d,KAAK0T,EAEpB,MACIkK,EAAO5e,GAAK0U,CAEpB,IACOkK,GAGJpa,OAAOC,KAAK+Y,GAAQ9Y,QAAO,SAAU2J,EAAKxM,GAC7C,IAAI6B,EAAQ8Z,EAAO3b,GAOnB,OALI6vB,EAAIlxB,KAAK6N,EAAKxM,GACdwM,EAAIxM,GAAOsD,EAAMkJ,EAAIxM,GAAM6B,EAAO4O,GAElCjE,EAAIxM,GAAO6B,EAER2K,CACX,GAAGo1C,EACP,sCC5Fa,IAAI/qC,EAAE,EAAQ,MAAwE,IAAIrR,EAAE,mBAAoB7C,OAAOm/C,GAAGn/C,OAAOm/C,GAA1G,SAAWj+C,EAAEC,GAAG,OAAOD,IAAIC,IAAI,IAAID,GAAG,EAAEA,GAAI,EAAEC,IAAID,GAAIA,GAAGC,GAAIA,CAAC,EAAiDqZ,EAAEtG,EAAE0V,SAASttB,EAAE4X,EAAEoS,UAAUvrB,EAAEmZ,EAAEmS,gBAAgB5F,EAAEvM,EAAEkrC,cACtM,SAAS/nC,EAAEnW,GAAG,IAAIC,EAAED,EAAEm+C,YAAYn+C,EAAEA,EAAEhC,MAAM,IAAI,IAAI8gB,EAAE7e,IAAI,OAAO0B,EAAE3B,EAAE8e,EAAoB,CAAjB,MAAMrgB,GAAG,OAAM,CAAE,CAAC,CAA4B,IAAIye,EAAE,oBAAqBM,aAAQ,IAAqBA,OAAO8S,eAAU,IAAqB9S,OAAO8S,SAASC,cAAzI,SAAWvwB,EAAEC,GAAG,OAAOA,GAAG,EAD+F,SAAWD,EAAEC,GAAG,IAAI6e,EAAE7e,IAAIxB,EAAE6a,EAAE,CAAC8kC,KAAK,CAACpgD,MAAM8gB,EAAEq/B,YAAYl+C,KAAKqe,EAAE7f,EAAE,GAAG2/C,KAAKviD,EAAE4C,EAAE,GAAwJ,OAArJ5E,GAAE,WAAWykB,EAAEtgB,MAAM8gB,EAAER,EAAE6/B,YAAYl+C,EAAEkW,EAAEmI,IAAIziB,EAAE,CAACuiD,KAAK9/B,GAAG,GAAE,CAACte,EAAE8e,EAAE7e,IAAI7E,GAAE,WAA6B,OAAlB+a,EAAEmI,IAAIziB,EAAE,CAACuiD,KAAK9/B,IAAWte,GAAE,WAAWmW,EAAEmI,IAAIziB,EAAE,CAACuiD,KAAK9/B,GAAG,GAAE,GAAE,CAACte,IAAIuf,EAAET,GAAUA,CAAC,EAC5MrlB,EAAQorC,0BAAqB,IAAS7xB,EAAE6xB,qBAAqB7xB,EAAE6xB,qBAAqB3nB,qCCPxU1jB,EAAOC,QAAU,EAAjB","sources":["webpack://gatsby-starter-default/./node_modules/@algolia/events/events.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/index.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/DerivedHelper/index.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/SearchParameters/index.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/SearchResults/index.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/algoliasearch.helper.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/compact.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/defaultsPure.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/find.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/findIndex.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/formatSort.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/inherits.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/intersection.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/merge.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/omit.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/orderBy.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/functions/valToNumber.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/requestBuilder.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/utils/isValidUserToken.js","webpack://gatsby-starter-default/./node_modules/algoliasearch-helper/src/version.js","webpack://gatsby-starter-default/./node_modules/algoliasearch/dist/algoliasearch-lite.umd.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/invariant.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/InstantSearchContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useInstantSearchContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useIsomorphicLayoutEffect.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/createSearchResults.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/getIndexSearchResults.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/IndexContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useIndexContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useSearchResults.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useSearchState.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/hooks/useInstantSearch.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/documentation.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/noop.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/checkRendering.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/getObjectType.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/stats/connectStats.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/dequal.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/components/InstantSearchServerContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useInstantSearchServerContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useStableValue.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useWidget.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/hooks/useConnector.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/render-args.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/safelyRunOnBrowser.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/routers/history.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/stateMappings/simple.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/isEqual.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/middlewares/createRouterMiddleware.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/isIndexWidget.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/findIndex.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/uniq.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/widgets/index/index.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/suit.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/escape-html.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/escape-highlight.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/helpers/highlight.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/concatHighlightedParts.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/getHighlightFromSiblings.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/reverseHighlightedParts.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/getHighlightedParts.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/helpers/reverseHighlight.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/helpers/snippet.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/helpers/reverseSnippet.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/serializer.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/helpers/insights.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/createHelpers.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/formatNumber.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/defer.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/setIndexHelperState.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/InstantSearch.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/version.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/InstantSearchSSRContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/version.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useForceUpdate.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useInstantSearchApi.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/lib/useInstantSearchSSRContext.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/components/InstantSearch.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/lib/cx.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/SearchBox.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/widgets/SearchBox.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/useSearchBox.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/isFacetRefined.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/createSendEventForFacet.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/refinement-list/connectRefinementList.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/InternalHighlight.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/Highlight.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/ShowMoreButton.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/RefinementList.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/widgets/RefinementList.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/useRefinementList.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/createSendEventForHits.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/hits/connectHits.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/Hits.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/widgets/Hits.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/useHits.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/configure/connectConfigure.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/components/Configure.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/useConfigure.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/lib/utils/range.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/Pagination.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/ui/lib/isModifierClick.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks-web/dist/es/widgets/Pagination.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/usePagination.js","webpack://gatsby-starter-default/./src/components/searchResult.js","webpack://gatsby-starter-default/./src/pages/search.js","webpack://gatsby-starter-default/./node_modules/react-instantsearch-hooks/dist/es/connectors/useStats.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/node_modules/qs/lib/formats.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/node_modules/qs/lib/index.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/node_modules/qs/lib/parse.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/node_modules/qs/lib/stringify.js","webpack://gatsby-starter-default/./node_modules/instantsearch.js/node_modules/qs/lib/utils.js","webpack://gatsby-starter-default/./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js","webpack://gatsby-starter-default/./node_modules/use-sync-external-store/shim/index.js"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\n// EventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","'use strict';\n\nvar EventEmitter = require('@algolia/events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function(v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (value === undefined) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n        memo[key] = facetList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar intersection = require('../functions/intersection');\nvar find = require('../functions/find');\nvar valToNumber = require('../functions/valToNumber');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\nvar isValidUserToken = require('../utils/isValidUserToken');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function(el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  if (params.userToken !== undefined && !isValidUserToken(params.userToken)) {\n    console.warn('[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\\n  - Format: [a-zA-Z0-9_-]{1,64}');\n  }\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  var self = this;\n  Object.keys(params).forEach(function(paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  numberKeys.forEach(function(k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      if (Array.isArray(geoRect)) {\n        return geoRect.map(function(value) {\n          return parseFloat(value);\n        });\n      }\n      return geoRect;\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function(attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function(v) {\n          if (Array.isArray(v)) {\n            return v.map(function(vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      )\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {\n        var operators = numericRefinements[key];\n        var operatorList = {};\n\n        operators = operators || {};\n        Object.keys(operators).forEach(function(operator) {\n          var values = operators[operator] || [];\n          var outValues = [];\n          values.forEach(function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (outValues.length !== values.length) {\n            hasChanged = true;\n          }\n          operatorList[operator] = outValues;\n        });\n\n        memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function(t) {\n        return t !== tag;\n      })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function(facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {\n      return self.disjunctiveFacetsRefinements[facet].length > 0;\n    })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function(facet) { return facet.name; }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function(f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n\n    'facets',\n    'disjunctiveFacets',\n    'facetsRefinements',\n    'hierarchicalFacets',\n    'facetsExcludes',\n\n    'disjunctiveFacetsRefinements',\n    'numericRefinements',\n    'tagRefinements',\n    'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    var self = this;\n    Object.keys(this).forEach(function(paramName) {\n      var paramValue = self[paramName];\n      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(\n      function(previous, key) {\n        var isPreviousValueDefined = previous[key] !== undefined;\n        var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n        if (isPreviousValueDefined && !isNextValueDefined) {\n          return omit(previous, [key]);\n        }\n\n        if (isNextValueDefined) {\n          previous[key] = nextWithNumbers[key];\n        }\n\n        return previous;\n      },\n      previousPlainObject\n    );\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function() {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      function(f) {\n        return f.name === hierarchicalFacetName;\n      }\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function(part) {\n      return part.trim();\n    });\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar orderBy = require('../functions/orderBy');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\nvar fv = require('../functions/escapeFacetValue');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(\n      hierarchicalFacet\n    );\n    var hierarchicalRootPath = state._getHierarchicalRootPath(\n      hierarchicalFacet\n    );\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(\n      hierarchicalFacet\n    );\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      escapedValue: null,\n      exhaustive: rootExhaustive,\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function(subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bires'],\n      //       level1: ['beers > IPA', 'bires > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bires > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function(facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function(tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function(tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            unescapeFacetValue(currentRefinement),\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    escapedValue: escapeFacetValue(facetValue),\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null\n  };\n}\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar orderBy = require('../functions/orderBy');\nvar compact = require('../functions/compact');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\nvar fv = require('../functions/escapeFacetValue');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * @param {string[]} attributes\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function(val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets\n * @param {string} hierarchicalAttributeName\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(hierarchicalFacets, function facetKeyMatchesAttribute(\n    hierarchicalFacet\n  ) {\n    var facetNames = hierarchicalFacet.attributes || [];\n    return facetNames.indexOf(hierarchicalAttributeName) > -1;\n  });\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devid=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex\": 202,\n            \"Insignia\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results, options) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  var self = this;\n\n  // https://www.algolia.com/doc/api-reference/api-methods/search/#response\n  Object.keys(mainSubResponse).forEach(function(key) {\n    self[key] = mainSubResponse[key];\n  });\n\n  // Make every key of the result options reachable from the instance\n  Object.keys(options || {}).forEach(function(key) {\n    self[key] = options[key];\n  });\n\n  /**\n   * query used to generate the results\n   * @name query\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @name parsedQuery\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @name hits\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * index where the results come from\n   * @name index\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * number of hits per page requested\n   * @name hitsPerPage\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of hits of this query on the index\n   * @name nbHits\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @name nbPages\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * current page\n   * @name page\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The position if the position was guessed by IP.\n   * @name aroundLatLng\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"48.8637,2.3615\",\n   */\n  /**\n   * The radius computed by Algolia.\n   * @name automaticRadius\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"126792922\",\n   */\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @name serverUsed\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"c7-use-2.algolia.net\",\n   */\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @name timeoutCounts\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @name timeoutHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the counts of the facets is exhaustive\n   * @name exhaustiveFacetsCount\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the number of hits is exhaustive\n   * @name exhaustiveNbHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @name userData\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @name queryID\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = results.reduce(function(sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function(facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(unescapeFacetValue(refinementValue)) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some parent level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    results.slice(nextDisjunctiveResult).forEach(function(result) {\n      var facets = result && result.facets\n        ? result.facets\n        : {};\n\n      Object.keys(facets).forEach(function(dfacet) {\n        var facetResults = facets[dfacet];\n        var position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n        // then the disjunctive values will be `beers` (count: 100),\n        // but we do not want to display\n        //   | beers (100)\n        //     > IPA (5)\n        // We want\n        //   | beers (5)\n        //     > IPA (5)\n        var defaultData = {};\n\n        if (currentRefinement.length > 0) {\n          var root = currentRefinement[0].split(separator)[0];\n          defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n          defaultData,\n          facetResults,\n          self.hierarchicalFacets[position][attributeIndex].data\n        );\n      });\n\n      nextDisjunctiveResult++;\n    });\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function(facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    excludes.forEach(function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function(name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, value),\n        isExcluded: results._state.isExcludeRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function(name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, value)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    var hierarchicalFacetValues = find(results.hierarchicalFacets, predicate);\n    if (!hierarchicalFacetValues) return hierarchicalFacetValues;\n\n    var hierarchicalFacet = results._state.getHierarchicalFacetByName(attribute);\n    var currentRefinementSplit = unescapeFacetValue(\n      results._state.getHierarchicalRefinement(attribute)[0] || ''\n    ).split(results._state._getHierarchicalFacetSeparator(hierarchicalFacet));\n    currentRefinementSplit.unshift(attribute);\n\n    setIsRefined(hierarchicalFacetValues, currentRefinementSplit, 0);\n\n    return hierarchicalFacetValues;\n  }\n}\n\n/**\n * Set the isRefined of a hierarchical facet result based on the current state.\n * @param {SearchResults.HierarchicalFacet} item Hierarchical facet to fix\n * @param {string[]} currentRefinementSplit array of parts of the current hierarchical refinement\n * @param {number} depth recursion depth in the currentRefinement\n */\nfunction setIsRefined(item, currentRefinement, depth) {\n  item.isRefined = item.name === currentRefinement[depth];\n  if (item.data) {\n    item.data.forEach(function(child) {\n      setIsRefined(child, currentRefinement, depth + 1);\n    });\n  }\n}\n\n/**\n * Sort nodes of a hierarchical or disjunctive facet results\n * @private\n * @param {function} sortFn\n * @param {HierarchicalFacet|Array} node node upon which we want to apply the sort\n * @param {string[]} names attribute names\n * @param {number} [level=0] current index in the names array\n */\nfunction recSort(sortFn, node, names, level) {\n  level = level || 0;\n\n  if (Array.isArray(node)) {\n    return sortFn(node, names[level]);\n  }\n\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function(childNode) {\n    return recSort(sortFn, childNode, names, level + 1);\n  });\n  var sortedChildren = sortFn(children, names[level]);\n  var newNode = defaultsPure({data: sortedChildren}, node);\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * @typedef FacetOrdering\n * @type {Object}\n * @property {string[]} [order]\n * @property {'count' | 'alpha' | 'hidden'} [sortRemainingBy]\n */\n\n/**\n * Sorts facet arrays via their facet ordering\n * @param {Array} facetValues the values\n * @param {FacetOrdering} facetOrdering the ordering\n * @returns {Array}\n */\nfunction sortViaFacetOrdering(facetValues, facetOrdering) {\n  var orderedFacets = [];\n  var remainingFacets = [];\n\n  var order = facetOrdering.order || [];\n  /**\n   * an object with the keys being the values in order, the values their index:\n   * ['one', 'two'] -> { one: 0, two: 1 }\n   */\n  var reverseOrder = order.reduce(function(acc, name, i) {\n    acc[name] = i;\n    return acc;\n  }, {});\n\n  facetValues.forEach(function(item) {\n    // hierarchical facets get sorted using their raw name\n    var name = item.path || item.name;\n    if (reverseOrder[name] !== undefined) {\n      orderedFacets[reverseOrder[name]] = item;\n    } else {\n      remainingFacets.push(item);\n    }\n  });\n\n  orderedFacets = orderedFacets.filter(function(facet) {\n    return facet;\n  });\n\n  var sortRemainingBy = facetOrdering.sortRemainingBy;\n  var ordering;\n  if (sortRemainingBy === 'hidden') {\n    return orderedFacets;\n  } else if (sortRemainingBy === 'alpha') {\n    ordering = [['path', 'name'], ['asc', 'asc']];\n  } else {\n    ordering = [['count'], ['desc']];\n  }\n\n  return orderedFacets.concat(\n    orderBy(remainingFacets, ordering[0], ordering[1])\n  );\n}\n\n/**\n * @param {SearchResults} results the search results class\n * @param {string} attribute the attribute to retrieve ordering of\n * @returns {FacetOrdering=}\n */\nfunction getFacetOrdering(results, attribute) {\n  return (\n    results.renderingContent &&\n    results.renderingContent.facetOrdering &&\n    results.renderingContent.facetOrdering.values &&\n    results.renderingContent.facetOrdering.values[attribute]\n  );\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {boolean} [opts.facetOrdering]\n * Force the use of facetOrdering from the result if a sortBy is present. If\n * sortBy isn't present, facetOrdering will be used automatically.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {\n    sortBy: SearchResults.DEFAULT_SORT,\n    // if no sortBy is given, attempt to sort based on facetOrdering\n    // if it is given, we still allow to sort via facet ordering first\n    facetOrdering: !(opts && opts.sortBy)\n  });\n\n  var results = this;\n  var attributes;\n  if (Array.isArray(facetValues)) {\n    attributes = [attribute];\n  } else {\n    var config = results._state.getHierarchicalFacetByName(facetValues.name);\n    attributes = config.attributes;\n  }\n\n  return recSort(function(data, facetName) {\n    if (options.facetOrdering) {\n      var facetOrdering = getFacetOrdering(results, facetName);\n      if (Boolean(facetOrdering)) {\n        return sortViaFacetOrdering(data, facetOrdering);\n      }\n    }\n\n    if (Array.isArray(options.sortBy)) {\n      var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n      return orderBy(data, order[0], order[1]);\n    } else if (typeof options.sortBy === 'function') {\n      return vanillaSortFn(options.sortBy, data);\n    }\n    throw new Error(\n      'options.sortBy is optional but if defined it must be ' +\n        'either an array of string (predicates) or a sorting function'\n    );\n  }, facetValues, attributes);\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function(facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function(attributeName) {\n    state.facetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function(attributeName) {\n    state.facetsExcludes[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n\n  Object.keys(state.numericRefinements).forEach(function(attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function(operator) {\n      operators[operator].forEach(function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {*} state\n * @param {*} type\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function(f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\n/**\n * @param {*} state\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function(facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function(intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet && find(intermediateFacet.data, function(f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar EventEmitter = require('@algolia/events');\nvar inherits = require('./functions/inherits');\nvar objectHasKeys = require('./functions/objectHasKeys');\nvar omit = require('./functions/omit');\nvar merge = require('./functions/merge');\n\nvar version = require('./version');\nvar escapeFacetValue = require('./functions/escapeFacetValue').escapeFacetValue;\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search({onlyWithDerivedHelpers: false});\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {\n  this._search({onlyWithDerivedHelpers: true});\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n /**\n * Start the search for answers with the parameters set in the state.\n * This method returns a promise.\n * @param {Object} options - the options for answers API call\n * @param {string[]} options.attributesForPrediction - Attributes to use for predictions. If empty, `searchableAttributes` is used instead.\n * @param {string[]} options.queryLanguages - The languages in the query. Currently only supports ['en'].\n * @param {number} options.nbHits - Maximum number of answers to retrieve from the Answers Engine. Cannot be greater than 1000.\n *\n * @return {promise} the answer results\n * @deprecated answers is deprecated and will be replaced with new initiatives\n */\nAlgoliaSearchHelper.prototype.findAnswers = function(options) {\n  console.warn('[algoliasearch-helper] answers is no longer supported');\n  var state = this.state;\n  var derivedHelper = this.derivedHelpers[0];\n  if (!derivedHelper) {\n    return Promise.resolve([]);\n  }\n  var derivedState = derivedHelper.getModifiedState(state);\n  var data = merge(\n    {\n      attributesForPrediction: options.attributesForPrediction,\n      nbHits: options.nbHits\n    },\n    {\n      params: omit(requestBuilder._getHitsSearchParams(derivedState), [\n        'attributesToSnippet',\n        'hitsPerPage',\n        'restrictSearchableAttributes',\n        'snippetEllipsisText' // FIXME remove this line once the engine is fixed.\n      ])\n    }\n  );\n\n  var errorMessage = 'search for answers was called, but this client does not have a function client.initIndex(index).findAnswers';\n  if (typeof this.client.initIndex !== 'function') {\n    throw new Error(errorMessage);\n  }\n  var index = this.client.initIndex(derivedState.index);\n  if (typeof index.findAnswers !== 'function') {\n    throw new Error(errorMessage);\n  }\n  return index.findAnswers(derivedState.query, options.queryLanguages, data);\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  var clientHasInitIndex = typeof this.client.initIndex === 'function';\n  if (\n    !clientHasSFFV &&\n    !clientHasInitIndex &&\n    typeof this.client.search !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n  var searchForFacetValuesPromise;\n  // newer algoliasearch ^3.27.1 - ~4.0.0\n  if (clientHasSFFV) {\n    searchForFacetValuesPromise = this.client.searchForFacetValues([\n      {indexName: state.index, params: algoliaQuery}\n    ]);\n    // algoliasearch < 3.27.1\n  } else if (clientHasInitIndex) {\n    searchForFacetValuesPromise = this.client\n      .initIndex(state.index)\n      .searchForFacetValues(algoliaQuery);\n    // algoliasearch ~5.0.0\n  } else {\n    // @MAJOR only use client.search\n    delete algoliaQuery.facetName;\n    searchForFacetValuesPromise = this.client\n      .search([\n        {\n          type: 'facet',\n          facet: facet,\n          indexName: state.index,\n          params: algoliaQuery\n        }\n      ])\n      .then(function processResponse(response) {\n        return response.results[0];\n      });\n  }\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query\n  });\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits.forEach(function(f) {\n      f.escapedValue = escapeFacetValue(f.value);\n      f.isRefined = isDisjunctive\n        ? state.isDisjunctiveFacetRefined(facet, f.escapedValue)\n        : state.isFacetRefined(facet, f.escapedValue);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    disjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function(operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function(options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error\n    });\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: formattedResponse,\n      state: state\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\n// it also preserve keys order\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n\n  return sources.reduceRight(function(acc, source) {\n    Object.keys(Object(source)).forEach(function(key) {\n      if (source[key] === undefined) {\n        return;\n      }\n      if (acc[key] !== undefined) {\n        // remove if already added, so that we can add it in correct order\n        delete acc[key];\n      }\n      acc[key] = source[key];\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\n/**\n * Replaces a leading - with \\-\n * @private\n * @param {any} value the facet value to replace\n * @returns any\n */\nfunction escapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return String(value).replace(/^-/, '\\\\-');\n}\n\n/**\n * Replaces a leading \\- with -\n * @private\n * @param {any} value the escaped facet value\n * @returns any\n */\nfunction unescapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return value.replace(/^\\\\-/, '-');\n}\n\nmodule.exports = {\n  escapeFacetValue: escapeFacetValue,\n  unescapeFacetValue: unescapeFacetValue\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function(sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(defaultInstructions, function(\n        defaultInstruction\n      ) {\n        return defaultInstruction[0] === sortInstruction[0];\n      });\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function(value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  for (var key in source) {\n    if (\n      !Object.prototype.hasOwnProperty.call(source, key) ||\n      key === '__proto__' ||\n      key === 'constructor'\n    ) {\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      continue;\n    }\n\n    if (\n      isObjectOrArrayOrFunction(targetVal) &&\n      isObjectOrArrayOrFunction(sourceVal)\n    ) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\n\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function(value, index) {\n    return {\n      criteria: iteratees.map(function(iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function(res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parsable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nfunction sortObject(obj) {\n  return Object.keys(obj)\n    .sort(function(a, b) {\n      return a.localeCompare(b);\n    })\n    .reduce(function(acc, curr) {\n      acc[curr] = obj[curr];\n      return acc;\n    }, {});\n}\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // More to get the parent levels of the hierarchical facets when refined\n    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n      // If we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get all parent values\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        // We generate a map of the filters we will use for our facet values queries\n        var filtersMap = currentRefinement[0].split(separator).slice(0, -1).reduce(\n          function createFiltersMap(map, segment, level) {\n            return map.concat({\n              attribute: hierarchicalFacet.attributes[level],\n              value: level === 0\n                ? segment\n                : [map[map.length - 1].value, segment].join(separator)\n            });\n          }\n        , []);\n\n        filtersMap.forEach(function(filter, level) {\n          var params = requestBuilder._getDisjunctiveFacetSearchParams(\n            state,\n            filter.attribute,\n            level === 0\n          );\n\n          // Keep facet filters unrelated to current hierarchical attributes\n          function hasHierarchicalFacetFilter(value) {\n            return hierarchicalFacet.attributes.some(function(attribute) {\n              return attribute === value.split(':')[0];\n            });\n          }\n\n          var filteredFacetFilters = (params.facetFilters || []).reduce(function(acc, facetFilter) {\n            if (Array.isArray(facetFilter)) {\n              var filtered = facetFilter.filter(function(filterValue) {\n                return !hasHierarchicalFacetFilter(filterValue);\n              });\n\n              if (filtered.length > 0) {\n                acc.push(filtered);\n              }\n            }\n\n            if (typeof facetFilter === 'string' && !hasHierarchicalFacetFilter(facetFilter)) {\n              acc.push(facetFilter);\n            }\n\n            return acc;\n          }, []);\n\n          var parent = filtersMap[level - 1];\n          if (level > 0) {\n            params.facetFilters = filteredFacetFilters.concat(parent.attribute + ':' + parent.value);\n          } else {\n            params.facetFilters = filteredFacetFilters.length > 0 ? filteredFacetFilters : undefined;\n          }\n\n          queries.push({indexName: index, params: params});\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets.indexOf('*') > -1 ? ['*'] : facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 0,\n      page: 0,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    if (tagFilters.length > 0) {\n      additionalParams.tagFilters = tagFilters;\n    }\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function(attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function(value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements).forEach(function(facetName) {\n      var facetValues = facetsRefinements[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes).forEach(function(facetName) {\n      var facetValues = facetsExcludes[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {\n      var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n      if (facetName === facet || !facetValues || facetValues.length === 0) {\n        return;\n      }\n      var orFilters = [];\n\n      facetValues.forEach(function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {\n      var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return sortObject(merge(\n      {},\n      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n      searchForFacetSearchParameters\n    ));\n  }\n};\n\nmodule.exports = requestBuilder;\n","'use strict';\n\nmodule.exports = function isValidUserToken(userToken) {\n  if (userToken === null) {\n    return false;\n  }\n  return /^[a-zA-Z0-9_-]{1,64}$/.test(userToken);\n};\n","'use strict';\n\nmodule.exports = '3.12.0';\n","/*! algoliasearch-lite.umd.js | 4.16.0 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||\"{}\")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=a()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function d(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var m={Read:1,Write:2,Any:3},p=1,v=2,y=3;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:m.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||m.Any}}var O=\"GET\",P=\"POST\";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(g(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===y&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function w(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,d=function t(r,a){var l=r.pop();if(void 0===l)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.\",transporterStackTrace:A(u)};var d={data:i,headers:s,method:c,url:S(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},m=function(e){var t={request:d,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=m(n);return n.isTimedOut&&h++,Promise.all([e.logger.info(\"Retryable failure\",x(o)),e.hostsCache.set(l,g(l,n.isTimedOut?y:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw m(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function j(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function S(e,t,r){var n=T(r),o=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(o+=\"?\".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var N=function(e){var t=e.appId,n=function(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=d(t,f.timeouts.read),n=function(){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Write)})),e,d(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:m.Read},{url:\"\".concat(t,\".algolia.net\"),accept:m.Write}].concat(c([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},C=function(e){return function(t,r){return t.method===O?e.transporter.read(t,r):e.transporter.write(t,r)}},k=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},J=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:\"1/indexes/*/queries\",data:{requests:o},cacheable:!0},n)}},E=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,[\"facetName\",\"facetQuery\"]);return k(e)(t.indexName,{methods:{searchForFacetValues:R}}).searchForFacetValues(u,i,r(r({},o),s))})))}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/answers/%s/prediction\",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},F=function(e){return function(t,r){return e.transporter.read({method:P,path:f(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},R=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},D=1,W=2,H=3;function Q(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=H,{debug:function(e,t){return D>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return W>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.16.0\",\"-\").concat(e)}),s()]}),userAgent:j(\"4.16.0\").add({segment:\"Browser\",version:\"lite\"}),authMode:h.WithinQueryParameters};return N(r(r(r({},a),n),{},{methods:{search:J,searchForFacetValues:E,multipleQueries:J,multipleSearchForFacetValues:E,customRequest:C,initIndex:function(e){return function(t){return k(e)(t,{methods:{search:F,searchForFacetValues:R,findAnswers:I}})}}}}))}return Q.version=\"4.16.0\",Q}));\n","/**\n * Throws an error if the condition is not met.\n *\n * The error is exhaustive in development, and becomes generic in production.\n *\n * This is used to make development a better experience to provide guidance as\n * to where the error comes from.\n */\nexport function invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n  if (!(process.env.NODE_ENV === 'development')) {\n    throw new Error('Invariant failed');\n  }\n  if (process.env.NODE_ENV === 'development') {\n    throw new Error(\"[InstantSearch] \".concat(typeof message === 'function' ? message() : message));\n  }\n}","import { createContext } from 'react';\nexport var InstantSearchContext = /*#__PURE__*/createContext(null);\nif (process.env.NODE_ENV === 'development') {\n  InstantSearchContext.displayName = 'InstantSearch';\n}","import { useContext } from 'react';\nimport { invariant } from \"./invariant.js\";\nimport { InstantSearchContext } from \"./InstantSearchContext.js\";\nexport function useInstantSearchContext() {\n  var search = useContext(InstantSearchContext);\n  invariant(search !== null, 'Hooks must be used inside the <InstantSearch> component.\\n\\n' + 'They are not compatible with the `react-instantsearch-core` and `react-instantsearch-dom` packages, so make sure to use the <InstantSearch> component from `react-instantsearch-hooks`.');\n  return search;\n}","import { useEffect, useLayoutEffect } from 'react';\n\n/**\n * `useLayoutEffect` that doesn't show a warning when server-side rendering.\n *\n * It uses `useEffect` on the server (no-op), and `useLayoutEffect` on the browser.\n */\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;","import algoliasearchHelper from 'algoliasearch-helper';\nexport function createSearchResults(state) {\n  var _state$query, _state$page, _state$hitsPerPage;\n  return new algoliasearchHelper.SearchResults(state, [{\n    query: (_state$query = state.query) !== null && _state$query !== void 0 ? _state$query : '',\n    page: (_state$page = state.page) !== null && _state$page !== void 0 ? _state$page : 0,\n    hitsPerPage: (_state$hitsPerPage = state.hitsPerPage) !== null && _state$hitsPerPage !== void 0 ? _state$hitsPerPage : 20,\n    hits: [],\n    nbHits: 0,\n    nbPages: 0,\n    params: '',\n    exhaustiveNbHits: true,\n    exhaustiveFacetsCount: true,\n    processingTimeMS: 0,\n    index: state.index\n  }], {\n    /** used by connectors to prevent persisting these results */\n    __isArtificial: true\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { createSearchResults } from \"./createSearchResults.js\";\nexport function getIndexSearchResults(indexWidget) {\n  var helper = indexWidget.getHelper();\n  var results =\n  // On SSR, we get the results injected on the Index.\n  indexWidget.getResults() ||\n  // On the browser, we create fallback results based on the helper state.\n  createSearchResults(helper.state);\n  var scopedResults = indexWidget.getScopedResults().map(function (scopedResult) {\n    var fallbackResults = scopedResult.indexId === indexWidget.getIndexId() ? results : createSearchResults(scopedResult.helper.state);\n    return _objectSpread(_objectSpread({}, scopedResult), {}, {\n      // We keep `results` from being `null`.\n      results: scopedResult.results || fallbackResults\n    });\n  });\n  return {\n    results: results,\n    scopedResults: scopedResults\n  };\n}","import { createContext } from 'react';\nexport var IndexContext = /*#__PURE__*/createContext(null);\nif (process.env.NODE_ENV === 'development') {\n  IndexContext.displayName = 'Index';\n}","import { useContext } from 'react';\nimport { invariant } from \"./invariant.js\";\nimport { IndexContext } from \"./IndexContext.js\";\nexport function useIndexContext() {\n  var context = useContext(IndexContext);\n  invariant(context !== null, 'The <Index> component must be used within <InstantSearch>.');\n  return context;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport { useEffect, useState } from 'react';\nimport { getIndexSearchResults } from \"./getIndexSearchResults.js\";\nimport { useIndexContext } from \"./useIndexContext.js\";\nimport { useInstantSearchContext } from \"./useInstantSearchContext.js\";\nexport function useSearchResults() {\n  var search = useInstantSearchContext();\n  var searchIndex = useIndexContext();\n  var _useState = useState(function () {\n      return getIndexSearchResults(searchIndex);\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchResults = _useState2[0],\n    setSearchResults = _useState2[1];\n  useEffect(function () {\n    function handleRender() {\n      var results = searchIndex.getResults();\n\n      // Results can be `null` when the first search is stalled.\n      // In this case, we skip the update.\n      // See: https://github.com/algolia/instantsearch.js/blob/20996c7a159988c58e00ff24d2d2dc98af8b980f/src/widgets/index/index.ts#L652-L657\n      if (results !== null) {\n        setSearchResults({\n          results: results,\n          scopedResults: searchIndex.getScopedResults()\n        });\n      }\n    }\n    search.addListener('render', handleRender);\n    return function () {\n      search.removeListener('render', handleRender);\n    };\n  }, [search, searchIndex]);\n  return searchResults;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport { useCallback, useEffect, useState } from 'react';\nimport { useIndexContext } from \"./useIndexContext.js\";\nimport { useInstantSearchContext } from \"./useInstantSearchContext.js\";\nexport function useSearchState() {\n  var search = useInstantSearchContext();\n  var searchIndex = useIndexContext();\n  var indexId = searchIndex.getIndexId();\n  var _useState = useState(function () {\n      return search.getUiState();\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    uiState = _useState2[0],\n    setLocalUiState = _useState2[1];\n  var indexUiState = uiState[indexId];\n  var setUiState = useCallback(function (nextUiState) {\n    search.setUiState(nextUiState);\n  }, [search]);\n  var setIndexUiState = useCallback(function (nextIndexUiState) {\n    searchIndex.setIndexUiState(nextIndexUiState);\n  }, [searchIndex]);\n  useEffect(function () {\n    function handleRender() {\n      setLocalUiState(search.getUiState());\n    }\n    search.addListener('render', handleRender);\n    return function () {\n      search.removeListener('render', handleRender);\n    };\n  }, [search]);\n  return {\n    uiState: uiState,\n    setUiState: setUiState,\n    indexUiState: indexUiState,\n    setIndexUiState: setIndexUiState\n  };\n}","import { useCallback } from 'react';\nimport { useInstantSearchContext } from \"../lib/useInstantSearchContext.js\";\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect.js\";\nimport { useSearchResults } from \"../lib/useSearchResults.js\";\nimport { useSearchState } from \"../lib/useSearchState.js\";\nexport function useInstantSearch() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    catchError = _ref.catchError;\n  var search = useInstantSearchContext();\n  var _useSearchState = useSearchState(),\n    uiState = _useSearchState.uiState,\n    setUiState = _useSearchState.setUiState,\n    indexUiState = _useSearchState.indexUiState,\n    setIndexUiState = _useSearchState.setIndexUiState;\n  var _useSearchResults = useSearchResults(),\n    results = _useSearchResults.results,\n    scopedResults = _useSearchResults.scopedResults;\n  var use = useCallback(function () {\n    for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n      middlewares[_key] = arguments[_key];\n    }\n    search.use.apply(search, middlewares);\n    return function () {\n      search.unuse.apply(search, middlewares);\n    };\n  }, [search]);\n  var refresh = useCallback(function () {\n    search.refresh();\n  }, [search]);\n  useIsomorphicLayoutEffect(function () {\n    if (catchError) {\n      var onError = function onError() {};\n      search.addListener('error', onError);\n      return function () {\n        return search.removeListener('error', onError);\n      };\n    }\n    return function () {};\n  }, [search, catchError]);\n  return {\n    results: results,\n    scopedResults: scopedResults,\n    uiState: uiState,\n    setUiState: setUiState,\n    indexUiState: indexUiState,\n    setIndexUiState: setIndexUiState,\n    use: use,\n    refresh: refresh,\n    status: search.status,\n    error: search.error\n  };\n}","export function createDocumentationLink(_ref) {\n  var name = _ref.name,\n    _ref$connector = _ref.connector,\n    connector = _ref$connector === void 0 ? false : _ref$connector;\n  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');\n}\nexport function createDocumentationMessageGenerator() {\n  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {\n    widgets[_key] = arguments[_key];\n  }\n  var links = widgets.map(function (widget) {\n    return createDocumentationLink(widget);\n  }).join(', ');\n  return function (message) {\n    return [message, \"See documentation: \".concat(links)].filter(Boolean).join('\\n\\n');\n  };\n}","export function noop() {}","import { getObjectType } from \"./getObjectType.js\";\nexport function checkRendering(rendering, usage) {\n  if (rendering === undefined || typeof rendering !== 'function') {\n    throw new Error(\"The render function is not valid (received type \".concat(getObjectType(rendering), \").\\n\\n\").concat(usage));\n  }\n}","export function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { checkRendering, createDocumentationMessageGenerator, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'stats',\n  connector: true\n});\n\n/**\n * **Stats** connector provides the logic to build a custom widget that will displays\n * search statistics (hits number and processing time).\n */\n\nvar connectStats = function connectStats(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    return {\n      $$type: 'ais.stats',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose() {\n        unmountFn();\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          stats: this.getWidgetRenderState(renderOptions)\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref) {\n        var results = _ref.results,\n          state = _ref.state;\n        if (!results) {\n          return {\n            hitsPerPage: state.hitsPerPage,\n            nbHits: 0,\n            nbSortedHits: undefined,\n            areHitsSorted: false,\n            nbPages: 0,\n            page: state.page || 0,\n            processingTimeMS: -1,\n            query: state.query || '',\n            widgetParams: widgetParams\n          };\n        }\n        return {\n          hitsPerPage: results.hitsPerPage,\n          nbHits: results.nbHits,\n          nbSortedHits: results.nbSortedHits,\n          areHitsSorted: typeof results.appliedRelevancyStrictness !== 'undefined' && results.appliedRelevancyStrictness > 0 && results.nbSortedHits !== results.nbHits,\n          nbPages: results.nbPages,\n          page: results.page,\n          processingTimeMS: results.processingTimeMS,\n          query: results.query,\n          widgetParams: widgetParams\n        };\n      }\n    };\n  };\n};\nexport default connectStats;","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/* eslint-disable complexity */\n\n/*\n * Code taken from dequal/lite v2.0.0\n * https://github.com/lukeed/dequal/blob/9aa73181ac7e081cd330cac67d313632ac04bb02/src/lite.js\n *\n * It adds a 3rd argument `compare(a, b)` that lets execute custom logic to\n * compare values.\n * We use it to skip comparing function references.\n */\n\nvar has = Object.prototype.hasOwnProperty;\nexport function dequal(foo, bar, compare) {\n  // start of custom implementation\n  if (compare !== null && compare !== void 0 && compare(foo, bar)) {\n    return true;\n  }\n  // end of custom implementation\n\n  var ctor;\n  var len;\n  if (foo === bar) return true;\n  if (foo && bar && (ctor = foo.constructor) === bar.constructor) {\n    if (ctor === Date) return foo.getTime() === bar.getTime();\n    if (ctor === RegExp) return foo.toString() === bar.toString();\n    if (ctor === Array) {\n      if ((len = foo.length) === bar.length) {\n        while (len-- && dequal(foo[len], bar[len], compare));\n      }\n      return len === -1;\n    }\n    if (!ctor || _typeof(foo) === 'object') {\n      len = 0;\n      // eslint-disable-next-line guard-for-in, no-restricted-syntax\n      for (ctor in foo) {\n        if (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n        if (!(ctor in bar) || !dequal(foo[ctor], bar[ctor], compare)) return false;\n      }\n      return Object.keys(bar).length === len;\n    }\n  }\n\n  // eslint-disable-next-line no-self-compare\n  return foo !== foo && bar !== bar;\n}","import { createContext } from 'react';\nexport var InstantSearchServerContext = /*#__PURE__*/createContext(null);\nif (process.env.NODE_ENV === 'development') {\n  InstantSearchServerContext.displayName = 'InstantSearchServer';\n}","import { useContext } from 'react';\nimport { InstantSearchServerContext } from \"../components/InstantSearchServerContext.js\";\nexport function useInstantSearchServerContext() {\n  return useContext(InstantSearchServerContext);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport { useState } from 'react';\nimport { dequal } from \"./dequal.js\";\nexport function useStableValue(value) {\n  var _useState = useState(function () {\n      return value;\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    stableValue = _useState2[0],\n    setStableValue = _useState2[1];\n  if (!dequal(stableValue, value)) {\n    setStableValue(value);\n  }\n  return stableValue;\n}","import { useEffect, useRef } from 'react';\nimport { dequal } from \"./dequal.js\";\nimport { useInstantSearchContext } from \"./useInstantSearchContext.js\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect.js\";\nexport function useWidget(_ref) {\n  var widget = _ref.widget,\n    parentIndex = _ref.parentIndex,\n    props = _ref.props,\n    shouldSsr = _ref.shouldSsr;\n  var prevPropsRef = useRef(props);\n  useEffect(function () {\n    prevPropsRef.current = props;\n  }, [props]);\n  var prevWidgetRef = useRef(widget);\n  useEffect(function () {\n    prevWidgetRef.current = widget;\n  }, [widget]);\n  var cleanupTimerRef = useRef(null);\n  var shouldAddWidgetEarly = shouldSsr && !parentIndex.getWidgets().includes(widget);\n  var search = useInstantSearchContext();\n\n  // This effect is responsible for adding, removing, and updating the widget.\n  // We need to support scenarios where the widget is remounted quickly, like in\n  // Strict Mode, so that we don't lose its state, and therefore that we don't\n  // break routing.\n  useIsomorphicLayoutEffect(function () {\n    var previousWidget = prevWidgetRef.current;\n    function cleanup() {\n      if (search._preventWidgetCleanup) return;\n      parentIndex.removeWidgets([previousWidget]);\n    }\n\n    // Scenario 1: the widget is added for the first time.\n    if (cleanupTimerRef.current === null) {\n      if (!shouldAddWidgetEarly) {\n        parentIndex.addWidgets([widget]);\n      }\n    }\n    // Scenario 2: the widget is rerendered or updated.\n    else {\n      // We cancel the original effect cleanup because it may not be necessary if\n      // props haven't changed. (We manually call it if it is below.)\n      clearTimeout(cleanupTimerRef.current);\n\n      // Warning: if an unstable function prop is provided, `dequal` is not able\n      // to keep its reference and therefore will consider that props did change.\n      // This could unsollicitely remove/add the widget, therefore forget its state,\n      // and could be a source of confusion.\n      // If users face this issue, we should advise them to provide stable function\n      // references.\n      var arePropsEqual = dequal(props, prevPropsRef.current);\n\n      // If props did change, then we execute the cleanup function instantly\n      // and then add the widget back. This lets us add the widget without\n      // waiting for the scheduled cleanup function to finish (that we canceled\n      // above).\n      if (!arePropsEqual) {\n        cleanup();\n        parentIndex.addWidgets([widget]);\n      }\n    }\n    return function () {\n      // We don't remove the widget right away, but rather schedule it so that\n      // we're able to cancel it in the next effect.\n      cleanupTimerRef.current = setTimeout(cleanup);\n    };\n  }, [parentIndex, widget, shouldAddWidgetEarly, search, props]);\n  if (shouldAddWidgetEarly) {\n    parentIndex.addWidgets([widget]);\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"instantSearchInstance\", \"widgetParams\"],\n  _excluded2 = [\"widgetParams\"];\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport { useMemo, useRef, useState } from 'react';\nimport { dequal } from \"../lib/dequal.js\";\nimport { getIndexSearchResults } from \"../lib/getIndexSearchResults.js\";\nimport { useIndexContext } from \"../lib/useIndexContext.js\";\nimport { useInstantSearchContext } from \"../lib/useInstantSearchContext.js\";\nimport { useInstantSearchServerContext } from \"../lib/useInstantSearchServerContext.js\";\nimport { useStableValue } from \"../lib/useStableValue.js\";\nimport { useWidget } from \"../lib/useWidget.js\";\nexport function useConnector(connector) {\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var additionalWidgetProperties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var serverContext = useInstantSearchServerContext();\n  var search = useInstantSearchContext();\n  var parentIndex = useIndexContext();\n  var stableProps = useStableValue(props);\n  var stableAdditionalWidgetProperties = useStableValue(additionalWidgetProperties);\n  var shouldSetStateRef = useRef(true);\n  var previousRenderStateRef = useRef(null);\n  var widget = useMemo(function () {\n    var createWidget = connector(function (connectorState, isFirstRender) {\n      // We skip the `init` widget render because:\n      // - We rely on `getWidgetRenderState` to compute the initial state before\n      //   the InstantSearch.js lifecycle starts.\n      // - It prevents UI flashes when updating the widget props.\n      if (isFirstRender) {\n        shouldSetStateRef.current = true;\n        return;\n      }\n\n      // There are situations where InstantSearch.js may render widgets slightly\n      // after they're removed by React, and thus try to update the React state\n      // on unmounted components. React 16 and 17 consider them as memory leaks\n      // and display a warning.\n      // This happens in <DynamicWidgets> when `attributesToRender` contains a\n      // value without an attribute previously mounted. React will unmount the\n      // component controlled by that attribute, but InstantSearch.js will stay\n      // unaware of this change until the render pass finishes, and therefore\n      // notifies of a state change.\n      // This ref lets us track this situation and ignore these state updates.\n      if (shouldSetStateRef.current) {\n        var instantSearchInstance = connectorState.instantSearchInstance,\n          widgetParams = connectorState.widgetParams,\n          renderState = _objectWithoutProperties(connectorState, _excluded);\n\n        // We only update the state when a widget render state param changes,\n        // except for functions. We ignore function reference changes to avoid\n        // infinite loops. It's safe to omit them because they get updated\n        // every time another render param changes.\n        if (!dequal(renderState, previousRenderStateRef.current, function (a, b) {\n          return (a === null || a === void 0 ? void 0 : a.constructor) === Function && (b === null || b === void 0 ? void 0 : b.constructor) === Function;\n        })) {\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\n          setState(renderState);\n          previousRenderStateRef.current = renderState;\n        }\n      }\n    }, function () {\n      // We'll ignore the next state update until we know for sure that\n      // InstantSearch.js re-inits the component.\n      shouldSetStateRef.current = false;\n    });\n    return _objectSpread(_objectSpread({}, createWidget(stableProps)), stableAdditionalWidgetProperties);\n  }, [connector, stableProps, stableAdditionalWidgetProperties]);\n  var _useState = useState(function () {\n      if (widget.getWidgetRenderState) {\n        var _widget$getWidgetSear;\n        // The helper exists because we've started InstantSearch.\n        var helper = parentIndex.getHelper();\n        var uiState = parentIndex.getWidgetUiState({})[parentIndex.getIndexId()];\n        helper.state = ((_widget$getWidgetSear = widget.getWidgetSearchParameters) === null || _widget$getWidgetSear === void 0 ? void 0 : _widget$getWidgetSear.call(widget, helper.state, {\n          uiState: uiState\n        })) || helper.state;\n        var _getIndexSearchResult = getIndexSearchResults(parentIndex),\n          results = _getIndexSearchResult.results,\n          scopedResults = _getIndexSearchResult.scopedResults;\n\n        // We get the widget render state by providing the same parameters as\n        // InstantSearch provides to the widget's `render` method.\n        // See https://github.com/algolia/instantsearch.js/blob/019cd18d0de6dd320284aa4890541b7fe2198c65/src/widgets/index/index.ts#L604-L617\n        var _widget$getWidgetRend = widget.getWidgetRenderState({\n            helper: helper,\n            parent: parentIndex,\n            instantSearchInstance: search,\n            results: results,\n            scopedResults: scopedResults,\n            state: helper.state,\n            renderState: search.renderState,\n            templatesConfig: search.templatesConfig,\n            createURL: parentIndex.createURL,\n            searchMetadata: {\n              isSearchStalled: search.status === 'stalled'\n            },\n            status: search.status,\n            error: search.error\n          }),\n          widgetParams = _widget$getWidgetRend.widgetParams,\n          renderState = _objectWithoutProperties(_widget$getWidgetRend, _excluded2);\n        return renderState;\n      }\n      return {};\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    state = _useState2[0],\n    setState = _useState2[1];\n  useWidget({\n    widget: widget,\n    parentIndex: parentIndex,\n    props: stableProps,\n    shouldSsr: Boolean(serverContext)\n  });\n  return state;\n}","export function createInitArgs(instantSearchInstance, parent, uiState) {\n  var helper = parent.getHelper();\n  return {\n    uiState: uiState,\n    helper: helper,\n    parent: parent,\n    instantSearchInstance: instantSearchInstance,\n    state: helper.state,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    createURL: parent.createURL,\n    scopedResults: [],\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance.status === 'stalled'\n    },\n    status: instantSearchInstance.status,\n    error: instantSearchInstance.error\n  };\n}\nexport function createRenderArgs(instantSearchInstance, parent) {\n  var results = parent.getResults();\n  return {\n    helper: parent.getHelper(),\n    parent: parent,\n    instantSearchInstance: instantSearchInstance,\n    results: results,\n    scopedResults: parent.getScopedResults(),\n    state: results._state,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    createURL: parent.createURL,\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance.status === 'stalled'\n    },\n    status: instantSearchInstance.status,\n    error: instantSearchInstance.error\n  };\n}","// eslint-disable-next-line no-restricted-globals\n\n/**\n * Runs code on browser environments safely.\n */\nexport function safelyRunOnBrowser(callback) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      fallback: function fallback() {\n        return undefined;\n      }\n    },\n    fallback = _ref.fallback;\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof window === 'undefined') {\n    return fallback();\n  }\n\n  // eslint-disable-next-line no-restricted-globals\n  return callback({\n    window: window\n  });\n}","import { createInitArgs, safelyRunOnBrowser } from \"../lib/utils/index.js\";\nfunction extractPayload(widgets, instantSearchInstance, payload) {\n  var initOptions = createInitArgs(instantSearchInstance, instantSearchInstance.mainIndex, instantSearchInstance._initialUiState);\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n      if (renderState && renderState.widgetParams) {\n        // casting, as we just earlier checked widgetParams exists, and thus an object\n        widgetParams = renderState.widgetParams;\n      }\n    }\n\n    // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n    if (widget.$$type === 'ais.index') {\n      extractPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\nexport function isMetadataEnabled() {\n  return safelyRunOnBrowser(function (_ref) {\n    var _window$navigator, _window$navigator$use;\n    var window = _ref.window;\n    return ((_window$navigator = window.navigator) === null || _window$navigator === void 0 ? void 0 : (_window$navigator$use = _window$navigator.userAgent) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.indexOf('Algolia Crawler')) > -1;\n  }, {\n    fallback: function fallback() {\n      return false;\n    }\n  });\n}\n\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\nexport function createMetadataMiddleware() {\n  return function (_ref2) {\n    var instantSearchInstance = _ref2.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      started: function started() {},\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport qs from 'qs';\nimport { safelyRunOnBrowser } from \"../utils/index.js\";\nvar setWindowTitle = function setWindowTitle(title) {\n  if (title) {\n    // This function is only executed on browsers so we can disable this check.\n    // eslint-disable-next-line no-restricted-globals\n    window.document.title = title;\n  }\n};\nvar BrowserHistory = /*#__PURE__*/function () {\n  /**\n   * Initializes a new storage provider that syncs the search state to the URL\n   * using web APIs (`window.location.pushState` and `onpopstate` event).\n   */\n  function BrowserHistory(_ref) {\n    var _this = this;\n    var windowTitle = _ref.windowTitle,\n      _ref$writeDelay = _ref.writeDelay,\n      writeDelay = _ref$writeDelay === void 0 ? 400 : _ref$writeDelay,\n      createURL = _ref.createURL,\n      parseURL = _ref.parseURL,\n      getLocation = _ref.getLocation,\n      start = _ref.start,\n      dispose = _ref.dispose,\n      push = _ref.push;\n    _classCallCheck(this, BrowserHistory);\n    _defineProperty(this, \"windowTitle\", void 0);\n    _defineProperty(this, \"writeDelay\", void 0);\n    _defineProperty(this, \"_createURL\", void 0);\n    _defineProperty(this, \"parseURL\", void 0);\n    _defineProperty(this, \"getLocation\", void 0);\n    _defineProperty(this, \"writeTimer\", void 0);\n    _defineProperty(this, \"inPopState\", false);\n    _defineProperty(this, \"isDisposed\", false);\n    _defineProperty(this, \"latestAcknowledgedHistory\", 0);\n    _defineProperty(this, \"_start\", void 0);\n    _defineProperty(this, \"_dispose\", void 0);\n    _defineProperty(this, \"_push\", void 0);\n    this.windowTitle = windowTitle;\n    this.writeTimer = undefined;\n    this.writeDelay = writeDelay;\n    this._createURL = createURL;\n    this.parseURL = parseURL;\n    this.getLocation = getLocation;\n    this._start = start;\n    this._dispose = dispose;\n    this._push = push;\n    safelyRunOnBrowser(function (_ref2) {\n      var window = _ref2.window;\n      var title = _this.windowTitle && _this.windowTitle(_this.read());\n      setWindowTitle(title);\n      _this.latestAcknowledgedHistory = window.history.length;\n    });\n  }\n\n  /**\n   * Reads the URL and returns a syncable UI search state.\n   */\n  _createClass(BrowserHistory, [{\n    key: \"read\",\n    value: function read() {\n      return this.parseURL({\n        qsModule: qs,\n        location: this.getLocation()\n      });\n    }\n\n    /**\n     * Pushes a search state into the URL.\n     */\n  }, {\n    key: \"write\",\n    value: function write(routeState) {\n      var _this2 = this;\n      safelyRunOnBrowser(function (_ref3) {\n        var window = _ref3.window;\n        var url = _this2.createURL(routeState);\n        var title = _this2.windowTitle && _this2.windowTitle(routeState);\n        if (_this2.writeTimer) {\n          clearTimeout(_this2.writeTimer);\n        }\n        _this2.writeTimer = setTimeout(function () {\n          setWindowTitle(title);\n          if (_this2.shouldWrite(url)) {\n            if (_this2._push) {\n              _this2._push(url);\n            } else {\n              window.history.pushState(routeState, title || '', url);\n            }\n            _this2.latestAcknowledgedHistory = window.history.length;\n          }\n          _this2.inPopState = false;\n          _this2.writeTimer = undefined;\n        }, _this2.writeDelay);\n      });\n    }\n\n    /**\n     * Sets a callback on the `onpopstate` event of the history API of the current page.\n     * It enables the URL sync to keep track of the changes.\n     */\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(callback) {\n      var _this3 = this;\n      if (this._start) {\n        this._start(function () {\n          callback(_this3.read());\n        });\n      }\n      this._onPopState = function () {\n        if (_this3.writeTimer) {\n          clearTimeout(_this3.writeTimer);\n          _this3.writeTimer = undefined;\n        }\n        _this3.inPopState = true;\n\n        // We always read the state from the URL because the state of the history\n        // can be incorect in some cases (e.g. using React Router).\n        callback(_this3.read());\n      };\n      safelyRunOnBrowser(function (_ref4) {\n        var window = _ref4.window;\n        window.addEventListener('popstate', _this3._onPopState);\n      });\n    }\n\n    /**\n     * Creates a complete URL from a given syncable UI state.\n     *\n     * It always generates the full URL, not a relative one.\n     * This allows to handle cases like using a <base href>.\n     * See: https://github.com/algolia/instantsearch.js/issues/790\n     */\n  }, {\n    key: \"createURL\",\n    value: function createURL(routeState) {\n      return this._createURL({\n        qsModule: qs,\n        routeState: routeState,\n        location: this.getLocation()\n      });\n    }\n\n    /**\n     * Removes the event listener and cleans up the URL.\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this4 = this;\n      if (this._dispose) {\n        this._dispose();\n      }\n      this.isDisposed = true;\n      safelyRunOnBrowser(function (_ref5) {\n        var window = _ref5.window;\n        if (_this4._onPopState) {\n          window.removeEventListener('popstate', _this4._onPopState);\n        }\n      });\n      if (this.writeTimer) {\n        clearTimeout(this.writeTimer);\n      }\n      this.write({});\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.isDisposed = false;\n    }\n  }, {\n    key: \"shouldWrite\",\n    value: function shouldWrite(url) {\n      var _this5 = this;\n      return safelyRunOnBrowser(function (_ref6) {\n        var window = _ref6.window;\n        // We do want to `pushState` if:\n        // - the router is not disposed, IS.js needs to update the URL\n        // OR\n        // - the last write was from InstantSearch.js\n        // (unlike a SPA, where it would have last written)\n        var lastPushWasByISAfterDispose = !(_this5.isDisposed && _this5.latestAcknowledgedHistory !== window.history.length);\n        return (\n          // When the last state change was through popstate, the IS.js state changes,\n          // but that should not write the URL.\n          !_this5.inPopState &&\n          // When the previous pushState after dispose was by IS.js, we want to write the URL.\n          lastPushWasByISAfterDispose &&\n          // When the URL is the same as the current one, we do not want to write it.\n          url !== window.location.href\n        );\n      });\n    }\n  }]);\n  return BrowserHistory;\n}();\nexport default function historyRouter() {\n  var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref7$createURL = _ref7.createURL,\n    createURL = _ref7$createURL === void 0 ? function (_ref8) {\n      var qsModule = _ref8.qsModule,\n        routeState = _ref8.routeState,\n        location = _ref8.location;\n      var protocol = location.protocol,\n        hostname = location.hostname,\n        _location$port = location.port,\n        port = _location$port === void 0 ? '' : _location$port,\n        pathname = location.pathname,\n        hash = location.hash;\n      var queryString = qsModule.stringify(routeState);\n      var portWithPrefix = port === '' ? '' : \":\".concat(port);\n\n      // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n      if (!queryString) {\n        return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);\n      }\n      return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname, \"?\").concat(queryString).concat(hash);\n    } : _ref7$createURL,\n    _ref7$parseURL = _ref7.parseURL,\n    parseURL = _ref7$parseURL === void 0 ? function (_ref9) {\n      var qsModule = _ref9.qsModule,\n        location = _ref9.location;\n      // `qs` by default converts arrays with more than 20 items to an object.\n      // We want to avoid this because the data structure manipulated can therefore vary.\n      // Setting the limit to `100` seems a good number because the engine's default is 100\n      // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).\n      //\n      // Using an `arrayLimit` of `n` allows `n + 1` items.\n      //\n      // See:\n      //   - https://github.com/ljharb/qs#parsing-arrays\n      //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/\n      return qsModule.parse(location.search.slice(1), {\n        arrayLimit: 99\n      });\n    } : _ref7$parseURL,\n    _ref7$writeDelay = _ref7.writeDelay,\n    writeDelay = _ref7$writeDelay === void 0 ? 400 : _ref7$writeDelay,\n    windowTitle = _ref7.windowTitle,\n    _ref7$getLocation = _ref7.getLocation,\n    getLocation = _ref7$getLocation === void 0 ? function () {\n      return safelyRunOnBrowser(function (_ref10) {\n        var window = _ref10.window;\n        return window.location;\n      }, {\n        fallback: function fallback() {\n          throw new Error('You need to provide `getLocation` to the `history` router in environments where `window` does not exist.');\n        }\n      });\n    } : _ref7$getLocation,\n    start = _ref7.start,\n    dispose = _ref7.dispose,\n    push = _ref7.push;\n  return new BrowserHistory({\n    createURL: createURL,\n    parseURL: parseURL,\n    writeDelay: writeDelay,\n    windowTitle: windowTitle,\n    getLocation: getLocation,\n    start: start,\n    dispose: dispose,\n    push: push\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"configure\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction getIndexStateWithoutConfigure(uiState) {\n  var configure = uiState.configure,\n    trackedUiState = _objectWithoutProperties(uiState, _excluded);\n  return trackedUiState;\n}\n\n// technically a URL could contain any key, since users provide it,\n// which is why the input to this function is UiState, not something\n// which excludes \"configure\" as this function does.\nexport default function simpleStateMapping() {\n  return {\n    stateToRoute: function stateToRoute(uiState) {\n      return Object.keys(uiState).reduce(function (state, indexId) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(uiState[indexId])));\n      }, {});\n    },\n    routeToState: function routeToState() {\n      var routeState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Object.keys(routeState).reduce(function (state, indexId) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, getIndexStateWithoutConfigure(routeState[indexId])));\n      }, {});\n    }\n  };\n}","function isPrimitive(obj) {\n  return obj !== Object(obj);\n}\nexport function isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {\n    return first === second;\n  }\n  if (Object.keys(first).length !== Object.keys(second).length) {\n    return false;\n  }\n\n  // @TODO avoid for..of because of the large polyfill\n  // eslint-disable-next-line no-restricted-syntax\n  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n    if (!(key in second)) {\n      return false;\n    }\n    if (!isEqual(first[key], second[key])) {\n      return false;\n    }\n  }\n  return true;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport historyRouter from \"../lib/routers/history.js\";\nimport simpleStateMapping from \"../lib/stateMappings/simple.js\";\nimport { isEqual } from \"../lib/utils/index.js\";\nexport var createRouterMiddleware = function createRouterMiddleware() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _props$router = props.router,\n    router = _props$router === void 0 ? historyRouter() : _props$router,\n    _props$stateMapping = props.stateMapping,\n    stateMapping = _props$stateMapping === void 0 ? simpleStateMapping() : _props$stateMapping;\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n    function topLevelCreateURL(nextState) {\n      var uiState = Object.keys(nextState).reduce(function (acc, indexId) {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, indexId, nextState[indexId]));\n      }, instantSearchInstance.mainIndex.getWidgetUiState({}));\n      var route = stateMapping.stateToRoute(uiState);\n      return router.createURL(route);\n    }\n\n    // casting to UiState here to keep createURL unaware of custom UiState\n    // (as long as it's an object, it's ok)\n    instantSearchInstance._createURL = topLevelCreateURL;\n    var lastRouteState = undefined;\n    var initialUiState = instantSearchInstance._initialUiState;\n    return {\n      onStateChange: function onStateChange(_ref2) {\n        var uiState = _ref2.uiState;\n        var routeState = stateMapping.stateToRoute(uiState);\n        if (lastRouteState === undefined || !isEqual(lastRouteState, routeState)) {\n          router.write(routeState);\n          lastRouteState = routeState;\n        }\n      },\n      subscribe: function subscribe() {\n        instantSearchInstance._initialUiState = _objectSpread(_objectSpread({}, initialUiState), stateMapping.routeToState(router.read()));\n        router.onUpdate(function (route) {\n          instantSearchInstance.setUiState(stateMapping.routeToState(route));\n        });\n      },\n      started: function started() {\n        var _router$start;\n        (_router$start = router.start) === null || _router$start === void 0 ? void 0 : _router$start.call(router);\n      },\n      unsubscribe: function unsubscribe() {\n        router.dispose();\n      }\n    };\n  };\n};","export function isIndexWidget(widget) {\n  return widget.$$type === 'ais.index';\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"facets\", \"disjunctiveFacets\", \"facetsRefinements\", \"facetsExcludes\", \"disjunctiveFacetsRefinements\", \"numericRefinements\", \"tagRefinements\", \"hierarchicalFacets\", \"hierarchicalFacetsRefinements\", \"ruleContexts\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport { findIndex } from \"./findIndex.js\";\nimport { uniq } from \"./uniq.js\";\nvar mergeWithRest = function mergeWithRest(left, right) {\n  var facets = right.facets,\n    disjunctiveFacets = right.disjunctiveFacets,\n    facetsRefinements = right.facetsRefinements,\n    facetsExcludes = right.facetsExcludes,\n    disjunctiveFacetsRefinements = right.disjunctiveFacetsRefinements,\n    numericRefinements = right.numericRefinements,\n    tagRefinements = right.tagRefinements,\n    hierarchicalFacets = right.hierarchicalFacets,\n    hierarchicalFacetsRefinements = right.hierarchicalFacetsRefinements,\n    ruleContexts = right.ruleContexts,\n    rest = _objectWithoutProperties(right, _excluded);\n  return left.setQueryParameters(rest);\n};\n\n// Merge facets\nvar mergeFacets = function mergeFacets(left, right) {\n  return right.facets.reduce(function (_, name) {\n    return _.addFacet(name);\n  }, left);\n};\nvar mergeDisjunctiveFacets = function mergeDisjunctiveFacets(left, right) {\n  return right.disjunctiveFacets.reduce(function (_, name) {\n    return _.addDisjunctiveFacet(name);\n  }, left);\n};\nvar mergeHierarchicalFacets = function mergeHierarchicalFacets(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacets: right.hierarchicalFacets.reduce(function (facets, facet) {\n      var index = findIndex(facets, function (_) {\n        return _.name === facet.name;\n      });\n      if (index === -1) {\n        return facets.concat(facet);\n      }\n      var nextFacets = facets.slice();\n      nextFacets.splice(index, 1, facet);\n      return nextFacets;\n    }, left.hierarchicalFacets)\n  });\n};\n\n// Merge facet refinements\nvar mergeTagRefinements = function mergeTagRefinements(left, right) {\n  return right.tagRefinements.reduce(function (_, value) {\n    return _.addTagRefinement(value);\n  }, left);\n};\nvar mergeFacetRefinements = function mergeFacetRefinements(left, right) {\n  return left.setQueryParameters({\n    facetsRefinements: _objectSpread(_objectSpread({}, left.facetsRefinements), right.facetsRefinements)\n  });\n};\nvar mergeFacetsExcludes = function mergeFacetsExcludes(left, right) {\n  return left.setQueryParameters({\n    facetsExcludes: _objectSpread(_objectSpread({}, left.facetsExcludes), right.facetsExcludes)\n  });\n};\nvar mergeDisjunctiveFacetsRefinements = function mergeDisjunctiveFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    disjunctiveFacetsRefinements: _objectSpread(_objectSpread({}, left.disjunctiveFacetsRefinements), right.disjunctiveFacetsRefinements)\n  });\n};\nvar mergeNumericRefinements = function mergeNumericRefinements(left, right) {\n  return left.setQueryParameters({\n    numericRefinements: _objectSpread(_objectSpread({}, left.numericRefinements), right.numericRefinements)\n  });\n};\nvar mergeHierarchicalFacetsRefinements = function mergeHierarchicalFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacetsRefinements: _objectSpread(_objectSpread({}, left.hierarchicalFacetsRefinements), right.hierarchicalFacetsRefinements)\n  });\n};\nvar mergeRuleContexts = function mergeRuleContexts(left, right) {\n  var ruleContexts = uniq([].concat(left.ruleContexts).concat(right.ruleContexts).filter(Boolean));\n  if (ruleContexts.length > 0) {\n    return left.setQueryParameters({\n      ruleContexts: ruleContexts\n    });\n  }\n  return left;\n};\nexport var mergeSearchParameters = function mergeSearchParameters() {\n  for (var _len = arguments.length, parameters = new Array(_len), _key = 0; _key < _len; _key++) {\n    parameters[_key] = arguments[_key];\n  }\n  return parameters.reduce(function (left, right) {\n    var hierarchicalFacetsRefinementsMerged = mergeHierarchicalFacetsRefinements(left, right);\n    var hierarchicalFacetsMerged = mergeHierarchicalFacets(hierarchicalFacetsRefinementsMerged, right);\n    var tagRefinementsMerged = mergeTagRefinements(hierarchicalFacetsMerged, right);\n    var numericRefinementsMerged = mergeNumericRefinements(tagRefinementsMerged, right);\n    var disjunctiveFacetsRefinementsMerged = mergeDisjunctiveFacetsRefinements(numericRefinementsMerged, right);\n    var facetsExcludesMerged = mergeFacetsExcludes(disjunctiveFacetsRefinementsMerged, right);\n    var facetRefinementsMerged = mergeFacetRefinements(facetsExcludesMerged, right);\n    var disjunctiveFacetsMerged = mergeDisjunctiveFacets(facetRefinementsMerged, right);\n    var ruleContextsMerged = mergeRuleContexts(disjunctiveFacetsMerged, right);\n    var facetsMerged = mergeFacets(ruleContextsMerged, right);\n    return mergeWithRest(facetsMerged, right);\n  });\n};","// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.findIndex` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\nexport function findIndex(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n}","export function uniq(array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"initialSearchParameters\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { checkIndexUiState, createDocumentationMessageGenerator, resolveSearchParameters, mergeSearchParameters, warning, isIndexWidget, createInitArgs, createRenderArgs } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'index-widget'\n});\n/**\n * This is the same content as helper._change / setState, but allowing for extra\n * UiState to be synchronized.\n * see: https://github.com/algolia/algoliasearch-helper-js/blob/6b835ffd07742f2d6b314022cce6848f5cfecd4a/src/algoliasearch.helper.js#L1311-L1324\n */\nfunction privateHelperSetState(helper, _ref) {\n  var state = _ref.state,\n    isPageReset = _ref.isPageReset,\n    _uiState = _ref._uiState;\n  if (state !== helper.state) {\n    helper.state = state;\n    helper.emit('change', {\n      state: helper.state,\n      results: helper.lastResults,\n      isPageReset: isPageReset,\n      _uiState: _uiState\n    });\n  }\n}\nfunction getLocalWidgetsUiState(widgets, widgetStateOptions) {\n  var initialUiState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return widgets.reduce(function (uiState, widget) {\n    if (isIndexWidget(widget)) {\n      return uiState;\n    }\n    if (!widget.getWidgetUiState && !widget.getWidgetState) {\n      return uiState;\n    }\n    if (widget.getWidgetUiState) {\n      return widget.getWidgetUiState(uiState, widgetStateOptions);\n    }\n    return widget.getWidgetState(uiState, widgetStateOptions);\n  }, initialUiState);\n}\nfunction getLocalWidgetsSearchParameters(widgets, widgetSearchParametersOptions) {\n  var initialSearchParameters = widgetSearchParametersOptions.initialSearchParameters,\n    rest = _objectWithoutProperties(widgetSearchParametersOptions, _excluded);\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (state, widget) {\n    if (!widget.getWidgetSearchParameters) {\n      return state;\n    }\n    return widget.getWidgetSearchParameters(state, rest);\n  }, initialSearchParameters);\n}\nfunction resetPageFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n  if (indexWidgets.length === 0) {\n    return;\n  }\n  indexWidgets.forEach(function (widget) {\n    var widgetHelper = widget.getHelper();\n    privateHelperSetState(widgetHelper, {\n      state: widgetHelper.state.resetPage(),\n      isPageReset: true\n    });\n    resetPageFromWidgets(widget.getWidgets());\n  });\n}\nfunction resolveScopedResultsFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n  return indexWidgets.reduce(function (scopedResults, current) {\n    return scopedResults.concat.apply(scopedResults, [{\n      indexId: current.getIndexId(),\n      results: current.getResults(),\n      helper: current.getHelper()\n    }].concat(_toConsumableArray(resolveScopedResultsFromWidgets(current.getWidgets()))));\n  }, []);\n}\nvar index = function index(widgetParams) {\n  if (widgetParams === undefined || widgetParams.indexName === undefined) {\n    throw new Error(withUsage('The `indexName` option is required.'));\n  }\n  var indexName = widgetParams.indexName,\n    _widgetParams$indexId = widgetParams.indexId,\n    indexId = _widgetParams$indexId === void 0 ? indexName : _widgetParams$indexId;\n  var localWidgets = [];\n  var localUiState = {};\n  var localInstantSearchInstance = null;\n  var localParent = null;\n  var helper = null;\n  var derivedHelper = null;\n  var lastValidSearchParameters = null;\n  return {\n    $$type: 'ais.index',\n    $$widgetType: 'ais.index',\n    getIndexName: function getIndexName() {\n      return indexName;\n    },\n    getIndexId: function getIndexId() {\n      return indexId;\n    },\n    getHelper: function getHelper() {\n      return helper;\n    },\n    getResults: function getResults() {\n      var _derivedHelper;\n      if (!((_derivedHelper = derivedHelper) !== null && _derivedHelper !== void 0 && _derivedHelper.lastResults)) return null;\n\n      // To make the UI optimistic, we patch the state to display to the current\n      // one instead of the one associated with the latest results.\n      // This means user-driven UI changes (e.g., checked checkbox) are reflected\n      // immediately instead of waiting for Algolia to respond, regardless of\n      // the status of the network request.\n      derivedHelper.lastResults._state = helper.state;\n      return derivedHelper.lastResults;\n    },\n    getPreviousState: function getPreviousState() {\n      return lastValidSearchParameters;\n    },\n    getScopedResults: function getScopedResults() {\n      var widgetParent = this.getParent();\n\n      // If the widget is the root, we consider itself as the only sibling.\n      var widgetSiblings = widgetParent ? widgetParent.getWidgets() : [this];\n      return resolveScopedResultsFromWidgets(widgetSiblings);\n    },\n    getParent: function getParent() {\n      return localParent;\n    },\n    createURL: function createURL(nextState) {\n      return localInstantSearchInstance._createURL(_defineProperty({}, indexId, getLocalWidgetsUiState(localWidgets, {\n        searchParameters: nextState,\n        helper: helper\n      })));\n    },\n    getWidgets: function getWidgets() {\n      return localWidgets;\n    },\n    addWidgets: function addWidgets(widgets) {\n      var _this = this;\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n      localWidgets = localWidgets.concat(widgets);\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        privateHelperSetState(helper, {\n          state: getLocalWidgetsSearchParameters(localWidgets, {\n            uiState: localUiState,\n            initialSearchParameters: helper.state\n          }),\n          _uiState: localUiState\n        });\n\n        // We compute the render state before calling `init` in a separate loop\n        // to construct the whole render state object that is then passed to\n        // `init`.\n        widgets.forEach(function (widget) {\n          if (widget.getRenderState) {\n            var renderState = widget.getRenderState(localInstantSearchInstance.renderState[_this.getIndexId()] || {}, createInitArgs(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));\n            storeRenderState({\n              renderState: renderState,\n              instantSearchInstance: localInstantSearchInstance,\n              parent: _this\n            });\n          }\n        });\n        widgets.forEach(function (widget) {\n          if (widget.init) {\n            widget.init(createInitArgs(localInstantSearchInstance, _this, localInstantSearchInstance._initialUiState));\n          }\n        });\n        localInstantSearchInstance.scheduleSearch();\n      }\n      return this;\n    },\n    removeWidgets: function removeWidgets(widgets) {\n      var _this2 = this;\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n      localWidgets = localWidgets.filter(function (widget) {\n        return widgets.indexOf(widget) === -1;\n      });\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        var nextState = widgets.reduce(function (state, widget) {\n          // the `dispose` method exists at this point we already assert it\n          var next = widget.dispose({\n            helper: helper,\n            state: state,\n            parent: _this2\n          });\n          return next || state;\n        }, helper.state);\n        localUiState = getLocalWidgetsUiState(localWidgets, {\n          searchParameters: nextState,\n          helper: helper\n        });\n        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {\n          uiState: localUiState,\n          initialSearchParameters: nextState\n        }));\n        if (localWidgets.length) {\n          localInstantSearchInstance.scheduleSearch();\n        }\n      }\n      return this;\n    },\n    init: function init(_ref2) {\n      var _this3 = this,\n        _instantSearchInstanc;\n      var instantSearchInstance = _ref2.instantSearchInstance,\n        parent = _ref2.parent,\n        uiState = _ref2.uiState;\n      if (helper !== null) {\n        // helper is already initialized, therefore we do not need to set up\n        // any listeners\n        return;\n      }\n      localInstantSearchInstance = instantSearchInstance;\n      localParent = parent;\n      localUiState = uiState[indexId] || {};\n\n      // The `mainHelper` is already defined at this point. The instance is created\n      // inside InstantSearch at the `start` method, which occurs before the `init`\n      // step.\n      var mainHelper = instantSearchInstance.mainHelper;\n      var parameters = getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: localUiState,\n        initialSearchParameters: new algoliasearchHelper.SearchParameters({\n          index: indexName\n        })\n      });\n\n      // This Helper is only used for state management we do not care about the\n      // `searchClient`. Only the \"main\" Helper created at the `InstantSearch`\n      // level is aware of the client.\n      helper = algoliasearchHelper({}, parameters.index, parameters);\n\n      // We forward the call to `search` to the \"main\" instance of the Helper\n      // which is responsible for managing the queries (it's the only one that is\n      // aware of the `searchClient`).\n      helper.search = function () {\n        if (instantSearchInstance.onStateChange) {\n          instantSearchInstance.onStateChange({\n            uiState: instantSearchInstance.mainIndex.getWidgetUiState({}),\n            setUiState: function setUiState(nextState) {\n              return instantSearchInstance.setUiState(nextState, false);\n            }\n          });\n\n          // We don't trigger a search when controlled because it becomes the\n          // responsibility of `setUiState`.\n          return mainHelper;\n        }\n        return mainHelper.search();\n      };\n      helper.searchWithoutTriggeringOnStateChange = function () {\n        return mainHelper.search();\n      };\n\n      // We use the same pattern for the `searchForFacetValues`.\n      helper.searchForFacetValues = function (facetName, facetValue, maxFacetHits, userState) {\n        var state = helper.state.setQueryParameters(userState);\n        return mainHelper.searchForFacetValues(facetName, facetValue, maxFacetHits, state);\n      };\n      derivedHelper = mainHelper.derive(function () {\n        return mergeSearchParameters.apply(void 0, _toConsumableArray(resolveSearchParameters(_this3)));\n      });\n      var indexInitialResults = (_instantSearchInstanc = instantSearchInstance._initialResults) === null || _instantSearchInstanc === void 0 ? void 0 : _instantSearchInstanc[this.getIndexId()];\n      if (indexInitialResults) {\n        // We restore the shape of the results provided to the instance to respect\n        // the helper's structure.\n        var results = new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(indexInitialResults.state), indexInitialResults.results);\n        derivedHelper.lastResults = results;\n        helper.lastResults = results;\n      }\n\n      // Subscribe to the Helper state changes for the page before widgets\n      // are initialized. This behavior mimics the original one of the Helper.\n      // It makes sense to replicate it at the `init` step. We have another\n      // listener on `change` below, once `init` is done.\n      helper.on('change', function (_ref3) {\n        var isPageReset = _ref3.isPageReset;\n        if (isPageReset) {\n          resetPageFromWidgets(localWidgets);\n        }\n      });\n      derivedHelper.on('search', function () {\n        // The index does not manage the \"staleness\" of the search. This is the\n        // responsibility of the main instance. It does not make sense to manage\n        // it at the index level because it's either: all of them or none of them\n        // that are stalled. The queries are performed into a single network request.\n        instantSearchInstance.scheduleStalledRender();\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: _this3,\n            indexUiState: localUiState\n          });\n        }\n      });\n      derivedHelper.on('result', function (_ref4) {\n        var results = _ref4.results;\n        // The index does not render the results it schedules a new render\n        // to let all the other indices emit their own results. It allows us to\n        // run the render process in one pass.\n        instantSearchInstance.scheduleRender();\n\n        // the derived helper is the one which actually searches, but the helper\n        // which is exposed e.g. via instance.helper, doesn't search, and thus\n        // does not have access to lastResults, which it used to in pre-federated\n        // search behavior.\n        helper.lastResults = results;\n        lastValidSearchParameters = results._state;\n      });\n\n      // We compute the render state before calling `init` in a separate loop\n      // to construct the whole render state object that is then passed to\n      // `init`.\n      localWidgets.forEach(function (widget) {\n        if (widget.getRenderState) {\n          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this3.getIndexId()] || {}, createInitArgs(instantSearchInstance, _this3, uiState));\n          storeRenderState({\n            renderState: renderState,\n            instantSearchInstance: instantSearchInstance,\n            parent: _this3\n          });\n        }\n      });\n      localWidgets.forEach(function (widget) {\n        process.env.NODE_ENV === 'development' ? warning(\n        // if it has NO getWidgetState or if it has getWidgetUiState, we don't warn\n        // aka we warn if there's _only_ getWidgetState\n        !widget.getWidgetState || Boolean(widget.getWidgetUiState), 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : void 0;\n        if (widget.init) {\n          widget.init(createInitArgs(instantSearchInstance, _this3, uiState));\n        }\n      });\n\n      // Subscribe to the Helper state changes for the `uiState` once widgets\n      // are initialized. Until the first render, state changes are part of the\n      // configuration step. This is mainly for backward compatibility with custom\n      // widgets. When the subscription happens before the `init` step, the (static)\n      // configuration of the widget is pushed in the URL. That's what we want to avoid.\n      // https://github.com/algolia/instantsearch.js/pull/994/commits/4a672ae3fd78809e213de0368549ef12e9dc9454\n      helper.on('change', function (event) {\n        var state = event.state;\n        var _uiState = event._uiState;\n        localUiState = getLocalWidgetsUiState(localWidgets, {\n          searchParameters: state,\n          helper: helper\n        }, _uiState || {});\n\n        // We don't trigger an internal change when controlled because it\n        // becomes the responsibility of `setUiState`.\n        if (!instantSearchInstance.onStateChange) {\n          instantSearchInstance.onInternalStateChange();\n        }\n      });\n      if (indexInitialResults) {\n        // If there are initial results, we're not notified of the next results\n        // because we don't trigger an initial search. We therefore need to directly\n        // schedule a render that will render the results injected on the helper.\n        instantSearchInstance.scheduleRender();\n      }\n    },\n    render: function render(_ref5) {\n      var _this4 = this;\n      var instantSearchInstance = _ref5.instantSearchInstance;\n      if (!this.getResults()) {\n        return;\n      }\n\n      // we can't attach a listener to the error event of search, as the error\n      // then would no longer be thrown for global handlers.\n      if (instantSearchInstance.status === 'error' && !instantSearchInstance.mainHelper.hasPendingRequests()) {\n        helper.setState(lastValidSearchParameters);\n      }\n      localWidgets.forEach(function (widget) {\n        if (widget.getRenderState) {\n          var renderState = widget.getRenderState(instantSearchInstance.renderState[_this4.getIndexId()] || {}, createRenderArgs(instantSearchInstance, _this4));\n          storeRenderState({\n            renderState: renderState,\n            instantSearchInstance: instantSearchInstance,\n            parent: _this4\n          });\n        }\n      });\n      localWidgets.forEach(function (widget) {\n        // At this point, all the variables used below are set. Both `helper`\n        // and `derivedHelper` have been created at the `init` step. The attribute\n        // `lastResults` might be `null` though. It's possible that a stalled render\n        // happens before the result e.g with a dynamically added index the request might\n        // be delayed. The render is triggered for the complete tree but some parts do\n        // not have results yet.\n\n        if (widget.render) {\n          widget.render(createRenderArgs(instantSearchInstance, _this4));\n        }\n      });\n    },\n    dispose: function dispose() {\n      var _this5 = this,\n        _helper,\n        _derivedHelper2;\n      localWidgets.forEach(function (widget) {\n        if (widget.dispose) {\n          // The dispose function is always called once the instance is started\n          // (it's an effect of `removeWidgets`). The index is initialized and\n          // the Helper is available. We don't care about the return value of\n          // `dispose` because the index is removed. We can't call `removeWidgets`\n          // because we want to keep the widgets on the instance, to allow idempotent\n          // operations on `add` & `remove`.\n          widget.dispose({\n            helper: helper,\n            state: helper.state,\n            parent: _this5\n          });\n        }\n      });\n      localInstantSearchInstance = null;\n      localParent = null;\n      (_helper = helper) === null || _helper === void 0 ? void 0 : _helper.removeAllListeners();\n      helper = null;\n      (_derivedHelper2 = derivedHelper) === null || _derivedHelper2 === void 0 ? void 0 : _derivedHelper2.detach();\n      derivedHelper = null;\n    },\n    getWidgetUiState: function getWidgetUiState(uiState) {\n      return localWidgets.filter(isIndexWidget).reduce(function (previousUiState, innerIndex) {\n        return innerIndex.getWidgetUiState(previousUiState);\n      }, _objectSpread(_objectSpread({}, uiState), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread({}, uiState[indexId]), localUiState))));\n    },\n    getWidgetState: function getWidgetState(uiState) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead.') : void 0;\n      return this.getWidgetUiState(uiState);\n    },\n    getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n      var uiState = _ref6.uiState;\n      return getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: uiState,\n        initialSearchParameters: searchParameters\n      });\n    },\n    refreshUiState: function refreshUiState() {\n      localUiState = getLocalWidgetsUiState(localWidgets, {\n        searchParameters: this.getHelper().state,\n        helper: this.getHelper()\n      }, localUiState);\n    },\n    setIndexUiState: function setIndexUiState(indexUiState) {\n      var nextIndexUiState = typeof indexUiState === 'function' ? indexUiState(localUiState) : indexUiState;\n      localInstantSearchInstance.setUiState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, indexId, nextIndexUiState));\n      });\n    }\n  };\n};\nexport default index;\nfunction storeRenderState(_ref7) {\n  var renderState = _ref7.renderState,\n    instantSearchInstance = _ref7.instantSearchInstance,\n    parent = _ref7.parent;\n  var parentIndexName = parent ? parent.getIndexId() : instantSearchInstance.mainIndex.getIndexId();\n  instantSearchInstance.renderState = _objectSpread(_objectSpread({}, instantSearchInstance.renderState), {}, _defineProperty({}, parentIndexName, _objectSpread(_objectSpread({}, instantSearchInstance.renderState[parentIndexName]), renderState)));\n}","export function resolveSearchParameters(current) {\n  var parent = current.getParent();\n  var states = [current.getHelper().state];\n  while (parent !== null) {\n    states = [parent.getHelper().state].concat(states);\n    parent = parent.getParent();\n  }\n  return states;\n}","var NAMESPACE = 'ais';\nexport var component = function component(componentName) {\n  return function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      descendantName = _ref.descendantName,\n      modifierName = _ref.modifierName;\n    var descendent = descendantName ? \"-\".concat(descendantName) : '';\n    var modifier = modifierName ? \"--\".concat(modifierName) : '';\n    return \"\".concat(NAMESPACE, \"-\").concat(componentName).concat(descendent).concat(modifier);\n  };\n};","export function getPropertyByPath(object, path) {\n  var parts = Array.isArray(path) ? path : path.split('.');\n  return parts.reduce(function (current, key) {\n    return current && current[key];\n  }, object);\n}","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js\n */\n\n// Used to map characters to HTML entities.\nvar htmlEntities = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n// Used to match HTML entities and HTML characters.\nvar regexUnescapedHtml = /[&<>\"']/g;\nvar regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n */\nexport function escape(value) {\n  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {\n    return htmlEntities[character];\n  }) : value;\n}\n\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/unescape.js\n */\n\n// Used to map HTML entities to characters.\nvar htmlCharacters = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n};\n\n// Used to match HTML entities and HTML characters.\nvar regexEscapedHtml = /&(amp|quot|lt|gt|#39);/g;\nvar regexHasEscapedHtml = RegExp(regexEscapedHtml.source);\n\n/**\n * Converts the HTML entities \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * characters.\n */\nexport function unescape(value) {\n  return value && regexHasEscapedHtml.test(value) ? value.replace(regexEscapedHtml, function (character) {\n    return htmlCharacters[character];\n  }) : value;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js\n */\n\nfunction getTag(value) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n  return Object.prototype.toString.call(value);\n}\nfunction isObjectLike(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\n\n/**\n * Checks if `value` is a plain object.\n *\n * A plain object is an object created by the `Object`\n * constructor or with a `[[Prototype]]` of `null`.\n */\nexport function isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  var proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError(\"Cannot destructure \" + obj); }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { escape } from \"./escape-html.js\";\nimport { isPlainObject } from \"./isPlainObject.js\";\nexport var TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\nexport var TAG_REPLACEMENT = {\n  highlightPreTag: '<mark>',\n  highlightPostTag: '</mark>'\n};\nfunction replaceTagsAndEscape(value) {\n  return escape(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);\n}\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return Object.keys(input).reduce(function (acc, key) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, recursiveEscape(input[key])));\n    }, {});\n  }\n  if (Array.isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n  return _objectSpread(_objectSpread({}, input), {}, {\n    value: replaceTagsAndEscape(input.value)\n  });\n}\nexport function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    // We don't override the value on hit because it will mutate the raw results\n    // instead we make a shallow copy and we assign the escaped values on it.\n    hits = hits.map(function (_ref) {\n      var hit = _extends({}, (_objectDestructuringEmpty(_ref), _ref));\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n  return hits;\n}\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _objectSpread(_objectSpread({}, h), {}, {\n      highlighted: replaceTagsAndEscape(h.highlighted)\n    });\n  });\n}","import { component } from \"../lib/suit.js\";\nimport { getPropertyByPath, TAG_REPLACEMENT, warning } from \"../lib/utils/index.js\";\nvar suit = component('Highlight');\nexport default function highlight(_ref) {\n  var attribute = _ref.attribute,\n    _ref$highlightedTagNa = _ref.highlightedTagName,\n    highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n    hit = _ref.hit,\n    _ref$cssClasses = _ref.cssClasses,\n    cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var highlightAttributeResult = getPropertyByPath(hit._highlightResult, attribute);\n\n  // @MAJOR fallback to attribute value if highlight is not found\n  process.env.NODE_ENV === 'development' ? warning(highlightAttributeResult, \"Could not enable highlight for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var _ref2 = highlightAttributeResult || {},\n    _ref2$value = _ref2.value,\n    attributeValue = _ref2$value === void 0 ? '' : _ref2$value;\n\n  // cx is not used, since it would be bundled as a dependency for Vue & Angular\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { TAG_REPLACEMENT } from \"./escape-highlight.js\";\nexport function concatHighlightedParts(parts) {\n  var highlightPreTag = TAG_REPLACEMENT.highlightPreTag,\n    highlightPostTag = TAG_REPLACEMENT.highlightPostTag;\n  return parts.map(function (part) {\n    return part.isHighlighted ? highlightPreTag + part.value + highlightPostTag : part.value;\n  }).join('');\n}","import { unescape } from \"./escape-html.js\";\nvar hasAlphanumeric = new RegExp(/\\w/i);\nexport function getHighlightFromSiblings(parts, i) {\n  var _parts, _parts2;\n  var current = parts[i];\n  var isNextHighlighted = ((_parts = parts[i + 1]) === null || _parts === void 0 ? void 0 : _parts.isHighlighted) || true;\n  var isPreviousHighlighted = ((_parts2 = parts[i - 1]) === null || _parts2 === void 0 ? void 0 : _parts2.isHighlighted) || true;\n  if (!hasAlphanumeric.test(unescape(current.value)) && isPreviousHighlighted === isNextHighlighted) {\n    return isPreviousHighlighted;\n  }\n  return current.isHighlighted;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { getHighlightFromSiblings } from \"./getHighlightFromSiblings.js\";\nexport function reverseHighlightedParts(parts) {\n  if (!parts.some(function (part) {\n    return part.isHighlighted;\n  })) {\n    return parts.map(function (part) {\n      return _objectSpread(_objectSpread({}, part), {}, {\n        isHighlighted: false\n      });\n    });\n  }\n  return parts.map(function (part, i) {\n    return _objectSpread(_objectSpread({}, part), {}, {\n      isHighlighted: !getHighlightFromSiblings(parts, i)\n    });\n  });\n}","import { TAG_REPLACEMENT } from \"./escape-highlight.js\";\nexport function getHighlightedParts(highlightedValue) {\n  var highlightPostTag = TAG_REPLACEMENT.highlightPostTag,\n    highlightPreTag = TAG_REPLACEMENT.highlightPreTag;\n  var splitByPreTag = highlightedValue.split(highlightPreTag);\n  var firstValue = splitByPreTag.shift();\n  var elements = !firstValue ? [] : [{\n    value: firstValue,\n    isHighlighted: false\n  }];\n  splitByPreTag.forEach(function (split) {\n    var splitByPostTag = split.split(highlightPostTag);\n    elements.push({\n      value: splitByPostTag[0],\n      isHighlighted: true\n    });\n    if (splitByPostTag[1] !== '') {\n      elements.push({\n        value: splitByPostTag[1],\n        isHighlighted: false\n      });\n    }\n  });\n  return elements;\n}","import { component } from \"../lib/suit.js\";\nimport { TAG_REPLACEMENT, getPropertyByPath, getHighlightedParts, reverseHighlightedParts, concatHighlightedParts, warning } from \"../lib/utils/index.js\";\nvar suit = component('ReverseHighlight');\nexport default function reverseHighlight(_ref) {\n  var attribute = _ref.attribute,\n    _ref$highlightedTagNa = _ref.highlightedTagName,\n    highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n    hit = _ref.hit,\n    _ref$cssClasses = _ref.cssClasses,\n    cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var highlightAttributeResult = getPropertyByPath(hit._highlightResult, attribute);\n\n  // @MAJOR fallback to attribute value if highlight is not found\n  process.env.NODE_ENV === 'development' ? warning(highlightAttributeResult, \"Could not enable reverse highlight for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is either searchable or specified in `attributesToHighlight`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var _ref2 = highlightAttributeResult || {},\n    _ref2$value = _ref2.value,\n    attributeValue = _ref2$value === void 0 ? '' : _ref2$value;\n\n  // cx is not used, since it would be bundled as a dependency for Vue & Angular\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  var reverseHighlightedValue = concatHighlightedParts(reverseHighlightedParts(getHighlightedParts(attributeValue)));\n  return reverseHighlightedValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { component } from \"../lib/suit.js\";\nimport { TAG_REPLACEMENT, getPropertyByPath, warning } from \"../lib/utils/index.js\";\nvar suit = component('Snippet');\nexport default function snippet(_ref) {\n  var attribute = _ref.attribute,\n    _ref$highlightedTagNa = _ref.highlightedTagName,\n    highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n    hit = _ref.hit,\n    _ref$cssClasses = _ref.cssClasses,\n    cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var snippetAttributeResult = getPropertyByPath(hit._snippetResult, attribute);\n\n  // @MAJOR fallback to attribute value if snippet is not found\n  process.env.NODE_ENV === 'development' ? warning(snippetAttributeResult, \"Could not enable snippet for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var _ref2 = snippetAttributeResult || {},\n    _ref2$value = _ref2.value,\n    attributeValue = _ref2$value === void 0 ? '' : _ref2$value;\n\n  // cx is not used, since it would be bundled as a dependency for Vue & Angular\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { component } from \"../lib/suit.js\";\nimport { TAG_REPLACEMENT, getPropertyByPath, getHighlightedParts, reverseHighlightedParts, concatHighlightedParts, warning } from \"../lib/utils/index.js\";\nvar suit = component('ReverseSnippet');\nexport default function reverseSnippet(_ref) {\n  var attribute = _ref.attribute,\n    _ref$highlightedTagNa = _ref.highlightedTagName,\n    highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n    hit = _ref.hit,\n    _ref$cssClasses = _ref.cssClasses,\n    cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var snippetAttributeResult = getPropertyByPath(hit._snippetResult, attribute);\n\n  // @MAJOR fallback to attribute value if snippet is not found\n  process.env.NODE_ENV === 'development' ? warning(snippetAttributeResult, \"Could not enable reverse snippet for \\\"\".concat(attribute, \"\\\", will display an empty string.\\nPlease check whether this attribute exists and is specified in `attributesToSnippet`.\\n\\nSee: https://alg.li/highlighting\\n\")) : void 0;\n  var _ref2 = snippetAttributeResult || {},\n    _ref2$value = _ref2.value,\n    attributeValue = _ref2$value === void 0 ? '' : _ref2$value;\n\n  // cx is not used, since it would be bundled as a dependency for Vue & Angular\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  var reverseHighlightedValue = concatHighlightedParts(reverseHighlightedParts(getHighlightedParts(attributeValue)));\n  return reverseHighlightedValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","export function serializePayload(payload) {\n  return btoa(encodeURIComponent(JSON.stringify(payload)));\n}\nexport function deserializePayload(serialized) {\n  return JSON.parse(decodeURIComponent(atob(serialized)));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nimport { warning, serializePayload, deserializePayload } from \"../lib/utils/index.js\";\nexport function readDataAttributes(domElement) {\n  var method = domElement.getAttribute('data-insights-method');\n  var serializedPayload = domElement.getAttribute('data-insights-payload');\n  if (typeof serializedPayload !== 'string') {\n    throw new Error('The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.');\n  }\n  try {\n    var payload = deserializePayload(serializedPayload);\n    return {\n      method: method,\n      payload: payload\n    };\n  } catch (error) {\n    throw new Error('The insights helper was unable to parse `data-insights-payload`.');\n  }\n}\nexport function hasDataAttributes(domElement) {\n  return domElement.hasAttribute('data-insights-method');\n}\nexport function writeDataAttributes(_ref) {\n  var method = _ref.method,\n    payload = _ref.payload;\n  if (_typeof(payload) !== 'object') {\n    throw new Error(\"The insights helper expects the payload to be an object.\");\n  }\n  var serializedPayload;\n  try {\n    serializedPayload = serializePayload(payload);\n  } catch (error) {\n    throw new Error(\"Could not JSON serialize the payload object.\");\n  }\n  return \"data-insights-method=\\\"\".concat(method, \"\\\" data-insights-payload=\\\"\").concat(serializedPayload, \"\\\"\");\n}\n\n/**\n * @deprecated This function will be still supported in 4.x releases, but not further. It is replaced by the `insights` middleware. For more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\n */\nexport default function insights(method, payload) {\n  process.env.NODE_ENV === 'development' ? warning(false, \"`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n  return writeDataAttributes({\n    method: method,\n    payload: payload\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { highlight as _highlight, reverseHighlight as _reverseHighlight, snippet as _snippet, reverseSnippet as _reverseSnippet, insights as _insights } from \"../helpers/index.js\";\nimport { formatNumber as _formatNumber } from \"./formatNumber.js\";\nexport default function hoganHelpers(_ref) {\n  var numberLocale = _ref.numberLocale;\n  return {\n    formatNumber: function formatNumber(value, render) {\n      return _formatNumber(Number(render(value)), numberLocale);\n    },\n    highlight: function highlight(options, render) {\n      try {\n        var highlightOptions = JSON.parse(options);\n        return render(_highlight(_objectSpread(_objectSpread({}, highlightOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe highlight helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    reverseHighlight: function reverseHighlight(options, render) {\n      try {\n        var reverseHighlightOptions = JSON.parse(options);\n        return render(_reverseHighlight(_objectSpread(_objectSpread({}, reverseHighlightOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\n  The reverseHighlight helper expects a JSON object of the format:\\n  { \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    snippet: function snippet(options, render) {\n      try {\n        var snippetOptions = JSON.parse(options);\n        return render(_snippet(_objectSpread(_objectSpread({}, snippetOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe snippet helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    reverseSnippet: function reverseSnippet(options, render) {\n      try {\n        var reverseSnippetOptions = JSON.parse(options);\n        return render(_reverseSnippet(_objectSpread(_objectSpread({}, reverseSnippetOptions), {}, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\n  The reverseSnippet helper expects a JSON object of the format:\\n  { \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    insights: function insights(options, render) {\n      try {\n        var _JSON$parse = JSON.parse(options),\n          method = _JSON$parse.method,\n          payload = _JSON$parse.payload;\n        return render(_insights(method, _objectSpread({\n          objectIDs: [this.objectID]\n        }, payload)));\n      } catch (error) {\n        throw new Error(\"\\nThe insights helper expects a JSON object of the format:\\n{ \\\"method\\\": \\\"method-name\\\", \\\"payload\\\": { \\\"eventName\\\": \\\"name of the event\\\" } }\");\n      }\n    }\n  };\n}","export function formatNumber(value, numberLocale) {\n  return value.toLocaleString(numberLocale);\n}","var nextMicroTask = Promise.resolve();\nexport function defer(callback) {\n  var progress = null;\n  var cancelled = false;\n  var fn = function fn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    if (progress !== null) {\n      return;\n    }\n    progress = nextMicroTask.then(function () {\n      progress = null;\n      if (cancelled) {\n        cancelled = false;\n        return;\n      }\n      callback.apply(void 0, args);\n    });\n  };\n  fn.wait = function () {\n    if (progress === null) {\n      throw new Error('The deferred function should be called before calling `wait()`');\n    }\n    return progress;\n  };\n  fn.cancel = function () {\n    if (progress === null) {\n      return;\n    }\n    cancelled = true;\n  };\n  return fn;\n}","import { checkIndexUiState } from \"./checkIndexUiState.js\";\nimport { isIndexWidget } from \"./isIndexWidget.js\";\nexport function setIndexHelperState(finalUiState, indexWidget) {\n  var nextIndexUiState = finalUiState[indexWidget.getIndexId()] || {};\n  if (process.env.NODE_ENV === 'development') {\n    checkIndexUiState({\n      index: indexWidget,\n      indexUiState: nextIndexUiState\n    });\n  }\n  indexWidget.getHelper().setState(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n    uiState: nextIndexUiState\n  }));\n  indexWidget.getWidgets().filter(isIndexWidget).forEach(function (widget) {\n    return setIndexHelperState(finalUiState, widget);\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport EventEmitter from '@algolia/events';\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport index from \"../widgets/index/index.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, setIndexHelperState } from \"./utils/index.js\";\nimport version from \"./version.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\nfunction defaultCreateURL() {\n  return '#';\n}\n\n// this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n  var _super = _createSuper(InstantSearch);\n  function InstantSearch(options) {\n    var _this;\n    _classCallCheck(this, InstantSearch);\n    _this = _super.call(this);\n\n    // prevent `render` event listening from causing a warning\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"status\", 'idle');\n    _defineProperty(_assertThisInitialized(_this), \"error\", undefined);\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      var _this$mainHelper;\n      var shouldResetStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!((_this$mainHelper = _this.mainHelper) !== null && _this$mainHelper !== void 0 && _this$mainHelper.hasPendingRequests())) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        if (shouldResetStatus) {\n          _this.status = 'idle';\n          _this.error = undefined;\n        }\n      }\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n      _this.emit('render');\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n    _this.setMaxListeners(100);\n    var _options$indexName = options.indexName,\n      indexName = _options$indexName === void 0 ? null : _options$indexName,\n      numberLocale = options.numberLocale,\n      _options$initialUiSta = options.initialUiState,\n      initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n      _options$routing = options.routing,\n      routing = _options$routing === void 0 ? null : _options$routing,\n      searchFunction = options.searchFunction,\n      _options$stalledSearc = options.stalledSearchDelay,\n      stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n      _options$searchClient = options.searchClient,\n      searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n      _options$insightsClie = options.insightsClient,\n      insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n      _options$onStateChang = options.onStateChange,\n      onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n    if (searchFunction) {\n      process.env.NODE_ENV === 'development' ? warning(false, \"The `searchFunction` option is deprecated. Use `onStateChange` instead.\") : void 0;\n      _this._searchFunction = searchFunction;\n    }\n    _this.sendEventToInsights = noop;\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware());\n    }\n    return _this;\n  }\n\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n  _createClass(InstantSearch, [{\n    key: \"_isSearchStalled\",\n    get:\n    /**\n     * The status of the search. Can be \"idle\", \"loading\", \"stalled\", or \"error\".\n     */\n\n    /**\n     * The last returned error from the Search API.\n     * The error gets cleared when the next valid search response is rendered.\n     */\n\n    /**\n     * @deprecated use `status === 'stalled'` instead\n     */\n    function get() {\n      process.env.NODE_ENV === 'development' ? warning(false, \"`InstantSearch._isSearchStalled` is deprecated and will be removed in InstantSearch.js 5.0.\\n\\nUse `InstantSearch.status === \\\"stalled\\\"` instead.\") : void 0;\n      return this.status === 'stalled';\n    }\n  }, {\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          subscribe: noop,\n          started: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n        return newMiddleware;\n      });\n\n      // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n          m.started();\n        });\n      }\n      return this;\n    }\n\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    }\n\n    // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      }\n\n      // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n      mainHelper.search = function () {\n        _this3.status = 'loading';\n        _this3.scheduleRender(false);\n\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n            _this3._mainHelperSearch();\n          });\n          // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n          _this3._searchFunction(searchFunctionHelper);\n          return mainHelper;\n        };\n      }\n\n      // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        }\n        // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n        error.error = error;\n        _this3.error = error;\n        _this3.status = 'error';\n        _this3.scheduleRender(false);\n\n        // This needs to execute last because it throws the error.\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch;\n        // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n        this.scheduleSearch = defer(noop);\n        // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      }\n      // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n        this.scheduleSearch();\n      }\n\n      // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n      this.helper = this.mainIndex.getHelper();\n\n      // track we started the search if we add more widgets,\n      // to init them directly after add\n      this.started = true;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.started();\n      });\n    }\n\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this$mainHelper2;\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose();\n\n      // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n      this.started = false;\n\n      // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n      this.removeAllListeners();\n      (_this$mainHelper2 = this.mainHelper) === null || _this$mainHelper2 === void 0 ? void 0 : _this$mainHelper2.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref7) {\n        var instance = _ref7.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4.status = 'stalled';\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n\n    /**\n     * Set the UI state and trigger a search.\n     * @param uiState The next UI state or a function computing it from the current state\n     * @param callOnStateChange private parameter used to know if the method is called from a state change\n     */\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      var _this5 = this;\n      var callOnStateChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      }\n\n      // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n      if (this.onStateChange && callOnStateChange) {\n        this.onStateChange({\n          uiState: nextUiState,\n          setUiState: function setUiState(finalUiState) {\n            setIndexHelperState(typeof finalUiState === 'function' ? finalUiState(nextUiState) : finalUiState, _this5.mainIndex);\n            _this5.scheduleSearch();\n            _this5.onInternalStateChange();\n          }\n        });\n      } else {\n        setIndexHelperState(nextUiState, this.mainIndex);\n        this.scheduleSearch();\n        this.onInternalStateChange();\n      }\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n  return InstantSearch;\n}(EventEmitter);\nexport default InstantSearch;","export default '4.53.0';","import { createContext } from 'react';\nexport var InstantSearchSSRContext = /*#__PURE__*/createContext(null);\nif (process.env.NODE_ENV === 'development') {\n  InstantSearchSSRContext.displayName = 'InstantSearchSSR';\n}","export default '6.38.1';","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport { useReducer } from 'react';\n\n/**\n * Forces a React update that triggers a rerender.\n * @link https://reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate\n */\nexport function useForceUpdate() {\n  var _useReducer = useReducer(function (x) {\n      return x + 1;\n    }, 0),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    forceUpdate = _useReducer2[1];\n  return forceUpdate;\n}","import InstantSearch from \"instantsearch.js/es/lib/InstantSearch.js\";\nimport { useCallback, useRef, version as ReactVersion } from 'react';\nimport { useSyncExternalStore } from \"use-sync-external-store/shim/index.js\";\nimport { useInstantSearchServerContext } from \"./useInstantSearchServerContext.js\";\nimport { useInstantSearchSSRContext } from \"./useInstantSearchSSRContext.js\";\nimport version from \"../version.js\";\nimport { useForceUpdate } from \"./useForceUpdate.js\";\nimport { warn } from \"./warn.js\";\nvar defaultUserAgents = [\"react (\".concat(ReactVersion, \")\"), \"react-instantsearch (\".concat(version, \")\"), \"react-instantsearch-hooks (\".concat(version, \")\")];\nvar serverUserAgent = \"react-instantsearch-server (\".concat(version, \")\");\nexport function useInstantSearchApi(props) {\n  var forceUpdate = useForceUpdate();\n  var serverContext = useInstantSearchServerContext();\n  var serverState = useInstantSearchSSRContext();\n  var initialResults = serverState === null || serverState === void 0 ? void 0 : serverState.initialResults;\n  var prevPropsRef = useRef(props);\n  var searchRef = useRef(null);\n  // As we need to render on mount with SSR, using the local ref above in `StrictMode` will\n  // create and start two instances of InstantSearch. To avoid this, we instead discard it and use\n  // an upward ref from `InstantSearchSSRContext` as it has already been mounted a second time at this point.\n  if (serverState) {\n    searchRef = serverState.ssrSearchRef;\n  }\n  if (searchRef.current === null) {\n    // We don't use the `instantsearch()` function because it comes with other\n    // top-level APIs that we don't need.\n    // See https://github.com/algolia/instantsearch.js/blob/5b529f43d8acc680f85837eaaa41f7fd03a3f833/src/index.es.ts#L63-L86\n    var search = new InstantSearch(props);\n    if (serverContext || initialResults) {\n      // InstantSearch.js has a private Initial Results API that lets us inject\n      // results on the search instance.\n      // On the server, we default the initial results to an empty object so that\n      // InstantSearch.js doesn't schedule a search that isn't used, leading to\n      // an additional network request. (This is equivalent to monkey-patching\n      // `scheduleSearch` to a noop.)\n      search._initialResults = initialResults || {};\n    }\n    addAlgoliaAgents(props.searchClient, [].concat(defaultUserAgents, [serverContext && serverUserAgent]));\n\n    // On the server, we start the search early to compute the search parameters.\n    // On SSR, we start the search early to directly catch up with the lifecycle\n    // and render.\n    if (serverContext || initialResults) {\n      search.start();\n    }\n    if (serverContext) {\n      // We notify `getServerState()` of the InstantSearch internals to retrieve\n      // the server state and pass it to the render on SSR.\n      serverContext.notifyServer({\n        search: search\n      });\n    }\n    warnNextRouter(props.routing);\n    searchRef.current = search;\n  }\n  {\n    var _search = searchRef.current;\n    var prevProps = prevPropsRef.current;\n    if (prevProps.indexName !== props.indexName) {\n      _search.helper.setIndex(props.indexName).search();\n      prevPropsRef.current = props;\n    }\n    if (prevProps.searchClient !== props.searchClient) {\n      addAlgoliaAgents(props.searchClient, [].concat(defaultUserAgents, [serverContext && serverUserAgent]));\n      _search.mainHelper.setClient(props.searchClient).search();\n      prevPropsRef.current = props;\n    }\n    if (prevProps.onStateChange !== props.onStateChange) {\n      _search.onStateChange = props.onStateChange;\n      prevPropsRef.current = props;\n    }\n    if (prevProps.searchFunction !== props.searchFunction) {\n      // Updating the `searchFunction` to `undefined` is not supported by\n      // InstantSearch.js, so it will throw an error.\n      // This is a fair behavior until we add an update API in InstantSearch.js.\n      _search._searchFunction = props.searchFunction;\n      prevPropsRef.current = props;\n    }\n    if (prevProps.stalledSearchDelay !== props.stalledSearchDelay) {\n      var _props$stalledSearchD;\n      // The default `stalledSearchDelay` in InstantSearch.js is 200ms.\n      // We need to reset it when it's undefined to get back to the original value.\n      _search._stalledSearchDelay = (_props$stalledSearchD = props.stalledSearchDelay) !== null && _props$stalledSearchD !== void 0 ? _props$stalledSearchD : 200;\n      prevPropsRef.current = props;\n    }\n\n    // Updating the `routing` prop is not supported because InstantSearch.js\n    // doesn't let us change it. This might not be a problem though, because `routing`\n    // shouldn't need to be dynamic.\n    // If we find scenarios where `routing` needs to change, we can always expose\n    // it privately on the InstantSearch instance. Another way would be to\n    // manually inject the routing middleware in this library, and not rely\n    // on the provided `routing` prop.\n  }\n\n  var cleanupTimerRef = useRef(null);\n  var store = useSyncExternalStore(useCallback(function () {\n    var search = searchRef.current;\n\n    // Scenario 1: the component mounts.\n    if (cleanupTimerRef.current === null) {\n      // On SSR, the instance is already started so we don't start it again.\n      if (!search.started) {\n        search.start();\n        forceUpdate();\n      }\n    }\n    // Scenario 2: the component updates.\n    else {\n      // We cancel the previous cleanup function because we don't want to\n      // dispose the search during an update.\n      clearTimeout(cleanupTimerRef.current);\n      search._preventWidgetCleanup = false;\n    }\n    return function () {\n      function cleanup() {\n        search.dispose();\n      }\n\n      // We clean up only when the component that uses this subscription unmounts,\n      // but not when it updates, because it would dispose the instance, which\n      // would remove all the widgets and break routing.\n      // Executing the cleanup function in a `setTimeout()` lets us cancel it\n      // in the next effect.\n      // (There might be better ways to do this.)\n      cleanupTimerRef.current = setTimeout(cleanup);\n\n      // We need to prevent the `useWidget` cleanup function so that widgets\n      // are not removed before the instance is disposed, triggering\n      // an unwanted search request.\n      search._preventWidgetCleanup = true;\n    };\n  }, [forceUpdate]), function () {\n    return searchRef.current;\n  }, function () {\n    return searchRef.current;\n  });\n  return store;\n}\nfunction addAlgoliaAgents(searchClient, userAgents) {\n  if (typeof searchClient.addAlgoliaAgent !== 'function') {\n    return;\n  }\n  userAgents.filter(Boolean).forEach(function (userAgent) {\n    searchClient.addAlgoliaAgent(userAgent);\n  });\n}\nfunction warnNextRouter(routing) {\n  if (process.env.NODE_ENV === 'development') {\n    var _routing$router;\n    if (!routing || typeof window === 'undefined' || !('__NEXT_DATA__' in window)) {\n      return;\n    }\n    var isUsingNextRouter =\n    // @ts-expect-error: _isNextRouter is only set on the Next.js router\n    routing !== true && (routing === null || routing === void 0 ? void 0 : (_routing$router = routing.router) === null || _routing$router === void 0 ? void 0 : _routing$router._isNextRouter);\n    process.env.NODE_ENV === 'development' ? warn(isUsingNextRouter, \"\\nYou are using Next.js with InstantSearch without the \\\"react-instantsearch-hooks-router-nextjs\\\" package.\\nThis package is recommended to make the routing work correctly with Next.js.\\nPlease check its usage instructions: https://github.com/algolia/instantsearch/tree/master/packages/react-instantsearch-hooks-router-nextjs\\n\\nYou can ignore this warning if you are using a custom router that suits your needs, it won't be outputted in production builds.\") : void 0;\n  }\n}","import { useContext } from 'react';\nimport { InstantSearchSSRContext } from \"./InstantSearchSSRContext.js\";\nexport function useInstantSearchSSRContext() {\n  return useContext(InstantSearchSSRContext);\n}","var _excluded = [\"children\"];\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { IndexContext } from \"../lib/IndexContext.js\";\nimport { InstantSearchContext } from \"../lib/InstantSearchContext.js\";\nimport { useInstantSearchApi } from \"../lib/useInstantSearchApi.js\";\nexport function InstantSearch(_ref) {\n  var children = _ref.children,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var search = useInstantSearchApi(props);\n  if (!search.started) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(InstantSearchContext.Provider, {\n    value: search\n  }, /*#__PURE__*/React.createElement(IndexContext.Provider, {\n    value: search.mainIndex\n  }, children));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { checkRendering, createDocumentationMessageGenerator, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box',\n  connector: true\n});\nvar defaultQueryHook = function defaultQueryHook(query, hook) {\n  return hook(query);\n};\n\n/**\n * **SearchBox** connector provides the logic to build a widget that will let the user search for a query.\n *\n * The connector provides to the rendering: `refine()` to set the query. The behaviour of this function\n * may be impacted by the `queryHook` widget parameter.\n */\nvar connectSearchBox = function connectSearchBox(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n      _ref$queryHook = _ref.queryHook,\n      queryHook = _ref$queryHook === void 0 ? defaultQueryHook : _ref$queryHook;\n    var _refine;\n    var _clear;\n    return {\n      $$type: 'ais.searchBox',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref2) {\n        var state = _ref2.state;\n        unmountFn();\n        return state.setQueryParameter('query', undefined);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          searchBox: this.getWidgetRenderState(renderOptions)\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref3) {\n        var helper = _ref3.helper,\n          searchMetadata = _ref3.searchMetadata,\n          state = _ref3.state;\n        if (!_refine) {\n          _refine = function _refine(query) {\n            queryHook(query, function (q) {\n              return helper.setQuery(q).search();\n            });\n          };\n          _clear = function _clear() {\n            helper.setQuery('').search();\n          };\n        }\n        return {\n          query: state.query || '',\n          refine: _refine,\n          clear: _clear,\n          widgetParams: widgetParams,\n          isSearchStalled: searchMetadata.isSearchStalled\n        };\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var query = searchParameters.query || '';\n        if (query === '' || uiState && uiState.query === query) {\n          return uiState;\n        }\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          query: query\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        return searchParameters.setQueryParameter('query', uiState.query || '');\n      }\n    };\n  };\n};\nexport default connectSearchBox;","export function cx() {\n  for (var _len = arguments.length, classNames = new Array(_len), _key = 0; _key < _len; _key++) {\n    classNames[_key] = arguments[_key];\n  }\n  return classNames.filter(Boolean).join(' ');\n}","var _excluded = [\"formRef\", \"inputRef\", \"isSearchStalled\", \"onChange\", \"onReset\", \"onSubmit\", \"placeholder\", \"value\", \"autoFocus\", \"resetIconComponent\", \"submitIconComponent\", \"loadingIconComponent\", \"classNames\", \"translations\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { cx } from \"./lib/cx.js\";\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"\n});\nfunction DefaultSubmitIcon(_ref) {\n  var classNames = _ref.classNames;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    className: cx('ais-SearchBox-submitIcon', classNames.submitIcon),\n    width: \"10\",\n    height: \"10\",\n    viewBox: \"0 0 40 40\",\n    \"aria-hidden\": \"true\"\n  }, _ref2);\n}\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\"\n});\nfunction DefaultResetIcon(_ref3) {\n  var classNames = _ref3.classNames;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    className: cx('ais-SearchBox-resetIcon', classNames.resetIcon),\n    viewBox: \"0 0 20 20\",\n    width: \"10\",\n    height: \"10\",\n    \"aria-hidden\": \"true\"\n  }, _ref4);\n}\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(1 1)\",\n  strokeWidth: \"2\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  strokeOpacity: \".5\",\n  cx: \"18\",\n  cy: \"18\",\n  r: \"18\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36 18c0-9.94-8.06-18-18-18\"\n}, /*#__PURE__*/React.createElement(\"animateTransform\", {\n  attributeName: \"transform\",\n  type: \"rotate\",\n  from: \"0 18 18\",\n  to: \"360 18 18\",\n  dur: \"1s\",\n  repeatCount: \"indefinite\"\n}))));\nfunction DefaultLoadingIcon(_ref5) {\n  var classNames = _ref5.classNames;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 38 38\",\n    stroke: \"#444\",\n    className: cx('ais-SearchBox-loadingIcon', classNames.loadingIcon),\n    \"aria-hidden\": \"true\"\n  }, _ref6);\n}\nexport function SearchBox(_ref7) {\n  var formRef = _ref7.formRef,\n    inputRef = _ref7.inputRef,\n    isSearchStalled = _ref7.isSearchStalled,\n    onChange = _ref7.onChange,\n    onReset = _ref7.onReset,\n    onSubmit = _ref7.onSubmit,\n    placeholder = _ref7.placeholder,\n    value = _ref7.value,\n    autoFocus = _ref7.autoFocus,\n    _ref7$resetIconCompon = _ref7.resetIconComponent,\n    ResetIcon = _ref7$resetIconCompon === void 0 ? DefaultResetIcon : _ref7$resetIconCompon,\n    _ref7$submitIconCompo = _ref7.submitIconComponent,\n    SubmitIcon = _ref7$submitIconCompo === void 0 ? DefaultSubmitIcon : _ref7$submitIconCompo,\n    _ref7$loadingIconComp = _ref7.loadingIconComponent,\n    LoadingIcon = _ref7$loadingIconComp === void 0 ? DefaultLoadingIcon : _ref7$loadingIconComp,\n    _ref7$classNames = _ref7.classNames,\n    classNames = _ref7$classNames === void 0 ? {} : _ref7$classNames,\n    translations = _ref7.translations,\n    props = _objectWithoutProperties(_ref7, _excluded);\n  function handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (onSubmit) {\n      onSubmit(event);\n    }\n    if (inputRef.current) {\n      inputRef.current.blur();\n    }\n  }\n  function handleReset(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    onReset(event);\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    className: cx('ais-SearchBox', classNames.root, props.className)\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    ref: formRef,\n    action: \"\",\n    className: cx('ais-SearchBox-form', classNames.form),\n    noValidate: true,\n    onSubmit: handleSubmit,\n    onReset: handleReset\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    className: cx('ais-SearchBox-input', classNames.input),\n    autoComplete: \"off\",\n    autoCorrect: \"off\",\n    autoCapitalize: \"off\",\n    placeholder: placeholder,\n    spellCheck: false,\n    maxLength: 512,\n    type: \"search\",\n    value: value,\n    onChange: onChange,\n    autoFocus: autoFocus\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: cx('ais-SearchBox-submit', classNames.submit),\n    type: \"submit\",\n    title: translations.submitButtonTitle\n  }, /*#__PURE__*/React.createElement(SubmitIcon, {\n    classNames: classNames\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: cx('ais-SearchBox-reset', classNames.reset),\n    type: \"reset\",\n    title: translations.resetButtonTitle,\n    hidden: value.length === 0 || isSearchStalled\n  }, /*#__PURE__*/React.createElement(ResetIcon, {\n    classNames: classNames\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: cx('ais-SearchBox-loadingIndicator', classNames.loadingIndicator)\n    // @ts-ignore (this error is due to conflict with @algolia/ui-components-highlight-vdom, which declares \"too global\" type for span in case there's no @types/react or preact)\n    ,\n    hidden: !isSearchStalled\n  }, /*#__PURE__*/React.createElement(LoadingIcon, {\n    classNames: classNames\n  }))));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"queryHook\", \"searchAsYouType\", \"translations\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useRef, useState } from 'react';\nimport { useSearchBox } from 'react-instantsearch-hooks';\nimport { SearchBox as SearchBoxUiComponent } from \"../ui/SearchBox.js\";\nexport function SearchBox(_ref) {\n  var queryHook = _ref.queryHook,\n    _ref$searchAsYouType = _ref.searchAsYouType,\n    searchAsYouType = _ref$searchAsYouType === void 0 ? true : _ref$searchAsYouType,\n    translations = _ref.translations,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useSearchBox = useSearchBox({\n      queryHook: queryHook\n    }, {\n      $$widgetType: 'ais.searchBox'\n    }),\n    query = _useSearchBox.query,\n    refine = _useSearchBox.refine,\n    isSearchStalled = _useSearchBox.isSearchStalled;\n  var _useState = useState(query),\n    _useState2 = _slicedToArray(_useState, 2),\n    inputValue = _useState2[0],\n    setInputValue = _useState2[1];\n  var inputRef = useRef(null);\n  function setQuery(newQuery) {\n    setInputValue(newQuery);\n    if (searchAsYouType) {\n      refine(newQuery);\n    }\n  }\n  function onReset() {\n    setQuery('');\n    if (!searchAsYouType) {\n      refine('');\n    }\n  }\n  function onChange(event) {\n    setQuery(event.currentTarget.value);\n  }\n  function onSubmit(event) {\n    if (!searchAsYouType) {\n      refine(inputValue);\n    }\n    if (props.onSubmit) {\n      props.onSubmit(event);\n    }\n  }\n\n  // Track when the InstantSearch query changes to synchronize it with\n  // the React state.\n  // We bypass the state update if the input is focused to avoid concurrent\n  // updates when typing.\n  if (query !== inputValue && document.activeElement !== inputRef.current) {\n    setInputValue(query);\n  }\n  var uiProps = {\n    inputRef: inputRef,\n    isSearchStalled: isSearchStalled,\n    onChange: onChange,\n    onReset: onReset,\n    onSubmit: onSubmit,\n    value: inputValue,\n    translations: _objectSpread({\n      submitButtonTitle: 'Submit the search query',\n      resetButtonTitle: 'Clear the search query'\n    }, translations)\n  };\n  return /*#__PURE__*/React.createElement(SearchBoxUiComponent, _extends({}, props, uiProps));\n}","import connectSearchBox from \"instantsearch.js/es/connectors/search-box/connectSearchBox.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function useSearchBox(props, additionalWidgetProperties) {\n  return useConnector(connectSearchBox, props, additionalWidgetProperties);\n}","export function isFacetRefined(helper, facet, value) {\n  if (helper.state.isHierarchicalFacet(facet)) {\n    return helper.state.isHierarchicalFacetRefined(facet, value);\n  } else if (helper.state.isConjunctiveFacet(facet)) {\n    return helper.state.isFacetRefined(facet, value);\n  } else {\n    return helper.state.isDisjunctiveFacetRefined(facet, value);\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nimport { isFacetRefined } from \"./isFacetRefined.js\";\nexport function createSendEventForFacet(_ref) {\n  var instantSearchInstance = _ref.instantSearchInstance,\n    helper = _ref.helper,\n    attr = _ref.attribute,\n    widgetType = _ref.widgetType;\n  var sendEventForFacet = function sendEventForFacet() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var eventType = args[0],\n      facetValue = args[1],\n      _args$ = args[2],\n      eventName = _args$ === void 0 ? 'Filter Applied' : _args$;\n    var attribute = typeof attr === 'string' ? attr : attr(facetValue);\n    if (args.length === 1 && _typeof(args[0]) === 'object') {\n      instantSearchInstance.sendEventToInsights(args[0]);\n    } else if (eventType === 'click' && (args.length === 2 || args.length === 3)) {\n      if (!isFacetRefined(helper, attribute, facetValue)) {\n        // send event only when the facet is being checked \"ON\"\n        instantSearchInstance.sendEventToInsights({\n          insightsMethod: 'clickedFilters',\n          widgetType: widgetType,\n          eventType: eventType,\n          payload: {\n            eventName: eventName,\n            index: helper.getIndex(),\n            filters: [\"\".concat(attribute, \":\").concat(facetValue)]\n          },\n          attribute: attribute\n        });\n      }\n    } else if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass two arguments like:\\n  sendEvent('click', facetValue);\\n\\nIf you want to send a custom payload, you can pass one object: sendEvent(customPayload);\\n\");\n    }\n  };\n  return sendEventForFacet;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"name\", \"escapedValue\"],\n  _excluded2 = [\"escapedValue\", \"value\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT, checkRendering, createDocumentationMessageGenerator, createSendEventForFacet, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\nvar DEFAULT_SORT = ['isRefined', 'count:desc', 'name:asc'];\n/**\n * **RefinementList** connector provides the logic to build a custom widget that\n * will let the user filter the results based on the values of a specific facet.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in\n * attributesForFaceting of the searched index.\n *\n * This connector provides:\n * - a `refine()` function to select an item.\n * - a `toggleShowMore()` function to display more or less items\n * - a `searchForItems()` function to search within the items.\n */\nvar connectRefinementList = function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n      attribute = _ref.attribute,\n      _ref$operator = _ref.operator,\n      operator = _ref$operator === void 0 ? 'or' : _ref$operator,\n      _ref$limit = _ref.limit,\n      limit = _ref$limit === void 0 ? 10 : _ref$limit,\n      _ref$showMore = _ref.showMore,\n      showMore = _ref$showMore === void 0 ? false : _ref$showMore,\n      _ref$showMoreLimit = _ref.showMoreLimit,\n      showMoreLimit = _ref$showMoreLimit === void 0 ? 20 : _ref$showMoreLimit,\n      _ref$sortBy = _ref.sortBy,\n      sortBy = _ref$sortBy === void 0 ? DEFAULT_SORT : _ref$sortBy,\n      _ref$escapeFacetValue = _ref.escapeFacetValues,\n      escapeFacetValues = _ref$escapeFacetValue === void 0 ? true : _ref$escapeFacetValue,\n      _ref$transformItems = _ref.transformItems,\n      transformItems = _ref$transformItems === void 0 ? function (items) {\n        return items;\n      } : _ref$transformItems;\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n    var formatItems = function formatItems(_ref2) {\n      var label = _ref2.name,\n        value = _ref2.escapedValue,\n        item = _objectWithoutProperties(_ref2, _excluded);\n      return _objectSpread(_objectSpread({}, item), {}, {\n        value: value,\n        label: label,\n        highlighted: label\n      });\n    };\n    var lastResultsFromMainSearch;\n    var lastItemsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var triggerRefine;\n    var sendEvent;\n    var isShowingMore = false;\n    // Provide the same function to the `renderFn` so that way the user\n    // has to only bind it once when `isFirstRendering` for instance\n    var toggleShowMore = function toggleShowMore() {};\n    function cachedToggleShowMore() {\n      toggleShowMore();\n    }\n    function createToggleShowMore(renderOptions, widget) {\n      return function () {\n        isShowingMore = !isShowingMore;\n        widget.render(renderOptions);\n      };\n    }\n    function getLimit() {\n      return isShowingMore ? showMoreLimit : limit;\n    }\n    var searchForFacetValues = function searchForFacetValues() {\n      return function () {};\n    };\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, widget) {\n      return function (renderOptions) {\n        return function (query) {\n          var instantSearchInstance = renderOptions.instantSearchInstance,\n            searchResults = renderOptions.results;\n          if (query === '' && lastItemsFromMainSearch) {\n            // render with previous data from the helper.\n            renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n              results: lastResultsFromMainSearch\n            }))), {}, {\n              instantSearchInstance: instantSearchInstance\n            }), false);\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query,\n            // We cap the `maxFacetHits` value to 100 because the Algolia API\n            // doesn't support a greater number.\n            // See https://www.algolia.com/doc/api-reference/api-parameters/maxFacetHits/\n            Math.min(getLimit(), 100), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var escapedValue = _ref3.escapedValue,\n                  value = _ref3.value,\n                  item = _objectWithoutProperties(_ref3, _excluded2);\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  value: escapedValue,\n                  label: value\n                });\n              }), {\n                results: searchResults\n              });\n              renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n                results: lastResultsFromMainSearch\n              }))), {}, {\n                items: normalizedFacetValues,\n                canToggleShowMore: false,\n                canRefine: true,\n                isFromSearch: true,\n                instantSearchInstance: instantSearchInstance\n              }), false);\n            });\n          }\n        };\n      };\n    };\n    return {\n      $$type: 'ais.refinementList',\n      init: function init(initOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: initOptions.instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: renderOptions.instantSearchInstance\n        }), false);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, renderState.refinementList), {}, _defineProperty({}, attribute, this.getWidgetRenderState(renderOptions)))\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(renderOptions) {\n        var results = renderOptions.results,\n          state = renderOptions.state,\n          _createURL = renderOptions.createURL,\n          instantSearchInstance = renderOptions.instantSearchInstance,\n          helper = renderOptions.helper;\n        var items = [];\n        var facetValues = [];\n        if (!sendEvent || !triggerRefine || !searchForFacetValues) {\n          sendEvent = createSendEventForFacet({\n            instantSearchInstance: instantSearchInstance,\n            helper: helper,\n            attribute: attribute,\n            widgetType: this.$$type\n          });\n          triggerRefine = function triggerRefine(facetValue) {\n            sendEvent('click', facetValue);\n            helper.toggleFacetRefinement(attribute, facetValue).search();\n          };\n          searchForFacetValues = createSearchForFacetValues(helper, this);\n        }\n        if (results) {\n          var values = results.getFacetValues(attribute, {\n            sortBy: sortBy,\n            facetOrdering: sortBy === DEFAULT_SORT\n          });\n          facetValues = values && Array.isArray(values) ? values : [];\n          items = transformItems(facetValues.slice(0, getLimit()).map(formatItems), {\n            results: results\n          });\n          var maxValuesPerFacetConfig = state.maxValuesPerFacet;\n          var currentLimit = getLimit();\n          // If the limit is the max number of facet retrieved it is impossible to know\n          // if the facets are exhaustive. The only moment we are sure it is exhaustive\n          // is when it is strictly under the number requested unless we know that another\n          // widget has requested more values (maxValuesPerFacet > getLimit()).\n          // Because this is used for making the search of facets unable or not, it is important\n          // to be conservative here.\n          hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n          lastResultsFromMainSearch = results;\n          lastItemsFromMainSearch = items;\n          if (renderOptions.results) {\n            toggleShowMore = createToggleShowMore(renderOptions, this);\n          }\n        }\n\n        // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n        // function\n        var searchFacetValues = searchForFacetValues && searchForFacetValues(renderOptions);\n        var canShowLess = isShowingMore && lastItemsFromMainSearch.length > limit;\n        var canShowMore = showMore && !hasExhaustiveItems;\n        var canToggleShowMore = canShowLess || canShowMore;\n        return {\n          createURL: function createURL(facetValue) {\n            return _createURL(state.resetPage().toggleFacetRefinement(attribute, facetValue));\n          },\n          items: items,\n          refine: triggerRefine,\n          searchForItems: searchFacetValues,\n          isFromSearch: false,\n          canRefine: items.length > 0,\n          widgetParams: widgetParams,\n          isShowingMore: isShowingMore,\n          canToggleShowMore: canToggleShowMore,\n          toggleShowMore: cachedToggleShowMore,\n          sendEvent: sendEvent,\n          hasExhaustiveItems: hasExhaustiveItems\n        };\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        var withoutMaxValuesPerFacet = state.setQueryParameter('maxValuesPerFacet', undefined);\n        if (operator === 'and') {\n          return withoutMaxValuesPerFacet.removeFacet(attribute);\n        }\n        return withoutMaxValuesPerFacet.removeDisjunctiveFacet(attribute);\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n        if (!values.length) {\n          return uiState;\n        }\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, uiState.refinementList), {}, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var isDisjunctive = operator === 'or';\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        var withoutRefinements = searchParameters.clearRefinements(attribute);\n        var withFacetConfiguration = isDisjunctive ? withoutRefinements.addDisjunctiveFacet(attribute) : withoutRefinements.addFacet(attribute);\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n        if (!values) {\n          var key = isDisjunctive ? 'disjunctiveFacetsRefinements' : 'facetsRefinements';\n          return withMaxValuesPerFacet.setQueryParameters(_defineProperty({}, key, _objectSpread(_objectSpread({}, withMaxValuesPerFacet[key]), {}, _defineProperty({}, attribute, []))));\n        }\n        return values.reduce(function (parameters, value) {\n          return isDisjunctive ? parameters.addDisjunctiveFacetRefinement(attribute, value) : parameters.addFacetRefinement(attribute, value);\n        }, withMaxValuesPerFacet);\n      }\n    };\n  };\n};\nexport default connectRefinementList;","var _excluded = [\"parts\", \"highlightedTagName\", \"nonHighlightedTagName\", \"separator\", \"className\", \"classNames\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { Fragment } from 'react';\nimport { cx } from \"./lib/cx.js\";\nfunction HighlightPart(_ref) {\n  var classNames = _ref.classNames,\n    children = _ref.children,\n    highlightedTagName = _ref.highlightedTagName,\n    isHighlighted = _ref.isHighlighted,\n    nonHighlightedTagName = _ref.nonHighlightedTagName;\n  var TagName = isHighlighted ? highlightedTagName : nonHighlightedTagName;\n  return /*#__PURE__*/React.createElement(TagName, {\n    className: isHighlighted ? classNames.highlighted : classNames.nonHighlighted\n  }, children);\n}\nexport function InternalHighlight(_ref2) {\n  var parts = _ref2.parts,\n    _ref2$highlightedTagN = _ref2.highlightedTagName,\n    highlightedTagName = _ref2$highlightedTagN === void 0 ? 'mark' : _ref2$highlightedTagN,\n    _ref2$nonHighlightedT = _ref2.nonHighlightedTagName,\n    nonHighlightedTagName = _ref2$nonHighlightedT === void 0 ? 'span' : _ref2$nonHighlightedT,\n    _ref2$separator = _ref2.separator,\n    separator = _ref2$separator === void 0 ? ', ' : _ref2$separator,\n    className = _ref2.className,\n    classNames = _ref2.classNames,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, props, {\n    className: cx(classNames.root, className)\n  }), parts.map(function (part, partIndex) {\n    var isLastPart = partIndex === parts.length - 1;\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: partIndex\n    }, part.map(function (subPart, subPartIndex) {\n      return /*#__PURE__*/React.createElement(HighlightPart, {\n        key: subPartIndex,\n        classNames: classNames,\n        highlightedTagName: highlightedTagName,\n        nonHighlightedTagName: nonHighlightedTagName,\n        isHighlighted: subPart.isHighlighted\n      }, subPart.value);\n    }), !isLastPart && /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames.separator\n    }, separator));\n  }));\n}","var _excluded = [\"classNames\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { InternalHighlight } from \"./InternalHighlight.js\";\nimport { cx } from \"./lib/cx.js\";\nexport function Highlight(_ref) {\n  var _ref$classNames = _ref.classNames,\n    classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(InternalHighlight, _extends({\n    classNames: {\n      root: cx('ais-Highlight', classNames.root),\n      highlighted: cx('ais-Highlight-highlighted', classNames.highlighted),\n      nonHighlighted: cx('ais-Highlight-nonHighlighted', classNames.nonHighlighted),\n      separator: cx('ais-Highlight-separator', classNames.separator)\n    }\n  }, props));\n}","var _excluded = [\"isShowingMore\", \"translations\"];\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nexport function ShowMoreButton(_ref) {\n  var isShowingMore = _ref.isShowingMore,\n    translations = _ref.translations,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"button\", props, translations.showMoreButtonText({\n    isShowingMore: isShowingMore\n  }));\n}","var _excluded = [\"canRefine\", \"items\", \"onRefine\", \"query\", \"searchBox\", \"noResults\", \"showMore\", \"canToggleShowMore\", \"onToggleShowMore\", \"isShowingMore\", \"className\", \"classNames\", \"translations\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport { getHighlightedParts, unescape } from \"instantsearch.js/es/lib/utils/index.js\";\nimport React from 'react';\nimport { Highlight } from \"./Highlight.js\";\nimport { cx } from \"./lib/cx.js\";\nimport { ShowMoreButton } from \"./ShowMoreButton.js\";\nexport function RefinementList(_ref) {\n  var canRefine = _ref.canRefine,\n    items = _ref.items,\n    onRefine = _ref.onRefine,\n    query = _ref.query,\n    searchBox = _ref.searchBox,\n    noResults = _ref.noResults,\n    showMore = _ref.showMore,\n    canToggleShowMore = _ref.canToggleShowMore,\n    onToggleShowMore = _ref.onToggleShowMore,\n    isShowingMore = _ref.isShowingMore,\n    className = _ref.className,\n    _ref$classNames = _ref.classNames,\n    classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n    translations = _ref.translations,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    className: cx('ais-RefinementList', classNames.root, !canRefine && cx('ais-RefinementList--noRefinement', classNames.noRefinementRoot), className)\n  }), searchBox && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('ais-RefinementList-searchBox', classNames.searchBox)\n  }, searchBox), noResults ? /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('ais-RefinementList-noResults', classNames.noResults)\n  }, noResults) : /*#__PURE__*/React.createElement(\"ul\", {\n    className: cx('ais-RefinementList-list', classNames.list)\n  }, items.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: item.value,\n      className: cx('ais-RefinementList-item', classNames.item, item.isRefined && cx('ais-RefinementList-item--selected', classNames.selectedItem))\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: cx('ais-RefinementList-label', classNames.label)\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      checked: item.isRefined,\n      className: cx('ais-RefinementList-checkbox', classNames.checkbox),\n      type: \"checkbox\",\n      value: item.value,\n      onChange: function onChange() {\n        onRefine(item);\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('ais-RefinementList-labelText', classNames.labelText)\n    }, query.length > 0 ? /*#__PURE__*/React.createElement(Highlight, {\n      parts: [getHighlightedParts(unescape(item.highlighted || ''))]\n    }) : item.label), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('ais-RefinementList-count', classNames.count)\n    }, item.count)));\n  })), showMore && /*#__PURE__*/React.createElement(ShowMoreButton, {\n    className: cx('ais-RefinementList-showMore', classNames.showMore, !canToggleShowMore && cx('ais-RefinementList-showMore--disabled', classNames.disabledShowMore)),\n    disabled: !canToggleShowMore,\n    onClick: onToggleShowMore,\n    isShowingMore: isShowingMore,\n    translations: translations\n  }));\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"searchable\", \"searchablePlaceholder\", \"attribute\", \"operator\", \"limit\", \"showMore\", \"showMoreLimit\", \"sortBy\", \"escapeFacetValues\", \"transformItems\", \"translations\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useRef, useState } from 'react';\nimport { useRefinementList } from 'react-instantsearch-hooks';\nimport { RefinementList as RefinementListUiComponent } from \"../ui/RefinementList.js\";\nimport { SearchBox as SearchBoxUiComponent } from \"../ui/SearchBox.js\";\nexport function RefinementList(_ref) {\n  var searchable = _ref.searchable,\n    searchablePlaceholder = _ref.searchablePlaceholder,\n    attribute = _ref.attribute,\n    operator = _ref.operator,\n    limit = _ref.limit,\n    showMore = _ref.showMore,\n    showMoreLimit = _ref.showMoreLimit,\n    sortBy = _ref.sortBy,\n    escapeFacetValues = _ref.escapeFacetValues,\n    transformItems = _ref.transformItems,\n    translations = _ref.translations,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useRefinementList = useRefinementList({\n      attribute: attribute,\n      operator: operator,\n      limit: limit,\n      showMore: showMore,\n      showMoreLimit: showMoreLimit,\n      sortBy: sortBy,\n      escapeFacetValues: escapeFacetValues,\n      transformItems: transformItems\n    }, {\n      $$widgetType: 'ais.refinementList'\n    }),\n    canRefine = _useRefinementList.canRefine,\n    canToggleShowMore = _useRefinementList.canToggleShowMore,\n    isFromSearch = _useRefinementList.isFromSearch,\n    isShowingMore = _useRefinementList.isShowingMore,\n    items = _useRefinementList.items,\n    refine = _useRefinementList.refine,\n    searchForItems = _useRefinementList.searchForItems,\n    toggleShowMore = _useRefinementList.toggleShowMore;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    inputValue = _useState2[0],\n    setInputValue = _useState2[1];\n  var inputRef = useRef(null);\n  function setQuery(newQuery) {\n    setInputValue(newQuery);\n    searchForItems(newQuery);\n  }\n  function onRefine(item) {\n    refine(item.value);\n    setQuery('');\n  }\n  function onChange(event) {\n    setQuery(event.currentTarget.value);\n  }\n  function onReset() {\n    setQuery('');\n  }\n  function onSubmit() {\n    if (items.length > 0) {\n      refine(items[0].value);\n      setQuery('');\n    }\n  }\n  var mergedTranslations = _objectSpread({\n    resetButtonTitle: 'Clear the search query',\n    submitButtonTitle: 'Submit the search query',\n    noResultsText: 'No results.',\n    showMoreButtonText: function showMoreButtonText(options) {\n      return options.isShowingMore ? 'Show less' : 'Show more';\n    }\n  }, translations);\n  var uiProps = {\n    items: items,\n    canRefine: canRefine,\n    onRefine: onRefine,\n    query: inputValue,\n    searchBox: searchable && /*#__PURE__*/React.createElement(SearchBoxUiComponent, {\n      inputRef: inputRef,\n      placeholder: searchablePlaceholder,\n      isSearchStalled: false,\n      value: inputValue,\n      onChange: onChange,\n      onReset: onReset,\n      onSubmit: onSubmit,\n      translations: {\n        submitButtonTitle: mergedTranslations.submitButtonTitle,\n        resetButtonTitle: mergedTranslations.resetButtonTitle\n      }\n    }),\n    noResults: searchable && isFromSearch && items.length === 0 && mergedTranslations.noResultsText,\n    canToggleShowMore: canToggleShowMore,\n    onToggleShowMore: toggleShowMore,\n    isShowingMore: isShowingMore,\n    translations: {\n      showMoreButtonText: mergedTranslations.showMoreButtonText\n    }\n  };\n  return /*#__PURE__*/React.createElement(RefinementListUiComponent, _extends({}, props, uiProps, {\n    showMore: showMore\n  }));\n}","import connectRefinementList from \"instantsearch.js/es/connectors/refinement-list/connectRefinementList.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function useRefinementList(props, additionalWidgetProperties) {\n  return useConnector(connectRefinementList, props, additionalWidgetProperties);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nimport { serializePayload } from \"./serializer.js\";\nfunction chunk(arr) {\n  var chunkSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n  var chunks = [];\n  for (var i = 0; i < Math.ceil(arr.length / chunkSize); i++) {\n    chunks.push(arr.slice(i * chunkSize, (i + 1) * chunkSize));\n  }\n  return chunks;\n}\nvar buildPayloads = function buildPayloads(_ref) {\n  var index = _ref.index,\n    widgetType = _ref.widgetType,\n    methodName = _ref.methodName,\n    args = _ref.args,\n    instantSearchInstance = _ref.instantSearchInstance;\n  // when there's only one argument, that means it's custom\n  if (args.length === 1 && _typeof(args[0]) === 'object') {\n    return [args[0]];\n  }\n  var eventType = args[0];\n  var hits = args[1];\n  var eventName = args[2];\n  if (!hits) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass hit or hits as the second argument like:\\n  \".concat(methodName, \"(eventType, hit);\\n  \"));\n    } else {\n      return [];\n    }\n  }\n  if ((eventType === 'click' || eventType === 'conversion') && !eventName) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error(\"You need to pass eventName as the third argument for 'click' or 'conversion' events like:\\n  \".concat(methodName, \"('click', hit, 'Product Purchased');\\n\\n  To learn more about event naming: https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/in-depth/clicks-conversions-best-practices/\\n  \"));\n    } else {\n      return [];\n    }\n  }\n  var hitsArray = Array.isArray(hits) ? hits : [hits];\n  if (hitsArray.length === 0) {\n    return [];\n  }\n  var queryID = hitsArray[0].__queryID;\n  var hitsChunks = chunk(hitsArray);\n  var objectIDsByChunk = hitsChunks.map(function (batch) {\n    return batch.map(function (hit) {\n      return hit.objectID;\n    });\n  });\n  var positionsByChunk = hitsChunks.map(function (batch) {\n    return batch.map(function (hit) {\n      return hit.__position;\n    });\n  });\n  if (eventType === 'view') {\n    if (instantSearchInstance.status !== 'idle') {\n      return [];\n    }\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'viewedObjectIDs',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName || 'Hits Viewed',\n          index: index,\n          objectIDs: objectIDsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (eventType === 'click') {\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'clickedObjectIDsAfterSearch',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName,\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDsByChunk[i],\n          positions: positionsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (eventType === 'conversion') {\n    return hitsChunks.map(function (batch, i) {\n      return {\n        insightsMethod: 'convertedObjectIDsAfterSearch',\n        widgetType: widgetType,\n        eventType: eventType,\n        payload: {\n          eventName: eventName,\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDsByChunk[i]\n        },\n        hits: batch\n      };\n    });\n  } else if (process.env.NODE_ENV === 'development') {\n    throw new Error(\"eventType(\\\"\".concat(eventType, \"\\\") is not supported.\\n    If you want to send a custom payload, you can pass one object: \").concat(methodName, \"(customPayload);\\n    \"));\n  } else {\n    return [];\n  }\n};\nexport function createSendEventForHits(_ref2) {\n  var instantSearchInstance = _ref2.instantSearchInstance,\n    index = _ref2.index,\n    widgetType = _ref2.widgetType;\n  var sendEventForHits = function sendEventForHits() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var payloads = buildPayloads({\n      widgetType: widgetType,\n      index: index,\n      methodName: 'sendEvent',\n      args: args,\n      instantSearchInstance: instantSearchInstance\n    });\n    payloads.forEach(function (payload) {\n      return instantSearchInstance.sendEventToInsights(payload);\n    });\n  };\n  return sendEventForHits;\n}\nexport function createBindEventForHits(_ref3) {\n  var index = _ref3.index,\n    widgetType = _ref3.widgetType,\n    instantSearchInstance = _ref3.instantSearchInstance;\n  var bindEventForHits = function bindEventForHits() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    var payloads = buildPayloads({\n      widgetType: widgetType,\n      index: index,\n      methodName: 'bindEvent',\n      args: args,\n      instantSearchInstance: instantSearchInstance\n    });\n    return payloads.length ? \"data-insights-event=\".concat(serializePayload(payloads)) : '';\n  };\n  return bindEventForHits;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nexport function addAbsolutePosition(hits, page, hitsPerPage) {\n  return hits.map(function (hit, idx) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __position: hitsPerPage * page + idx + 1\n    });\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nexport function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n  return hits.map(function (hit) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __queryID: queryID\n    });\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { escapeHits, TAG_PLACEHOLDER, checkRendering, createDocumentationMessageGenerator, addAbsolutePosition, addQueryID, createSendEventForHits, createBindEventForHits, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits',\n  connector: true\n});\nvar connectHits = function connectHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n      _ref$escapeHTML = _ref.escapeHTML,\n      escapeHTML = _ref$escapeHTML === void 0 ? true : _ref$escapeHTML,\n      _ref$transformItems = _ref.transformItems,\n      transformItems = _ref$transformItems === void 0 ? function (items) {\n        return items;\n      } : _ref$transformItems;\n    var sendEvent;\n    var bindEvent;\n    return {\n      $$type: 'ais.hits',\n      init: function init(initOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: initOptions.instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var renderState = this.getWidgetRenderState(renderOptions);\n        renderFn(_objectSpread(_objectSpread({}, renderState), {}, {\n          instantSearchInstance: renderOptions.instantSearchInstance\n        }), false);\n        renderState.sendEvent('view', renderState.hits);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          hits: this.getWidgetRenderState(renderOptions)\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref2) {\n        var results = _ref2.results,\n          helper = _ref2.helper,\n          instantSearchInstance = _ref2.instantSearchInstance;\n        if (!sendEvent) {\n          sendEvent = createSendEventForHits({\n            instantSearchInstance: instantSearchInstance,\n            index: helper.getIndex(),\n            widgetType: this.$$type\n          });\n        }\n        if (!bindEvent) {\n          bindEvent = createBindEventForHits({\n            index: helper.getIndex(),\n            widgetType: this.$$type,\n            instantSearchInstance: instantSearchInstance\n          });\n        }\n        if (!results) {\n          return {\n            hits: [],\n            results: undefined,\n            sendEvent: sendEvent,\n            bindEvent: bindEvent,\n            widgetParams: widgetParams\n          };\n        }\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n        var hitsWithAbsolutePosition = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        var hitsWithAbsolutePositionAndQueryID = addQueryID(hitsWithAbsolutePosition, results.queryID);\n        var transformedHits = transformItems(hitsWithAbsolutePositionAndQueryID, {\n          results: results\n        });\n        return {\n          hits: transformedHits,\n          results: results,\n          sendEvent: sendEvent,\n          bindEvent: bindEvent,\n          widgetParams: widgetParams\n        };\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        if (!escapeHTML) {\n          return state;\n        }\n        return state.setQueryParameters(Object.keys(TAG_PLACEHOLDER).reduce(function (acc, key) {\n          return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));\n        }, {}));\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state) {\n        if (!escapeHTML) {\n          return state;\n        }\n        return state.setQueryParameters(TAG_PLACEHOLDER);\n      }\n    };\n  };\n};\nexport default connectHits;","var _excluded = [\"hits\", \"sendEvent\", \"hitComponent\", \"classNames\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { cx } from \"./lib/cx.js\";\nfunction DefaultHitComponent(_ref) {\n  var hit = _ref.hit;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      wordBreak: 'break-all'\n    }\n  }, JSON.stringify(hit).slice(0, 100), \"\\u2026\");\n}\nexport function Hits(_ref2) {\n  var hits = _ref2.hits,\n    sendEvent = _ref2.sendEvent,\n    _ref2$hitComponent = _ref2.hitComponent,\n    HitComponent = _ref2$hitComponent === void 0 ? DefaultHitComponent : _ref2$hitComponent,\n    _ref2$classNames = _ref2.classNames,\n    classNames = _ref2$classNames === void 0 ? {} : _ref2$classNames,\n    props = _objectWithoutProperties(_ref2, _excluded);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    className: cx('ais-Hits', classNames.root, hits.length === 0 && cx('ais-Hits--empty', classNames.emptyRoot), props.className)\n  }), /*#__PURE__*/React.createElement(\"ol\", {\n    className: cx('ais-Hits-list', classNames.list)\n  }, hits.map(function (hit) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: hit.objectID,\n      className: cx('ais-Hits-item', classNames.item)\n    }, /*#__PURE__*/React.createElement(HitComponent, {\n      hit: hit,\n      sendEvent: sendEvent\n    }));\n  })));\n}","var _excluded = [\"escapeHTML\", \"transformItems\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { useHits } from 'react-instantsearch-hooks';\nimport { Hits as HitsUiComponent } from \"../ui/Hits.js\";\nexport function Hits(_ref) {\n  var escapeHTML = _ref.escapeHTML,\n    transformItems = _ref.transformItems,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useHits = useHits({\n      escapeHTML: escapeHTML,\n      transformItems: transformItems\n    }, {\n      $$widgetType: 'ais.hits'\n    }),\n    hits = _useHits.hits,\n    sendEvent = _useHits.sendEvent;\n  var uiProps = {\n    hits: hits,\n    sendEvent: sendEvent\n  };\n  return /*#__PURE__*/React.createElement(HitsUiComponent, _extends({}, props, uiProps));\n}","import connectHits from \"instantsearch.js/es/connectors/hits/connectHits.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function useHits(props, additionalWidgetProperties) {\n  return useConnector(connectHits, props, additionalWidgetProperties);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { createDocumentationMessageGenerator, isPlainObject, mergeSearchParameters, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'configure',\n  connector: true\n});\nfunction getInitialSearchParameters(state, widgetParams) {\n  // We leverage the helper internals to remove the `widgetParams` from\n  // the state. The function `setQueryParameters` omits the values that\n  // are `undefined` on the next state.\n  return state.setQueryParameters(Object.keys(widgetParams.searchParameters).reduce(function (acc, key) {\n    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, undefined));\n  }, {}));\n}\nvar connectConfigure = function connectConfigure() {\n  var renderFn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return function (widgetParams) {\n    if (!widgetParams || !isPlainObject(widgetParams.searchParameters)) {\n      throw new Error(withUsage('The `searchParameters` option expects an object.'));\n    }\n    var connectorState = {};\n    function refine(helper) {\n      return function (searchParameters) {\n        // Merge new `searchParameters` with the ones set from other widgets\n        var actualState = getInitialSearchParameters(helper.state, widgetParams);\n        var nextSearchParameters = mergeSearchParameters(actualState, new algoliasearchHelper.SearchParameters(searchParameters));\n\n        // Update original `widgetParams.searchParameters` to the new refined one\n        widgetParams.searchParameters = searchParameters;\n\n        // Trigger a search with the resolved search parameters\n        helper.setState(nextSearchParameters).search();\n      };\n    }\n    return {\n      $$type: 'ais.configure',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref) {\n        var state = _ref.state;\n        unmountFn();\n        return getInitialSearchParameters(state, widgetParams);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        var _renderState$configur;\n        var widgetRenderState = this.getWidgetRenderState(renderOptions);\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          configure: _objectSpread(_objectSpread({}, widgetRenderState), {}, {\n            widgetParams: _objectSpread(_objectSpread({}, widgetRenderState.widgetParams), {}, {\n              searchParameters: mergeSearchParameters(new algoliasearchHelper.SearchParameters((_renderState$configur = renderState.configure) === null || _renderState$configur === void 0 ? void 0 : _renderState$configur.widgetParams.searchParameters), new algoliasearchHelper.SearchParameters(widgetRenderState.widgetParams.searchParameters)).getQueryParams()\n            })\n          })\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref2) {\n        var helper = _ref2.helper;\n        if (!connectorState.refine) {\n          connectorState.refine = refine(helper);\n        }\n        return {\n          refine: connectorState.refine,\n          widgetParams: widgetParams\n        };\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state, _ref3) {\n        var uiState = _ref3.uiState;\n        return mergeSearchParameters(state, new algoliasearchHelper.SearchParameters(_objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)));\n      },\n      getWidgetUiState: function getWidgetUiState(uiState) {\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          configure: _objectSpread(_objectSpread({}, uiState.configure), widgetParams.searchParameters)\n        });\n      }\n    };\n  };\n};\nexport default connectConfigure;","import { useConfigure } from \"../connectors/useConfigure.js\";\nexport function Configure(props) {\n  useConfigure(props, {\n    $$widgetType: 'ais.configure'\n  });\n  return null;\n}","import connectConfigure from \"instantsearch.js/es/connectors/configure/connectConfigure.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function useConfigure(props, additionalWidgetProperties) {\n  return useConnector(connectConfigure, {\n    searchParameters: props\n  }, additionalWidgetProperties);\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nexport function range(_ref) {\n  var _ref$start = _ref.start,\n    start = _ref$start === void 0 ? 0 : _ref$start,\n    end = _ref.end,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step;\n\n  // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return start + current * limitStep;\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { range } from \"../../lib/utils/index.js\";\nvar Paginator = /*#__PURE__*/function () {\n  function Paginator(params) {\n    _classCallCheck(this, Paginator);\n    _defineProperty(this, \"currentPage\", void 0);\n    _defineProperty(this, \"total\", void 0);\n    _defineProperty(this, \"padding\", void 0);\n    this.currentPage = params.currentPage;\n    this.total = params.total;\n    this.padding = params.padding;\n  }\n  _createClass(Paginator, [{\n    key: \"pages\",\n    value: function pages() {\n      var total = this.total,\n        currentPage = this.currentPage,\n        padding = this.padding;\n      if (total === 0) return [0];\n      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);\n      if (totalDisplayedPages === total) {\n        return range({\n          end: total\n        });\n      }\n      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);\n      var paddingRight = totalDisplayedPages - paddingLeft;\n      var first = currentPage - paddingLeft;\n      var last = currentPage + paddingRight;\n      return range({\n        start: first,\n        end: last\n      });\n    }\n  }, {\n    key: \"nbPagesDisplayed\",\n    value: function nbPagesDisplayed(padding, total) {\n      return Math.min(2 * padding + 1, total);\n    }\n  }, {\n    key: \"calculatePaddingLeft\",\n    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {\n      if (current <= padding) {\n        return current;\n      }\n      if (current >= total - padding) {\n        return totalDisplayedPages - (total - current);\n      }\n      return padding;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.currentPage === this.total - 1 || this.total === 0;\n    }\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.currentPage === 0;\n    }\n  }]);\n  return Paginator;\n}();\nexport default Paginator;","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { checkRendering, createDocumentationMessageGenerator, noop } from \"../../lib/utils/index.js\";\nimport Paginator from \"./Paginator.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination',\n  connector: true\n});\n/**\n * **Pagination** connector provides the logic to build a widget that will let the user\n * choose the current page of the results.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n */\nvar connectPagination = function connectPagination(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n      totalPages = _ref.totalPages,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 3 : _ref$padding;\n    var pager = new Paginator({\n      currentPage: 0,\n      total: 0,\n      padding: padding\n    });\n    var connectorState = {};\n    function getMaxPage(_ref2) {\n      var nbPages = _ref2.nbPages;\n      return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;\n    }\n    return {\n      $$type: 'ais.pagination',\n      init: function init(initOptions) {\n        var instantSearchInstance = initOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        var instantSearchInstance = renderOptions.instantSearchInstance;\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: instantSearchInstance\n        }), false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setQueryParameter('page', undefined);\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var page = searchParameters.page || 0;\n        if (!page) {\n          return uiState;\n        }\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        var page = uiState.page ? uiState.page - 1 : 0;\n        return searchParameters.setQueryParameter('page', page);\n      },\n      getWidgetRenderState: function getWidgetRenderState(_ref6) {\n        var results = _ref6.results,\n          helper = _ref6.helper,\n          state = _ref6.state,\n          createURL = _ref6.createURL;\n        if (!connectorState.refine) {\n          connectorState.refine = function (page) {\n            helper.setPage(page);\n            helper.search();\n          };\n        }\n        if (!connectorState.createURL) {\n          connectorState.createURL = function (helperState) {\n            return function (page) {\n              return createURL(helperState.setPage(page));\n            };\n          };\n        }\n        var page = state.page || 0;\n        var nbPages = getMaxPage(results || {\n          nbPages: 0\n        });\n        pager.currentPage = page;\n        pager.total = nbPages;\n        return {\n          createURL: connectorState.createURL(state),\n          refine: connectorState.refine,\n          canRefine: nbPages > 1,\n          currentRefinement: page,\n          nbHits: (results === null || results === void 0 ? void 0 : results.nbHits) || 0,\n          nbPages: nbPages,\n          pages: results ? pager.pages() : [],\n          isFirstPage: pager.isFirstPage(),\n          isLastPage: pager.isLastPage(),\n          widgetParams: widgetParams\n        };\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          pagination: this.getWidgetRenderState(renderOptions)\n        });\n      }\n    };\n  };\n};\nexport default connectPagination;","var _excluded = [\"pages\", \"currentPage\", \"nbPages\", \"isFirstPage\", \"isLastPage\", \"showFirst\", \"showPrevious\", \"showNext\", \"showLast\", \"createURL\", \"onNavigate\", \"translations\", \"classNames\"],\n  _excluded2 = [\"isDisabled\", \"className\", \"classNames\", \"href\", \"onClick\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { cx } from \"./lib/cx.js\";\nimport { isModifierClick } from \"./lib/isModifierClick.js\";\nexport function Pagination(_ref) {\n  var pages = _ref.pages,\n    currentPage = _ref.currentPage,\n    nbPages = _ref.nbPages,\n    isFirstPage = _ref.isFirstPage,\n    isLastPage = _ref.isLastPage,\n    _ref$showFirst = _ref.showFirst,\n    showFirst = _ref$showFirst === void 0 ? true : _ref$showFirst,\n    _ref$showPrevious = _ref.showPrevious,\n    showPrevious = _ref$showPrevious === void 0 ? true : _ref$showPrevious,\n    _ref$showNext = _ref.showNext,\n    showNext = _ref$showNext === void 0 ? true : _ref$showNext,\n    _ref$showLast = _ref.showLast,\n    showLast = _ref$showLast === void 0 ? true : _ref$showLast,\n    createURL = _ref.createURL,\n    onNavigate = _ref.onNavigate,\n    translations = _ref.translations,\n    _ref$classNames = _ref.classNames,\n    classNames = _ref$classNames === void 0 ? {} : _ref$classNames,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var firstPageIndex = 0;\n  var previousPageIndex = currentPage - 1;\n  var nextPageIndex = currentPage + 1;\n  var lastPageIndex = nbPages - 1;\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    className: cx('ais-Pagination', classNames.root, nbPages <= 1 && cx('ais-Pagination--noRefinement', classNames.noRefinementRoot), props.className)\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    className: cx('ais-Pagination-list', classNames.list)\n  }, showFirst && /*#__PURE__*/React.createElement(PaginationItem, {\n    isDisabled: isFirstPage,\n    className: cx('ais-Pagination-item--firstPage', classNames.firstPageItem),\n    classNames: classNames,\n    \"aria-label\": translations.firstPageItemAriaLabel,\n    href: createURL(firstPageIndex),\n    onClick: function onClick() {\n      return onNavigate(firstPageIndex);\n    }\n  }, translations.firstPageItemText), showPrevious && /*#__PURE__*/React.createElement(PaginationItem, {\n    isDisabled: isFirstPage,\n    className: cx('ais-Pagination-item--previousPage', classNames.previousPageItem),\n    classNames: classNames,\n    \"aria-label\": translations.previousPageItemAriaLabel,\n    href: createURL(previousPageIndex),\n    onClick: function onClick() {\n      return onNavigate(previousPageIndex);\n    }\n  }, translations.previousPageItemText), pages.map(function (page) {\n    return /*#__PURE__*/React.createElement(PaginationItem, {\n      key: page,\n      isDisabled: false,\n      className: cx('ais-Pagination-item--page', classNames.pageItem, page === currentPage && cx('ais-Pagination-item--selected', classNames.selectedItem)),\n      classNames: classNames,\n      \"aria-label\": translations.pageItemAriaLabel({\n        currentPage: page + 1,\n        nbPages: nbPages\n      }),\n      href: createURL(page),\n      onClick: function onClick() {\n        return onNavigate(page);\n      }\n    }, translations.pageItemText({\n      currentPage: page + 1,\n      nbPages: nbPages\n    }));\n  }), showNext && /*#__PURE__*/React.createElement(PaginationItem, {\n    isDisabled: isLastPage,\n    className: cx('ais-Pagination-item--nextPage', classNames.nextPageItem),\n    classNames: classNames,\n    \"aria-label\": translations.nextPageItemAriaLabel,\n    href: createURL(nextPageIndex),\n    onClick: function onClick() {\n      return onNavigate(nextPageIndex);\n    }\n  }, translations.nextPageItemText), showLast && /*#__PURE__*/React.createElement(PaginationItem, {\n    isDisabled: isLastPage,\n    className: cx('ais-Pagination-item--lastPage', classNames.lastPageItem),\n    classNames: classNames,\n    \"aria-label\": translations.lastPageItemAriaLabel,\n    href: createURL(lastPageIndex),\n    onClick: function onClick() {\n      return onNavigate(lastPageIndex);\n    }\n  }, translations.lastPageItemText)));\n}\nfunction PaginationItem(_ref2) {\n  var isDisabled = _ref2.isDisabled,\n    className = _ref2.className,\n    classNames = _ref2.classNames,\n    href = _ref2.href,\n    _onClick = _ref2.onClick,\n    props = _objectWithoutProperties(_ref2, _excluded2);\n  if (isDisabled) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: cx('ais-Pagination-item', classNames.item, 'ais-Pagination-item--disabled', classNames.disabledItem, className)\n    }, /*#__PURE__*/React.createElement(\"span\", _extends({\n      className: cx('ais-Pagination-link', classNames.link)\n    }, props)));\n  }\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: cx('ais-Pagination-item', classNames.item, className)\n  }, /*#__PURE__*/React.createElement(\"a\", _extends({\n    className: cx('ais-Pagination-link', classNames.link),\n    href: href,\n    onClick: function onClick(event) {\n      if (isModifierClick(event)) {\n        return;\n      }\n      event.preventDefault();\n      _onClick(event);\n    }\n  }, props)));\n}","export function isModifierClick(event) {\n  var isMiddleClick = event.button === 1;\n  return Boolean(isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"showFirst\", \"showPrevious\", \"showNext\", \"showLast\", \"padding\", \"totalPages\", \"translations\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React from 'react';\nimport { usePagination } from 'react-instantsearch-hooks';\nimport { Pagination as PaginationUiComponent } from \"../ui/Pagination.js\";\nexport function Pagination(_ref) {\n  var showFirst = _ref.showFirst,\n    showPrevious = _ref.showPrevious,\n    showNext = _ref.showNext,\n    showLast = _ref.showLast,\n    padding = _ref.padding,\n    totalPages = _ref.totalPages,\n    translations = _ref.translations,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _usePagination = usePagination({\n      padding: padding,\n      totalPages: totalPages\n    }, {\n      $$widgetType: 'ais.pagination'\n    }),\n    pages = _usePagination.pages,\n    currentRefinement = _usePagination.currentRefinement,\n    isFirstPage = _usePagination.isFirstPage,\n    isLastPage = _usePagination.isLastPage,\n    nbPages = _usePagination.nbPages,\n    createURL = _usePagination.createURL,\n    refine = _usePagination.refine;\n  var uiProps = {\n    pages: pages,\n    currentPage: currentRefinement,\n    isFirstPage: isFirstPage,\n    isLastPage: isLastPage,\n    nbPages: nbPages,\n    createURL: createURL,\n    onNavigate: refine,\n    translations: _objectSpread({\n      firstPageItemText: '',\n      previousPageItemText: '',\n      nextPageItemText: '',\n      lastPageItemText: '',\n      pageItemText: function pageItemText(_ref2) {\n        var currentPage = _ref2.currentPage;\n        return String(currentPage);\n      },\n      firstPageItemAriaLabel: 'First',\n      previousPageItemAriaLabel: 'Previous',\n      nextPageItemAriaLabel: 'Next',\n      lastPageItemAriaLabel: 'Last',\n      pageItemAriaLabel: function pageItemAriaLabel(_ref3) {\n        var currentPage = _ref3.currentPage;\n        return \"Page \".concat(currentPage);\n      }\n    }, translations)\n  };\n  return /*#__PURE__*/React.createElement(PaginationUiComponent, _extends({}, props, uiProps, {\n    showFirst: showFirst,\n    showPrevious: showPrevious,\n    showNext: showNext,\n    showLast: showLast\n  }));\n}","import connectPagination from \"instantsearch.js/es/connectors/pagination/connectPagination.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function usePagination(props, additionalWidgetProperties) {\n  return useConnector(connectPagination, props, additionalWidgetProperties);\n}","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport { GatsbyImage } from \"gatsby-plugin-image\"\nimport { AiOutlinePlus } from \"react-icons/ai\"\nimport { HiArrowUpRight } from \"react-icons/hi2\"\nimport { Fade } from \"react-awesome-reveal\"\n\nconst Hit = ({ hit }) => {\n  const {\n    heroImage,\n    title,\n    typology,\n    city,\n    country,\n    geographicRegion,\n    slug,\n    searchCategory,\n    position,\n    date,\n    externalLink,\n  } = hit\n\n  return (\n    <Fade triggerOnce={true}>\n      {searchCategory && (\n        <div className=\"search-result-item\">\n          {searchCategory === \"Projects\" && (\n            <>\n              <p className=\"upper search-result-category\">Project</p>\n              <div className=\"search-info-container\">\n                <Link\n                  to={`/projects/${slug}`}\n                  className=\"search-result-image-container\"\n                >\n                  <GatsbyImage\n                    image={heroImage.gatsbyImageData}\n                    alt={heroImage.description}\n                    className=\"search-result-image\"\n                  ></GatsbyImage>\n                </Link>\n                <div className=\"search-info-text\">\n                  <div>\n                    <Link to={`/projects/${slug}`}>\n                      <p className=\"search-result-title\">{title}</p>\n                    </Link>\n                    <div className=\"tile-tag-container\">\n                      {typology.map((type, index) => (\n                        <Link\n                          state={{ typeFilter: type }}\n                          key={index}\n                          className=\"tile-tag-btn\"\n                          to=\"/projects\"\n                        >\n                          {type}\n                        </Link>\n                      ))}\n                      {geographicRegion === \"Worldwide\" ? (\n                        <Link\n                          className=\"tile-tag-btn\"\n                          to=\"/projects\"\n                          state={{ regionFilter: [geographicRegion] }}\n                        >\n                          {geographicRegion}\n                        </Link>\n                      ) : (\n                        <Link\n                          className=\"tile-tag-btn\"\n                          to=\"/projects\"\n                          state={{ city: city, country: country }}\n                        >\n                          {city && `${city},`} {country}\n                        </Link>\n                      )}\n                    </div>\n                  </div>\n                  <Link to={`/projects/${slug}`} className=\"search-learn-more\">\n                    <AiOutlinePlus></AiOutlinePlus> Learn More\n                  </Link>\n                </div>\n              </div>\n            </>\n          )}{\" \"}\n          {searchCategory === \"News\" && (\n            <>\n              <p className=\"upper search-result-category\">News</p>\n              <div className=\"search-info-container\">\n                {externalLink ? (\n                  <>\n                    <a\n                      href={externalLink}\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                      className=\"search-result-image-container\"\n                    >\n                      <GatsbyImage\n                        image={heroImage.gatsbyImageData}\n                        alt={heroImage.description}\n                        className=\"search-result-image\"\n                      ></GatsbyImage>\n                    </a>\n                    <div className=\"search-info-text\">\n                      <a href={externalLink} target=\"_blank\" rel=\"noreferrer\">\n                        <p className=\"search-result-title\">{title}</p>\n                        <p className=\"faded\">\n                          {new Intl.DateTimeFormat(\"en-us\", {\n                            month: \"long\",\n                            day: \"numeric\",\n                            year: \"numeric\",\n                          }).format(new Date(date))}\n                        </p>\n                      </a>\n                      <a\n                        href={externalLink}\n                        target=\"_blank\"\n                        rel=\"noreferrer\"\n                        className=\"search-learn-more\"\n                      >\n                        <HiArrowUpRight></HiArrowUpRight> Learn More\n                      </a>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <Link\n                      to={`/news/${slug}`}\n                      className=\"search-result-image-container\"\n                    >\n                      <GatsbyImage\n                        image={heroImage.gatsbyImageData}\n                        alt={heroImage.description}\n                        className=\"search-result-image\"\n                      ></GatsbyImage>\n                    </Link>\n                    <div className=\"search-info-text\">\n                      <Link to={`/news/${slug}`}>\n                        <p className=\"search-result-title\">{title}</p>\n                        <p className=\"faded\">\n                          {new Intl.DateTimeFormat(\"en-us\", {\n                            month: \"long\",\n                            day: \"numeric\",\n                            year: \"numeric\",\n                          }).format(new Date(date))}\n                        </p>\n                      </Link>\n                      <Link to={`/news/${slug}`} className=\"search-learn-more\">\n                        <AiOutlinePlus></AiOutlinePlus> Learn More\n                      </Link>\n                    </div>\n                  </>\n                )}\n              </div>\n            </>\n          )}\n          {searchCategory === \"People\" && (\n            <>\n              <p className=\"upper search-result-category\">Person</p>\n              <div className=\"search-info-container\">\n                <Link\n                  to={`/team/${slug}`}\n                  className=\"search-result-image-container\"\n                >\n                  {heroImage && (\n                    <GatsbyImage\n                      image={heroImage.gatsbyImageData}\n                      alt={heroImage.description}\n                      className=\"search-result-image search-person\"\n                    ></GatsbyImage>\n                  )}\n                </Link>\n                <div className=\"search-info-text\">\n                  <Link to={`/team/${slug}`}>\n                    <p className=\"search-result-title\">{title}</p>\n                    <p className=\"faded\">{position}</p>\n                  </Link>\n                  <Link to={`/team/${slug}`} className=\"search-learn-more\">\n                    <AiOutlinePlus></AiOutlinePlus> Learn More\n                  </Link>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n    </Fade>\n  )\n}\n\nexport default Hit\n","import React, { useMemo, useState } from \"react\"\nimport Layout from \"../components/layout\"\nimport algoliasearch from \"algoliasearch/lite\"\nimport {\n  InstantSearch,\n  SearchBox,\n  Hits,\n  Pagination,\n  useInstantSearch,\n  Configure,\n  useStats,\n  RefinementList,\n} from \"react-instantsearch-hooks-web\"\nimport Hit from \"../components/searchResult\"\nimport Seo from \"../components/seo\"\nimport { BsArrowRight, BsArrowLeft, BsFilterLeft } from \"react-icons/bs\"\nimport { GrFormClose } from \"react-icons/gr\"\nimport { Fade } from \"react-awesome-reveal\"\n\nfunction NoResultsBoundary({ children, fallback }) {\n  const { results } = useInstantSearch()\n\n  // The `__isArtificial` flag makes sure not to display the No Results message\n  // when no hits have been returned yet.\n  if (!results.__isArtificial && results.nbHits === 0) {\n    return (\n      <>\n        {fallback}\n        <div hidden>{children}</div>\n      </>\n    )\n  }\n\n  return children\n}\n\nfunction NoResults() {\n  const { indexUiState } = useInstantSearch()\n\n  return (\n    <div>\n      <p>\n        No results for <q>{indexUiState.query}</q>.\n      </p>\n    </div>\n  )\n}\n\nfunction EmptyQueryBoundary({ children, fallback }) {\n  const { indexUiState } = useInstantSearch()\n\n  if (!indexUiState.query) {\n    return fallback\n  }\n\n  return children\n}\n\nfunction CustomStats() {\n  const { nbHits } = useStats()\n\n  return <span>All results &#40;{nbHits.toLocaleString()}&#41;</span>\n}\n\nconst Search = () => {\n  const searchClient = useMemo(\n    () =>\n      algoliasearch(\n        process.env.GATSBY_ALGOLIA_APP_ID,\n        process.env.GATSBY_ALGOLIA_SEARCH_KEY\n      ),\n    []\n  )\n  const [filterOpen, setFilterOpen] = useState(false)\n  const [category, setCategory] = useState(\"all\")\n  const [sort, setSort] = useState(\"date-desc\")\n\n  return (\n    <Layout>\n      <div className=\"search-page\">\n        <InstantSearch\n          searchClient={searchClient}\n          indexName=\"Pages\"\n          routing={true}\n        >\n          <SearchBox\n            placeholder=\"Search\"\n            id=\"search-box\"\n            searchAsYouType={false}\n            classNames={{\n              root: \"search-box\",\n              form: \"search-box-form\",\n              input: \"search-box-input\",\n              reset: \"search-box-reset\",\n              submit: \"search-box-submit\",\n              submitIcon: \"search-box-icon\",\n              resetIcon: \"search-box-icon\",\n            }}\n          />\n          <EmptyQueryBoundary fallback={null}>\n            <NoResultsBoundary fallback={<NoResults />}>\n              <CustomStats />\n              <div className=\"search-options-bar\">\n                {filterOpen ? (\n                  <button\n                    className=\"project-options-button-top\"\n                    onClick={() => setFilterOpen(!filterOpen)}\n                  >\n                    <GrFormClose className=\"filter-icon\"></GrFormClose>\n                    Filter\n                  </button>\n                ) : (\n                  <button\n                    className=\"project-options-button-top\"\n                    onClick={() => setFilterOpen(!filterOpen)}\n                  >\n                    <BsFilterLeft className=\"filter-icon\"></BsFilterLeft>\n                    Filter\n                  </button>\n                )}\n                {filterOpen && (\n                  <Fade triggerOnce={true}>\n                    <div className=\"search-filter-menu\">\n                      <div className=\"filter-column\">\n                        <p className=\"upper\">Type</p>\n                        <RefinementList attribute=\"searchCategory\"\n                        classNames={{}} />\n                      </div>\n                      <div className=\"filter-column\">\n                        <p className=\"upper\">Sort</p>\n                        <button className=\"project-options-button\">\n                          <div className=\"check-box\"></div> Newest to oldest\n                        </button>\n                        <button className=\"project-options-button\">\n                          <div className=\"check-box\"></div> Oldest to newest\n                        </button>\n                        <button className=\"project-options-button\">\n                          <div className=\"check-box\"></div> Alphabetical (A-Z)\n                        </button>\n                        <button className=\"project-options-button\">\n                          <div className=\"check-box\"></div> Alphabetical (Z-A)\n                        </button>\n                      </div>\n                    </div>\n                  </Fade>\n                )}\n              </div>\n\n              <Hits\n                hitComponent={Hit}\n                classNames={{ root: \"hits-container\" }}\n              />\n              <Configure hitsPerPage={10}></Configure>\n              <Pagination\n                padding={2}\n                showFirst={false}\n                showPrevious={true}\n                showNext={true}\n                showLast={false}\n                translations={{\n                  previousPageItemText: (\n                    <button\n                      className=\"search-prev\"\n                      onClick={() => window.scrollTo(0, 0)}\n                    >\n                      <BsArrowLeft></BsArrowLeft> Previous page\n                    </button>\n                  ),\n                  nextPageItemText: (\n                    <button\n                      onClick={() => window.scrollTo(0, 0)}\n                      className=\"search-next\"\n                    >\n                      Next page <BsArrowRight></BsArrowRight>\n                    </button>\n                  ),\n                  previousPageItemAriaLabel: \"Go to previous page\",\n                  nextPageItemAriaLabel: \"Go to next page\",\n                }}\n                classNames={{\n                  root: \"pagination-root\",\n                  list: \"pagination-list\",\n                  pageItem: \"pagination-page\",\n                  disabledItem: \"pagination-disabled\",\n                  selectedItem: \"pagination-selected\",\n                }}\n              ></Pagination>\n            </NoResultsBoundary>\n          </EmptyQueryBoundary>\n        </InstantSearch>\n      </div>\n    </Layout>\n  )\n}\n\nexport const Head = () => <Seo title=\"Search\" />\n\nexport default Search\n","import connectStats from \"instantsearch.js/es/connectors/stats/connectStats.js\";\nimport { useConnector } from \"../hooks/useConnector.js\";\nexport function useStats(props, additionalWidgetProperties) {\n  return useConnector(connectStats, props, additionalWidgetProperties);\n}","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else if (cleanRoot !== '__proto__') {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar split = String.prototype.split;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);\n            if (generateArrayPrefix === 'comma' && encodeValuesOnly) {\n                var valuesArray = split.call(String(obj), ',');\n                var valuesJoined = '';\n                for (var i = 0; i < valuesArray.length; ++i) {\n                    valuesJoined += (i === 0 ? '' : ',') + formatter(encoder(valuesArray[i], defaults.encoder, charset, 'value', format));\n                }\n                return [formatter(keyValue) + '=' + valuesJoined];\n            }\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        // we need to join elements in\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];\n    } else if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var j = 0; j < objKeys.length; ++j) {\n        var key = objKeys[j];\n        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        /* eslint operator-linebreak: [2, \"before\"] */\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var e=require(\"react\");function h(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var k=\"function\"===typeof Object.is?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];n(function(){c.value=d;c.getSnapshot=b;r(c)&&g({inst:c})},[a,d,b]);m(function(){r(c)&&g({inst:c});return a(function(){r(c)&&g({inst:c})})},[a]);p(d);return d}\nfunction r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}function t(a,b){return b()}var u=\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement?t:q;exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n"],"names":["EventEmitter","this","_events","_maxListeners","undefined","isFunction","arg","isObject","isUndefined","module","exports","prototype","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","emit","type","er","handler","len","args","i","listeners","error","length","arguments","Error","err","context","call","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","key","listenerCount","evlistener","emitter","AlgoliaSearchHelper","SearchParameters","SearchResults","algoliasearchHelper","client","index","opts","version","DerivedHelper","mainHelper","fn","main","lastResults","inherits","detach","detachDerivedHelper","getModifiedState","parameters","defaultsPure","omit","objectHasKeys","lib","addRefinement","refinementList","attribute","value","isRefined","valueAsString","facetRefinement","concat","mod","removeRefinement","clearRefinement","v","f","toggleRefinement","refinementType","hasChanged","newRefinementList","Object","keys","reduce","memo","values","facetList","filter","refinementValue","containsRefinements","refinementValueAsString","indexOf","merge","intersection","find","valToNumber","isValidUserToken","RefinementList","isEqualNumericRefinement","a","b","isArray","every","el","newParameters","params","_parseNumbers","userToken","warn","facets","disjunctiveFacets","hierarchicalFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements","self","forEach","paramName","isKeyKnown","PARAMETERS","isValueDefined","partialState","numbers","k","parsedValue","parseFloat","insideBoundingBox","map","geoRect","operators","operator","parsedValues","vPrime","make","instance","facet","rootPath","currentRefinement","getHierarchicalRefinement","name","clearRefinements","toggleHierarchicalFacetRefinement","validate","currentState","tagFilters","numericFilters","constructor","patch","_clearNumericRefinements","setQueryParameters","clearTags","setIndex","setQuery","newQuery","query","setPage","newPage","page","setFacets","setDisjunctiveFacets","setHitsPerPage","hitsPerPage","setTypoTolerance","typoTolerance","addNumericRefinement","isNumericRefined","getConjunctiveRefinements","facetName","isConjunctiveFacet","getDisjunctiveRefinements","isDisjunctiveFacet","getExcludeRefinements","removeNumericRefinement","paramValue","op","val","getNumericRefinements","getNumericRefinement","newNumericRefinements","operatorList","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","isHierarchicalFacet","addFacetRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","tag","isTagRefined","modification","removeFacet","removeDisjunctiveFacet","removeHierarchicalFacet","removeFacetRefinement","removeExcludeRefinement","removeDisjunctiveFacetRefinement","removeTagRefinement","t","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","separator","_getHierarchicalFacetSeparator","getHierarchicalFacetByName","lastIndexOf","addHierarchicalFacetRefinement","path","isHierarchicalFacetRefined","removeHierarchicalFacetRefinement","toggleTagRefinement","isFacetRefined","isExcludeRefined","isDisjunctiveFacetRefined","refinements","isOperatorDefined","array","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","setQueryParameter","parameter","nextWithNumbers","previousPlainObject","acc","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","resetPage","_getHierarchicalFacetSortBy","sortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","getHierarchicalFacetBreadcrumb","refinement","split","part","trim","toString","JSON","stringify","state","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","rootExhaustive","facetResult","exhaustive","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","parent","level","data","subtree","picked","facetValue","tuple","parentPath","onlyMatchingTree","orderBy","facetCount","parts","escapedValue","escapeFacetValue","count","format","unescapeFacetValue","generateHierarchicalTree","results","fv","compact","findIndex","formatSort","getIndices","attributes","indices","idx","assignFacetStats","dest","facetStats","stats","options","mainSubResponse","_rawResults","processingTimeMS","sum","result","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustiveFacetsCount","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","attributeIndex","dataFromMainRequest","refinedFacet","defaultData","root","excludes","_state","extractNormalizedFacetValues","predicate","isExcluded","hierarchicalFacetValues","currentRefinementSplit","unshift","setIsRefined","item","depth","child","recSort","sortFn","node","names","children","childNode","sortedChildren","getFacetStatsIfAvailable","getRefinement","attributeName","resultsFacets","getFacetByName","DEFAULT_SORT","getFacetValues","facetValues","facetOrdering","renderingContent","getFacetOrdering","Boolean","orderedFacets","remainingFacets","reverseOrder","order","ordering","sortRemainingBy","sortViaFacetOrdering","sort","vanillaSortFn","getFacetStats","getRefinements","res","facetDeclaration","rootFacet","intermediateFacet","newFacet","numericValue","requestBuilder","addAlgoliaAgent","setClient","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","isPageReset","getCurrentPage","search","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","_getHitsSearchParams","searchOnce","cb","tempState","queries","_getQueries","then","content","_originalResponse","e","catch","findAnswers","derivedHelper","Promise","resolve","derivedState","attributesForPrediction","nbHits","errorMessage","initIndex","queryLanguages","searchForFacetValues","maxFacetHits","userState","clientHasSFFV","clientHasInitIndex","isDisjunctive","algoliaQuery","getSearchForFacetQuery","searchForFacetValuesPromise","indexName","response","facetHits","q","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","setState","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getPage","getTags","r","states","mainQueries","queriesCount","helper","derivedQueries","derivedStateQueries","queryId","_dispatchAlgoliaResponse","bind","_dispatchAlgoliaError","s","specificResults","formattedResponse","containsRefinement","facetFilters","_hasDisjunctiveRefinements","disjunctiveRefinements","event","clearCache","newClient","getClient","derive","pos","hasPendingRequests","sources","reduceRight","source","String","replace","comparator","defaults","defaultInstructions","out","sortInstruction","matchingDefault","defaultInstruction","ctor","superCtor","create","enumerable","writable","configurable","arr1","arr2","isObjectOrArrayOrFunction","_merge","target","hasOwnProperty","sourceVal","targetVal","l","obj","excluded","sourceKeys","compareAscending","other","valIsDefined","valIsNull","othIsDefined","othIsNull","collection","iteratees","orders","criteria","iteratee","object","sortObject","localeCompare","curr","_getDisjunctiveFacetSearchParams","filtersMap","segment","join","hasHierarchicalFacetFilter","some","filteredFacetFilters","facetFilter","filtered","filterValue","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","_getNumericFilters","_getTagFilters","additionalParams","hierarchicalRootLevel","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","stateForSearchForFacetValues","searchForFacetSearchParameters","facetQuery","test","defineProperty","getOwnPropertySymbols","getOwnPropertyDescriptor","o","getOwnPropertyDescriptors","defineProperties","propertyIsEnumerable","Symbol","iterator","u","next","done","return","from","localStorage","window","parse","getItem","get","miss","all","set","setItem","delete","clear","removeItem","caches","shift","serializable","c","Math","floor","random","encodeURIComponent","h","WithinQueryParameters","WithinHeaders","d","entries","timeout","headers","queryParameters","cacheable","Read","Write","Any","p","y","status","lastUpdate","Date","now","protocol","url","accept","O","P","getTimeout","statelessHosts","w","method","toLowerCase","userAgent","pop","message","transporterStackTrace","A","S","connectTimeout","timeouts","connect","responseTimeout","request","host","triesLeft","onSuccess","onRetry","isTimedOut","logger","info","x","hostsCache","onFail","requester","send","reverse","j","add","T","charAt","substr","N","appId","authMode","apiKey","requestsCache","responsesCache","hosts","read","mappedRequestOptions","transporter","reject","write","methods","C","J","requests","E","R","I","F","D","W","H","Q","XMLHttpRequest","open","setRequestHeader","setTimeout","abort","onreadystatechange","readyState","OPENED","clearTimeout","onerror","responseText","onload","debug","multipleQueries","multipleSearchForFacetValues","customRequest","invariant","condition","InstantSearchContext","createContext","useInstantSearchContext","useContext","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","createSearchResults","_state$query","_state$page","_state$hitsPerPage","hits","nbPages","exhaustiveNbHits","__isArtificial","_typeof","ownKeys","enumerableOnly","symbols","sym","_objectSpread","_defineProperty","input","hint","prim","toPrimitive","Number","_toPrimitive","_toPropertyKey","getIndexSearchResults","indexWidget","getHelper","getResults","scopedResults","getScopedResults","scopedResult","fallbackResults","indexId","getIndexId","IndexContext","useIndexContext","_slicedToArray","arr","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","_iterableToArrayLimit","minLen","_arrayLikeToArray","_unsupportedIterableToArray","_nonIterableRest","useSearchResults","searchIndex","_useState2","useState","searchResults","setSearchResults","handleRender","useSearchState","getUiState","uiState","setLocalUiState","indexUiState","setUiState","useCallback","nextUiState","setIndexUiState","nextIndexUiState","useInstantSearch","_ref","catchError","_useSearchState","_useSearchResults","use","_len","middlewares","_key","unuse","refresh","onError","createDocumentationLink","_ref$connector","connector","createDocumentationMessageGenerator","widgets","links","widget","noop","checkRendering","rendering","usage","withUsage","renderFn","unmountFn","widgetParams","$$type","init","initOptions","instantSearchInstance","getWidgetRenderState","render","renderOptions","dispose","getRenderState","renderState","nbSortedHits","areHitsSorted","appliedRelevancyStrictness","has","dequal","foo","bar","compare","getTime","RegExp","InstantSearchServerContext","useInstantSearchServerContext","useStableValue","stableValue","setStableValue","useWidget","parentIndex","props","shouldSsr","prevPropsRef","useRef","current","prevWidgetRef","cleanupTimerRef","shouldAddWidgetEarly","getWidgets","includes","previousWidget","cleanup","_preventWidgetCleanup","removeWidgets","addWidgets","_excluded","_excluded2","_objectWithoutProperties","_objectWithoutPropertiesLoose","sourceSymbolKeys","useConnector","additionalWidgetProperties","serverContext","stableProps","stableAdditionalWidgetProperties","shouldSetStateRef","previousRenderStateRef","useMemo","connectorState","isFirstRender","Function","createWidget","_useState","_widget$getWidgetSear","getWidgetUiState","getWidgetSearchParameters","_getIndexSearchResult","_widget$getWidgetRend","templatesConfig","createURL","searchMetadata","isSearchStalled","createInitArgs","createRenderArgs","safelyRunOnBrowser","callback","fallback","extractPayload","payload","mainIndex","_initialUiState","widgetType","$$widgetType","createMetadataMiddleware","_ref2","payloadContainer","document","createElement","refNode","querySelector","onStateChange","subscribe","ua","_ua","appendChild","started","unsubscribe","remove","_defineProperties","descriptor","setWindowTitle","title","BrowserHistory","_this","windowTitle","_ref$writeDelay","writeDelay","parseURL","getLocation","start","Constructor","_classCallCheck","writeTimer","_createURL","_start","_dispose","_push","latestAcknowledgedHistory","history","protoProps","staticProps","qsModule","location","routeState","_this2","_ref3","shouldWrite","pushState","inPopState","_this3","_onPopState","_ref4","addEventListener","_this4","isDisposed","_ref5","removeEventListener","_this5","_ref6","lastPushWasByISAfterDispose","href","historyRouter","_ref7","_ref7$createURL","_ref8","hostname","_location$port","port","pathname","hash","queryString","portWithPrefix","_ref7$parseURL","_ref9","arrayLimit","_ref7$writeDelay","_ref7$getLocation","_ref10","getIndexStateWithoutConfigure","configure","simpleStateMapping","stateToRoute","routeToState","isPrimitive","isEqual","first","second","_Object$keys","isIndexWidget","mergeWithRest","left","right","ruleContexts","rest","mergeFacets","_","mergeDisjunctiveFacets","mergeHierarchicalFacets","nextFacets","mergeTagRefinements","mergeFacetRefinements","mergeFacetsExcludes","mergeDisjunctiveFacetsRefinements","mergeNumericRefinements","mergeHierarchicalFacetsRefinements","mergeRuleContexts","mergeSearchParameters","hierarchicalFacetsRefinementsMerged","hierarchicalFacetsMerged","tagRefinementsMerged","numericRefinementsMerged","disjunctiveFacetsRefinementsMerged","facetsExcludesMerged","facetRefinementsMerged","disjunctiveFacetsMerged","ruleContextsMerged","facetsMerged","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","privateHelperSetState","_uiState","getLocalWidgetsUiState","widgetStateOptions","initialUiState","getWidgetState","getLocalWidgetsSearchParameters","widgetSearchParametersOptions","initialSearchParameters","resetPageFromWidgets","indexWidgets","widgetHelper","resolveScopedResultsFromWidgets","_widgetParams$indexId","localWidgets","localUiState","localInstantSearchInstance","localParent","lastValidSearchParameters","getIndexName","_derivedHelper","getPreviousState","widgetParent","getParent","nextState","searchParameters","storeRenderState","scheduleSearch","_instantSearchInstanc","searchWithoutTriggeringOnStateChange","resolveSearchParameters","indexInitialResults","_initialResults","scheduleStalledRender","scheduleRender","onInternalStateChange","_helper","_derivedHelper2","previousUiState","innerIndex","refreshUiState","parentIndexName","component","componentName","descendantName","modifierName","descendent","modifier","getPropertyByPath","htmlEntities","regexUnescapedHtml","regexHasUnescapedHtml","htmlCharacters","regexEscapedHtml","regexHasEscapedHtml","character","isPlainObject","isObjectLike","getTag","getPrototypeOf","proto","_extends","assign","TAG_PLACEHOLDER","highlightPreTag","highlightPostTag","TAG_REPLACEMENT","replaceTagsAndEscape","recursiveEscape","escapeHits","__escaped","hit","_objectDestructuringEmpty","_highlightResult","_snippetResult","escapeFacets","highlighted","suit","concatHighlightedParts","isHighlighted","hasAlphanumeric","getHighlightFromSiblings","_parts","_parts2","isNextHighlighted","isPreviousHighlighted","reverseHighlightedParts","getHighlightedParts","highlightedValue","splitByPreTag","firstValue","elements","splitByPostTag","serializePayload","btoa","serializedPayload","writeDataAttributes","hoganHelpers","numberLocale","formatNumber","toLocaleString","highlight","_ref$highlightedTagNa","highlightedTagName","_ref$cssClasses","cssClasses","_ref2$value","attributeValue","className","reverseHighlight","snippet","reverseSnippet","insights","_JSON$parse","objectIDs","objectID","nextMicroTask","defer","progress","cancelled","wait","cancel","setIndexHelperState","finalUiState","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","defaultCreateURL","InstantSearch","_EventEmitter","subClass","superClass","_inherits","_super","_this$mainHelper","shouldResetStatus","_searchStalledTimer","middleware","_options$indexName","_options$initialUiSta","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","helpers","compileOptions","_stalledSearchDelay","_searchFunction","sendEventToInsights","routerOptions","_props$router","router","_props$stateMapping","stateMapping","route","lastRouteState","onUpdate","_router$start","createRouterMiddleware","_window$navigator","_window$navigator$use","navigator","newMiddlewareList","newMiddleware","creator","_len2","middlewareToUnuse","_key2","fakeClient","_mainHelperSearch","mainIndexHelper","searchFunctionHelper","originalScheduleSearch","_this$mainHelper2","callOnStateChange","InstantSearchSSRContext","defaultUserAgents","serverUserAgent","useInstantSearchApi","forceUpdate","useReducer","serverState","initialResults","searchRef","ssrSearchRef","addAlgoliaAgents","notifyServer","_props$stalledSearchD","prevProps","store","useSyncExternalStore","userAgents","Provider","defaultQueryHook","hook","_refine","_clear","_ref$queryHook","queryHook","searchBox","refine","cx","classNames","DefaultSubmitIcon","submitIcon","width","height","viewBox","DefaultResetIcon","resetIcon","fill","fillRule","transform","strokeWidth","strokeOpacity","cy","to","dur","repeatCount","DefaultLoadingIcon","stroke","loadingIcon","SearchBox","formRef","inputRef","onChange","onReset","onSubmit","placeholder","autoFocus","_ref7$resetIconCompon","resetIconComponent","ResetIcon","_ref7$submitIconCompo","submitIconComponent","SubmitIcon","_ref7$loadingIconComp","loadingIconComponent","LoadingIcon","_ref7$classNames","translations","ref","action","form","noValidate","preventDefault","stopPropagation","blur","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","maxLength","submit","submitButtonTitle","reset","resetButtonTitle","hidden","loadingIndicator","_ref$searchAsYouType","searchAsYouType","_useSearchBox","useSearchBox","inputValue","setInputValue","activeElement","uiProps","currentTarget","createSendEventForFacet","attr","eventType","_args$","eventName","insightsMethod","filters","_ref$operator","_ref$limit","limit","_ref$showMore","showMore","_ref$showMoreLimit","showMoreLimit","_ref$sortBy","_ref$escapeFacetValue","escapeFacetValues","_ref$transformItems","transformItems","items","lastResultsFromMainSearch","triggerRefine","sendEvent","formatItems","label","lastItemsFromMainSearch","hasExhaustiveItems","isShowingMore","toggleShowMore","cachedToggleShowMore","getLimit","tags","min","normalizedFacetValues","canToggleShowMore","canRefine","isFromSearch","createSearchForFacetValues","maxValuesPerFacetConfig","maxValuesPerFacet","currentLimit","createToggleShowMore","searchFacetValues","searchForItems","withoutMaxValuesPerFacet","withoutRefinements","withFacetConfiguration","currentMaxValuesPerFacet","nextMaxValuesPerFacet","max","withMaxValuesPerFacet","HighlightPart","nonHighlightedTagName","TagName","nonHighlighted","InternalHighlight","_ref2$highlightedTagN","_ref2$nonHighlightedT","_ref2$separator","partIndex","isLastPart","Fragment","subPart","subPartIndex","Highlight","_ref$classNames","ShowMoreButton","showMoreButtonText","onRefine","noResults","onToggleShowMore","noRefinementRoot","selectedItem","checked","checkbox","labelText","disabledShowMore","disabled","onClick","searchable","searchablePlaceholder","_useRefinementList","useRefinementList","mergedTranslations","noResultsText","buildPayloads","methodName","hitsArray","queryID","__queryID","hitsChunks","chunkSize","chunks","ceil","chunk","objectIDsByChunk","batch","positionsByChunk","__position","positions","createSendEventForHits","payloads","createBindEventForHits","addAbsolutePosition","addQueryID","bindEvent","_ref$escapeHTML","escapeHTML","hitsWithAbsolutePositionAndQueryID","DefaultHitComponent","style","wordBreak","Hits","_ref2$hitComponent","hitComponent","HitComponent","_ref2$classNames","emptyRoot","_useHits","useHits","getInitialSearchParameters","_renderState$configur","widgetRenderState","actualState","nextSearchParameters","Configure","useConfigure","range","_ref$start","end","_ref$step","step","limitStep","arrayLength","round","Paginator","currentPage","total","padding","totalDisplayedPages","nbPagesDisplayed","paddingLeft","calculatePaddingLeft","totalPages","_ref$padding","pager","helperState","getMaxPage","pages","isFirstPage","isLastPage","pagination","Pagination","_ref$showFirst","showFirst","_ref$showPrevious","showPrevious","_ref$showNext","showNext","_ref$showLast","showLast","onNavigate","previousPageIndex","nextPageIndex","lastPageIndex","PaginationItem","isDisabled","firstPageItem","firstPageItemAriaLabel","firstPageItemText","previousPageItem","previousPageItemAriaLabel","previousPageItemText","pageItem","pageItemAriaLabel","pageItemText","nextPageItem","nextPageItemAriaLabel","nextPageItemText","lastPageItem","lastPageItemAriaLabel","lastPageItemText","_onClick","disabledItem","link","isMiddleClick","button","altKey","ctrlKey","metaKey","shiftKey","isModifierClick","_usePagination","usePagination","heroImage","typology","city","country","geographicRegion","slug","searchCategory","date","externalLink","triggerOnce","Link","G","image","gatsbyImageData","alt","description","typeFilter","regionFilter","rel","Intl","DateTimeFormat","month","day","year","NoResultsBoundary","NoResults","EmptyQueryBoundary","CustomStats","Head","algoliasearch","process","filterOpen","setFilterOpen","category","setCategory","setSort","id","Hit","scrollTo","percentTwenties","Format","formatters","RFC1738","RFC3986","formats","utils","allowDots","allowPrototypes","charset","charsetSentinel","comma","decoder","decode","delimiter","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","plainObjects","strictNullHandling","str","$0","numberStr","fromCharCode","parseInt","parseArrayValue","parseKeys","givenKey","valuesParsed","exec","chain","leaf","cleanRoot","parseObject","isRegExp","normalizeParseOptions","tempObj","cleanStr","Infinity","skipIndex","bracketEqualsPos","maybeMap","encodedVal","combine","parseValues","newObj","arrayPrefixGenerators","brackets","prefix","repeat","pushToArray","valueOrArray","toISO","toISOString","defaultFormat","addQueryPrefix","encode","encoder","encodeValuesOnly","formatter","serializeDate","skipNulls","generateArrayPrefix","isBuffer","keyValue","valuesArray","valuesJoined","objKeys","keyPrefix","normalizeStringifyOptions","arrayFormat","joined","hexTable","toUpperCase","arrayToObject","queue","prop","refs","compacted","compactQueue","strWithoutPlus","unescape","decodeURIComponent","defaultEncoder","kind","string","escape","charCodeAt","mapped","mergeTarget","targetItem","is","useDebugValue","getSnapshot","inst"],"sourceRoot":""}